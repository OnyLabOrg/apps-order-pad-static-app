import{$ as z}from"./TranslationUtil-CFKlA-R8.js";import{b4 as $,d as V,G as w,l as y,j as G,b5 as p,c as _,o as c,b as a,g as i,m as r,f as s,$ as v,e as k,t as h,v as d,F as C,i as j,b6 as F,q as M}from"./index-VpTvokrT.js";import{m as R,h as I,a as L}from"./Http-t4QOkopC.js";import{$ as P}from"./api-DW5B9yTY.js";import{C as H}from"./vue3-perfect-scrollbar-BE2pwdf9.js";import{u as J}from"./useAbility-Cs5W3hcr.js";import{V as x}from"./VImg-DLFZbHSX.js";import{V as K}from"./VMenu-CPdRCSgq.js";import{V as O,a as g,b as U,d as Q}from"./VList-FaNJ4wcY.js";import{V as W}from"./VListItemAction-Du2jEEku.js";import{V as E}from"./VAvatar-D4I8QADJ.js";import{V as X}from"./VBadge-BM1oGE8D.js";import{V as S}from"./VDivider-DqhL-7_j.js";const m=R(),B=$("userStore",{state:()=>({user:void 0}),getters:{getCurrentUser:t=>t.user},actions:{onCurrentUserChange(t){m.on("update:user",t),t(this.user)},offCurrentUserChange(t){m.off("update:user",t)},setCurrentUser(t){this.user=t,m.emit("update:user",this.user)},reset(){this.user=void 0,m.emit("update:user",this.user)}},persist:!0}),Y=V({__name:"AppUserContext",setup(t){const n=B(),l=()=>{n.getCurrentUser===void 0&&(n.setCurrentUser(void 0),P("user",{method:"GET",onResponseError({response:o}){I(o)}}).then(o=>{n.setCurrentUser(o.user)}).catch(o=>{L(o)}))};return w(()=>{l()}),(o,e)=>y("",!0)}}),f=R(),Z=$("accountStore",{state:()=>({account:void 0}),getters:{getCurrentAccount:t=>t.account},actions:{onCurrentAccountChange(t){f.on("update:account",t),t(this.account)},offCurrentAccountChange(t){f.off("update:account",t)},setCurrentAccount(t){this.account=t,f.emit("update:account",this.account)},reset(){this.account=void 0,f.emit("update:account",this.account)}},persist:!0}),tt=V({__name:"AppAccountContext",setup(t){const n=Z(),l=()=>{n.getCurrentAccount===void 0&&(n.setCurrentAccount(void 0),P("account",{method:"GET",onResponseError({response:o}){I(o)}}).then(o=>{n.setCurrentAccount(o.account)}).catch(o=>{L(o)}))};return w(()=>{l()}),(o,e)=>y("",!0)}}),et={class:"d-flex gap-2 align-center"},vt=V({__name:"UserProfile",setup(t){const n=G(),l=J(),o=B(),e=p("userData"),T=async()=>{p("jwt",{domain:".apps.onylab.com"}).value=null,p("accessToken").value=null,e.value=null,e.value=null,await n.push("/login"),p("userAbilityRules").value=null,await n.push("/login"),p("userAbilityRules").value=null,l.update([])},D=[];return(A,rt)=>{const N=tt,q=Y;return c(),_(C,null,[a(N),a(q),r(e)?(c(),i(E,{key:0,color:r(e)&&r(e).avatar?void 0:"primary",variant:r(e)&&r(e).avatar?void 0:"tonal",class:"cursor-pointer",size:"38"},{default:s(()=>[r(e)&&r(e).avatar?(c(),i(x,{key:0,src:r(e).avatar},null,8,["src"])):(c(),i(v,{key:1,icon:"bx-user"})),a(K,{activator:"parent",location:"bottom end",offset:"20px",width:"240"},{default:s(()=>[a(O,null,{default:s(()=>[a(g,null,{default:s(()=>[k("div",et,[a(W,null,{default:s(()=>[a(E,{color:r(e)&&r(e).avatar?void 0:"primary",variant:r(e)&&r(e).avatar?void 0:"tonal"},{default:s(()=>[r(e)&&r(e).avatar?(c(),i(x,{key:0,src:r(e).avatar},null,8,["src"])):(c(),i(v,{key:1,icon:"bx-user"}))]),_:1},8,["color","variant"])]),_:1}),k("div",null,[a(U,{class:"font-weight-medium"},{default:s(()=>{var u,b;return[h(d((u=r(o).getCurrentUser)==null?void 0:u.first_name)+" "+d((b=r(o).getCurrentUser)==null?void 0:b.last_name),1)]}),_:1}),a(Q,{class:"text-disabled text-capitalize"})])])]),_:1}),a(r(H),{options:{wheelPropagation:!1}},{default:s(()=>[(c(),_(C,null,j(D,u=>(c(),_(C,{key:u.title},[u.type==="navItem"?(c(),i(g,{key:0,to:u.to},F({prepend:s(()=>[a(v,{icon:u.icon,size:"22"},null,8,["icon"])]),default:s(()=>[a(U,null,{default:s(()=>[h(d(u.title),1)]),_:2},1024)]),_:2},[u.badgeProps?{name:"append",fn:s(()=>[a(X,M({class:"me-3",rounded:"",ref_for:!0},u.badgeProps),null,16)]),key:"0"}:void 0]),1032,["to"])):(c(),i(S,{key:1,class:"my-1"}))],64))),64)),a(S,{class:"my-1"}),a(g,{"prepend-icon":"bx-power-off",onClick:T},{default:s(()=>[h(d(("$t"in A?A.$t:r(z))("header.user.logout")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["color","variant"])):y("",!0)],64)}}});export{vt as _};
