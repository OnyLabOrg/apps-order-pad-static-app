import{_ as ne}from"./AppTextField.vue_vue_type_script_setup_true_lang-3EMV-cD9.js";import{_ as _e}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-b5O-J6pq.js";import{V as ge}from"./VDialog-A5JpQCBN.js";import{V as G}from"./VCard-CkBMuvEG.js";import{V as N}from"./VCardText-DxRjpbfq.js";import{V as be}from"./VForm-BZrnpimr.js";import{V as xe}from"./VTable-ByL814xd.js";import{V as z}from"./VCheckbox-QYUqh-2e.js";import{d as X,r as c,X as W,w as F,g as S,o as v,f as t,b as e,e as a,v as h,m as n,aW as b,c as R,F as I,i as Z,ai as Q,t as C,a as ee,l as K,a0 as M,bf as B,bg as E,b2 as T,b0 as L,b1 as O,bm as Y,bl as le,dk as Ve,dl as we,dm as ye,bd as he}from"./index-DOkJe48M.js";import{G as Ue}from"./girl-using-laptop-Zx2hieO9.js";import{a as A,V as te}from"./VRow-eUot0FjN.js";import{V as ke}from"./VSpacer-BpmHbFnp.js";import{V as q}from"./VAvatar-BOKv2UuA.js";import{a as Ce}from"./formatters-Bnv68_Nh.js";import{_ as De}from"./TablePagination.vue_vue_type_script_setup_true_lang-DRHXdrcD.js";import{_ as Pe}from"./AppSelect.vue_vue_type_script_setup_true_lang-DcgCy-Ja.js";import{_ as $e}from"./AddNewUserDrawer.vue_vue_type_script_setup_true_lang-CxACkyp0.js";import{u as Re}from"./useApi-Bvq6sf9b.js";import{c as Ae}from"./createUrl-Bk9SiXAf.js";import{$ as se}from"./api-CwjTDMQg.js";import{V as Me}from"./VDivider-CrxRlpk-.js";import{V as Se}from"./VDataTableServer-Dn7jQUaX.js";import{V as Be}from"./VMenu-DcLQyT-c.js";import{V as Ee,a as re,b as oe}from"./VList-EipuDpDi.js";import{V as Te}from"./VChip-BVcnisPI.js";import{V as Le}from"./VImg-kl9jDrst.js";import"./form-D1qN4bRK.js";import"./VTextField-CNvqkmam.js";/* empty css                   */import"./VCounter-DUsUdtRu.js";import"./VField-B2kM7h83.js";import"./easing-Bybner-F.js";import"./VInput-BehDjSAV.js";import"./forwardRefs-C-GTDzx5.js";import"./VOverlay-D9OuTyhL.js";import"./delay-CcJrWM4g.js";import"./lazy-DyTu3bRX.js";import"./scopeId-CJBvJB3R.js";import"./dialog-transition-FcOWA9dE.js";import"./VCheckboxBtn-D1Xg5j01.js";import"./VSelectionControl-BxLnveGE.js";/* empty css              */import"./helpers-BGv4x_9E.js";import"./VPagination-BELqZl77.js";import"./VSelect-D-yhtNWH.js";import"./validators-BJEf8OaU.js";import"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-CSPs2uxC.js";import"./vue3-perfect-scrollbar-7RndkdF4.js";import"./VNavigationDrawer-DvviETws.js";import"./ssrBoot-CtLXdEZ-.js";import"./index-CvOPxmL5.js";import"./VDataTable-p7bsFvj5.js";import"./filter-DDMqGg5E.js";import"./VSlideGroup-C98TVpOG.js";const Ie={class:"text-h4 text-center mb-2"},Ne={colspan:"3"},je={class:"d-flex justify-end"},ze={class:"text-h6"},Fe={class:"d-flex justify-end"},Oe={class:"d-flex justify-end"},qe={class:"d-flex justify-end"},Ge={class:"d-flex align-center justify-center gap-4"},We=X({__name:"AddEditRoleDialog",props:{rolePermissions:{default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","update:rolePermissions"],setup(j,{emit:U}){const d=j,x=U,m=c([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),f=c(!1),w=c(""),o=c(),V=W(()=>{let u=0;return m.value.forEach(r=>{Object.entries(r).forEach(([k,D])=>{k!=="name"&&D&&u++})}),u}),y=W(()=>V.value>0&&V.value<m.value.length*3);F(f,u=>{m.value=m.value.map(r=>({...r,read:u,write:u,create:u}))}),F(()=>y,()=>{y.value||(f.value=!1)}),F(()=>m,()=>{V.value===m.value.length*3&&(f.value=!0)},{deep:!0}),F(()=>d,()=>{d.rolePermissions&&d.rolePermissions.permissions.length&&(w.value=d.rolePermissions.name,m.value=m.value.map(u=>{var k;const r=(k=d.rolePermissions)==null?void 0:k.permissions.find(D=>D.name===u.name);return r?{...u,...r}:u}))});const i=()=>{var r;const u={name:w.value,permissions:m.value};x("update:rolePermissions",u),x("update:isDialogVisible",!1),f.value=!1,(r=o.value)==null||r.reset()},_=()=>{var u;x("update:isDialogVisible",!1),f.value=!1,(u=o.value)==null||u.reset()};return(u,r)=>{const k=_e,D=ne;return v(),S(ge,{width:u.$vuetify.display.smAndDown?"auto":900,"model-value":d.isDialogVisible,"onUpdate:modelValue":_},{default:t(()=>[e(k,{onClick:_}),e(G,{class:"pa-sm-10 pa-2"},{default:t(()=>[e(N,null,{default:t(()=>[a("h4",Ie,h(d.rolePermissions.name?"Edit":"Add New")+" Role ",1),r[7]||(r[7]=a("p",{class:"text-body-1 text-center mb-6"}," Set Role Permissions ",-1)),e(n(be),{ref_key:"refPermissionForm",ref:o},{default:t(()=>[e(D,{modelValue:n(w),"onUpdate:modelValue":r[0]||(r[0]=p=>b(w)?w.value=p:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),r[6]||(r[6]=a("h5",{class:"text-h5 my-6"}," Role Permissions ",-1)),e(xe,{class:"permission-table text-no-wrap mb-6"},{default:t(()=>[a("tr",null,[r[3]||(r[3]=a("td",null,[a("h6",{class:"text-h6"}," Administrator Access ")],-1)),a("td",Ne,[a("div",je,[e(z,{modelValue:n(f),"onUpdate:modelValue":r[1]||(r[1]=p=>b(f)?f.value=p:null),indeterminate:n(y),"onUpdate:indeterminate":r[2]||(r[2]=p=>b(y)?y.value=p:null),label:"Select All"},null,8,["modelValue","indeterminate"])])])]),(v(!0),R(I,null,Z(n(m),p=>(v(),R("tr",{key:p.name},[a("td",null,[a("h6",ze,h(p.name),1)]),a("td",null,[a("div",Fe,[e(z,{modelValue:p.read,"onUpdate:modelValue":P=>p.read=P,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",Oe,[e(z,{modelValue:p.write,"onUpdate:modelValue":P=>p.write=P,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",qe,[e(z,{modelValue:p.create,"onUpdate:modelValue":P=>p.create=P,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),_:1}),a("div",Ge,[e(Q,{onClick:i},{default:t(()=>r[4]||(r[4]=[C(" Submit ")])),_:1,__:[4]}),e(Q,{color:"secondary",variant:"tonal",onClick:_},{default:t(()=>r[5]||(r[5]=[C(" Cancel ")])),_:1,__:[5]})])]),_:1,__:[6]},512)]),_:1,__:[7]})]),_:1})]),_:1},8,["width","model-value"])}}}),Qe={class:"text-body-1"},Xe={class:"v-avatar-group"},He={class:"d-flex justify-space-between align-center"},Je={class:"text-h5 mb-1"},Ke={class:"d-flex align-center"},Ye=["onClick"],Ze=["src"],et=X({__name:"RoleCards",setup(j){const U=c([{role:"Administrator",users:[B,E,T,L],details:{name:"Administrator",permissions:[{name:"User Management",read:!0,write:!0,create:!0},{name:"Disputes Management",read:!0,write:!0,create:!0},{name:"API Control",read:!0,write:!0,create:!0}]}},{role:"Manager",users:[B,E,T,L,O,Y,le],details:{name:"Manager",permissions:[{name:"Reporting",read:!0,write:!0,create:!1},{name:"Payroll",read:!0,write:!0,create:!0},{name:"User Management",read:!0,write:!0,create:!0}]}},{role:"Users",users:[B,E,T,L,O],details:{name:"Users",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}},{role:"Support",users:[B,E,T,L,O,Y],details:{name:"Support",permissions:[{name:"Repository Management",read:!0,write:!0,create:!1},{name:"Content Management",read:!0,write:!0,create:!1},{name:"Database Management",read:!0,write:!0,create:!1}]}},{role:"Restricted User",users:[B,E,T,L,O,Y,le,Ve,we,ye],details:{name:"Restricted User",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}}]),d=c(!1),x=c(),m=c(!1),f=w=>{d.value=!0,x.value=w};return(w,o)=>{const V=ee("IconBtn"),y=We;return v(),R(I,null,[e(te,null,{default:t(()=>[(v(!0),R(I,null,Z(n(U),i=>(v(),S(A,{key:i.role,cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(G,null,{default:t(()=>[e(N,{class:"d-flex align-center pb-4"},{default:t(()=>[a("div",Qe," Total "+h(i.users.length)+" users ",1),e(ke),a("div",Xe,[(v(!0),R(I,null,Z(i.users,(_,u)=>(v(),R(I,{key:_},[i.users.length>4&&i.users.length!==4&&u<3?(v(),S(q,{key:0,image:_},null,8,["image"])):K("",!0),i.users.length===4?(v(),S(q,{key:1,image:_},null,8,["image"])):K("",!0)],64))),128)),i.users.length>4?(v(),S(q,{key:0,color:w.$vuetify.theme.current.dark?"#373B50":"#EEEDF0"},{default:t(()=>[a("span",null," +"+h(i.users.length-3),1)]),_:2},1032,["color"])):K("",!0)])]),_:2},1024),e(N,null,{default:t(()=>[a("div",He,[a("div",null,[a("h5",Je,h(i.role),1),a("div",Ke,[a("a",{href:"javascript:void(0)",onClick:_=>f(i.details)}," Edit Role ",8,Ye)])]),e(V,{class:"align-self-end"},{default:t(()=>[e(M,{icon:"bx-copy",class:"text-disabled"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(A,{cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(G,{class:"h-100",ripple:!1},{default:t(()=>[e(te,{"no-gutters":"",class:"h-100"},{default:t(()=>[e(A,{cols:"6",class:"d-flex flex-column justify-end align-center mt-5"},{default:t(()=>[a("img",{width:"105",src:n(Ue)},null,8,Ze)]),_:1}),e(A,{cols:"6"},{default:t(()=>[e(N,{class:"d-flex flex-column align-end justify-end gap-4"},{default:t(()=>[e(Q,{size:"small",onClick:o[0]||(o[0]=i=>m.value=!0)},{default:t(()=>o[4]||(o[4]=[C(" Add New Role ")])),_:1,__:[4]}),o[5]||(o[5]=a("div",{class:"text-end"},[C(" Add new role,"),a("br"),C(" if it doesn't exist. ")],-1))]),_:1,__:[5]})]),_:1})]),_:1})]),_:1}),e(y,{"is-dialog-visible":n(m),"onUpdate:isDialogVisible":o[1]||(o[1]=i=>b(m)?m.value=i:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(y,{"is-dialog-visible":n(d),"onUpdate:isDialogVisible":o[2]||(o[2]=i=>b(d)?d.value=i:null),"role-permissions":n(x),"onUpdate:rolePermissions":o[3]||(o[3]=i=>b(x)?x.value=i:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}}),tt={class:"d-flex align-start flex-column flex-sm-row flex-wrap gap-4"},at={style:{"inline-size":"15.625rem"}},lt={style:{"inline-size":"9.375rem"}},st={style:{"inline-size":"9.375rem"}},rt={class:"d-flex align-center gap-x-4"},ot={key:1},nt={class:"d-flex flex-column"},it={class:"text-base"},ut={class:"text-sm"},dt={class:"d-flex align-center gap-x-2"},mt={class:"text-capitalize text-high-emphasis text-body-1"},ct={class:"text-body-1 text-high-emphasis text-capitalize"},pt=X({__name:"UserList",async setup(j){let U,d;const x=c(""),m=c(),f=c(),w=c(),o=c(10),V=c(1),y=c(),i=c(),_=c([]),u=g=>{var s,$;y.value=(s=g.sortBy[0])==null?void 0:s.key,i.value=($=g.sortBy[0])==null?void 0:$.order},r=[{title:"User",key:"user"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Billing",key:"billing"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:k,execute:D}=([U,d]=he(()=>Re(Ae("/apps/users",{query:{q:x,status:w,plan:f,role:m,itemsPerPage:o,page:V,sortBy:y,orderBy:i}}))),U=await U,d(),U),p=W(()=>k.value.users),P=W(()=>k.value.totalUsers),ie=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],ue=[{title:"Company",value:"company"},{title:"Team",value:"team"},{title:"Basic",value:"basic"},{title:"Enterprise",value:"enterprise"}],H=g=>{const s=g.toLowerCase();return s==="subscriber"?{color:"success",icon:"bx-user"}:s==="admin"?{color:"primary",icon:"bx-crown"}:s==="maintainer"?{color:"info",icon:"bx-pie-chart-alt"}:s==="editor"?{color:"warning",icon:"bx-edit"}:s==="author"?{color:"error",icon:"bx-desktop"}:{color:"success",icon:"bx-user"}},de=g=>{const s=g.toLowerCase();return s==="pending"?"warning":s==="active"?"success":s==="inactive"?"secondary":"primary"},J=c(!1),me=async g=>{await se("/apps/users",{method:"POST",body:g}),D()},ce=async g=>{await se(`/apps/users/${g}`,{method:"DELETE"});const s=_.value.findIndex($=>$===g);s!==-1&&_.value.splice(s,1),D()};return(g,s)=>{const $=Pe,pe=ne,fe=ee("RouterLink"),ae=ee("IconBtn"),ve=De;return v(),R("section",null,[e(G,null,{default:t(()=>[e(N,{class:"d-flex flex-md-row flex-column justify-space-between gap-4"},{default:t(()=>[e($,{"model-value":n(o),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":s[0]||(s[0]=l=>o.value=parseInt(l,10))},null,8,["model-value"]),a("div",tt,[a("div",at,[e(pe,{modelValue:n(x),"onUpdate:modelValue":s[1]||(s[1]=l=>b(x)?x.value=l:null),placeholder:"Search User"},null,8,["modelValue"])]),a("div",lt,[e($,{modelValue:n(m),"onUpdate:modelValue":s[2]||(s[2]=l=>b(m)?m.value=l:null),placeholder:"Select Role",items:ie,clearable:"","clear-icon":"bx-x"},null,8,["modelValue"])]),a("div",st,[e($,{modelValue:n(f),"onUpdate:modelValue":s[3]||(s[3]=l=>b(f)?f.value=l:null),placeholder:"Select Plan",items:ue,clearable:"","clear-icon":"bx-x"},null,8,["modelValue"])])])]),_:1}),e(Me),e(Se,{"items-per-page":n(o),"onUpdate:itemsPerPage":s[5]||(s[5]=l=>b(o)?o.value=l:null),"model-value":n(_),"onUpdate:modelValue":s[6]||(s[6]=l=>b(_)?_.value=l:null),page:n(V),"onUpdate:page":s[7]||(s[7]=l=>b(V)?V.value=l:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:n(p),"items-length":n(P),headers:r,class:"text-no-wrap","show-select":"","onUpdate:options":u},{"item.user":t(({item:l})=>[a("div",rt,[e(q,{size:"34",variant:l.avatar?void 0:"tonal",color:l.avatar?void 0:H(l.role).color},{default:t(()=>[l.avatar?(v(),S(Le,{key:0,src:l.avatar},null,8,["src"])):(v(),R("span",ot,h(("avatarText"in g?g.avatarText:n(Ce))(l.fullName)),1))]),_:2},1032,["variant","color"]),a("div",nt,[a("h6",it,[e(fe,{to:{name:"apps-user-view-id",params:{id:l.id}},class:"font-weight-medium text-link"},{default:t(()=>[C(h(l.fullName),1)]),_:2},1032,["to"])]),a("div",ut,h(l.email),1)])])]),"item.role":t(({item:l})=>[a("div",dt,[e(M,{size:20,icon:H(l.role).icon,color:H(l.role).color},null,8,["icon","color"]),a("div",mt,h(l.role),1)])]),"item.plan":t(({item:l})=>[a("div",ct,h(l.currentPlan),1)]),"item.status":t(({item:l})=>[e(Te,{color:de(l.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[C(h(l.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:l})=>[e(ae,{onClick:ft=>ce(l.id)},{default:t(()=>[e(M,{icon:"bx-trash"})]),_:2},1032,["onClick"]),e(ae,null,{default:t(()=>[e(M,{icon:"bx-show"})]),_:1}),e(Q,{icon:"",variant:"text",color:"medium-emphasis"},{default:t(()=>[e(M,{icon:"bx-dots-vertical-rounded"}),e(Be,{activator:"parent"},{default:t(()=>[e(Ee,null,{default:t(()=>[e(re,{to:{name:"apps-user-view-id",params:{id:l.id}}},{prepend:t(()=>[e(M,{icon:"bx-show"})]),default:t(()=>[e(oe,null,{default:t(()=>s[9]||(s[9]=[C("View")])),_:1,__:[9]})]),_:2},1032,["to"]),e(re,{link:""},{prepend:t(()=>[e(M,{icon:"bx-pencil"})]),default:t(()=>[e(oe,null,{default:t(()=>s[10]||(s[10]=[C("Edit")])),_:1,__:[10]})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:t(()=>[e(ve,{page:n(V),"onUpdate:page":s[4]||(s[4]=l=>b(V)?V.value=l:null),"items-per-page":n(o),"total-items":n(P)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1}),e($e,{"is-drawer-open":n(J),"onUpdate:isDrawerOpen":s[8]||(s[8]=l=>b(J)?J.value=l:null),onUserData:me},null,8,["is-drawer-open"])])}}}),va=X({__name:"index",setup(j){return(U,d)=>(v(),S(te,null,{default:t(()=>[e(A,{cols:"12"},{default:t(()=>d[0]||(d[0]=[a("h4",{class:"text-h4 mb-1"}," Roles List ",-1),a("p",{class:"text-body-1 mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1)])),_:1,__:[0]}),e(A,{cols:"12"},{default:t(()=>[e(et)]),_:1}),e(A,{cols:"12"},{default:t(()=>d[1]||(d[1]=[a("h4",{class:"text-h4 mb-1 mt-6"}," Total users with their roles ",-1),a("p",{class:"text-body-1 mb-0"}," Find all of your companyâ€™s administrator accounts and their associate roles. ",-1)])),_:1,__:[1]}),e(A,{cols:"12"},{default:t(()=>[e(pt)]),_:1})]),_:1}))}});export{va as default};
