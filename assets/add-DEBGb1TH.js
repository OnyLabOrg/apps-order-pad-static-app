import{D as ve,$ as Ge,c as O,h as L,a as j,b as fe,d as n,e as I}from"./Http-CcctVUeP.js";import{_ as Ke}from"./AppTextarea.vue_vue_type_script_setup_true_lang-BkyFsIHa.js";import{_ as We}from"./AppAutocomplete.vue_vue_type_script_setup_true_lang-CyxYo4UK.js";import{_ as Xe}from"./AppSelect.vue_vue_type_script_setup_true_lang-nbI1aphG.js";import{_ as Ze}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-CDG20rp_.js";import{_ as Je}from"./AppTextField.vue_vue_type_script_setup_true_lang-CvBFBKXh.js";import{_ as Qe}from"./AppCombobox.vue_vue_type_script_setup_true_lang-Bt-tOTVa.js";import{$ as H}from"./api-C3hfGWP7.js";import{V as ge}from"./VSelect-BouajFoU.js";import{d as xe,r as p,X as el,G as ll,ai as al,c as Y,e as $,b as l,v as c,m as o,g as P,l as N,f as d,ah as z,a as ol,o as y,t as v,$ as F,F as be,i as Re}from"./index-DxBit_rU.js";import{V as U,a as i}from"./VRow-YoR54zRf.js";import{V as $e,c as ye}from"./VCard-Bn53r5u4.js";import{V as Ve}from"./VCardText-CT7j5axA.js";import{V as Fe}from"./VCheckbox-DsH0eUyb.js";import{a as dl,V as he}from"./VTabs-Bg5iLHch.js";import{V as tl,a as ke}from"./VWindowItem-BGZQO96c.js";import{V as nl}from"./VTextField-DwrW97y4.js";import{V as qe}from"./VSpacer-BmtEC6t1.js";import{_ as il}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./form-BpjSmW3u.js";/* empty css                   */import"./VCounter-kvti3oYR.js";import"./VImg-B4wra0po.js";import"./VField-BydpSihU.js";import"./easing-Bybner-F.js";import"./VInput-BWG_eTsP.js";import"./forwardRefs-C-GTDzx5.js";import"./filter-CC8aGSAq.js";import"./VList-DHEuIugC.js";import"./ssrBoot-6vobDh7F.js";import"./VAvatar-DuCnt3th.js";import"./VDivider-D8As89ek.js";import"./VMenu-VM5TUImf.js";import"./VOverlay-D_yOO2K6.js";import"./delay-CSCRv53K.js";import"./lazy-DDgZtgjW.js";import"./scopeId-McKLNN9G.js";import"./dialog-transition-DgE_fyI6.js";import"./VCheckboxBtn-e3HDqb8D.js";import"./VSelectionControl-D9aUIFHm.js";import"./VChip-D5Q5olyw.js";import"./VSlideGroup-CeRZikM3.js";import"./index-CvOPxmL5.js";/* empty css              */const sl={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},rl={class:"d-flex flex-column justify-center"},ul={class:"text-h4 mb-1"},ml={class:"text-body-1"},cl={class:"d-flex gap-4 align-center flex-wrap"},pl={class:"pe-3"},vl={class:"text-truncate font-weight-medium text-start"},fl={class:"text-truncate font-weight-medium text-start"},gl={class:"text-truncate font-weight-medium text-start"},bl={class:"ps-md-3"},$l={class:"ps-md-3"},yl={class:"d-flex flex-sm-row flex-column flex-wrap justify-space-between gap-x-6 gap-y-4"},Vl={class:"flex-grow-1"},hl={class:"flex-grow-1"},kl={class:"ps-md-3"},Ul={class:"d-flex flex-sm-row flex-column flex-wrap justify-space-between gap-x-6 gap-y-4"},Al={class:"flex-grow-1"},Tl={class:"flex-grow-1"},wl={class:"mt-5"},Cl=xe({__name:"add",setup(_l){const G=[{from:"1900-01-01",to:ve.local().minus({days:1}).toISODate()}],Ue=Ge("common.country"),Le=Object.keys(Ue).map(e=>{var a,m;return{code:e,label:(m=(a=Ue[e])==null?void 0:a.body)==null?void 0:m.static}}).filter(e=>e.label!==void 0),V=p(),K=p(),h=p();let Ae=[],S=[],W={},A={};const T=p();T.value=null;const w=p();w.value=null;const _=p();_.value=null;const E=p([{}]),X=p(),Z=p(),J=p(),q=p(),Q=p(!0),x=p(),ee=p(!0),D=p("delivery"),le=ve.local().toISODate(),ae=ve.local().toISOTime({suppressSeconds:!0,suppressMilliseconds:!0,includeOffset:!1}),oe=p(le),de=p(ae),te=p(),ne=p(),ie=p(),se=p(),B=p(),re=p(le),ue=p(ae),me=p(le),ce=p(ae),pe=p(),R=p(!1),je=()=>{E.value===void 0||E.value===null||(E.value=E.value.filter(e=>{var a;return e.options=(a=e.options)==null?void 0:a.filter(m=>"id"in m&&m.id!==void 0&&m.id!==null),"id"in e&&e.id!==void 0&&e.id!==null}))},Te=()=>{var m,u,f,C,k,r;let e;switch(D.value){case"delivery":e=fe(oe.value,de.value,(u=(m=V.value)==null?void 0:m.timezone)==null?void 0:u.name);break;case"collection":e=fe(re.value,ue.value,(C=(f=V.value)==null?void 0:f.timezone)==null?void 0:C.name);break;case"eat_in":e=fe(me.value,ce.value,(r=(k=V.value)==null?void 0:k.timezone)==null?void 0:r.name);break}const a={first_name:X.value,last_name:Z.value,company_name:J.value,email:x.value,email_marketing:ee.value,phone:q.value,sms_marketing:Q.value};return D.value==="delivery"&&(a.address_1=te.value,a.address_2=ne.value,a.postal_code=se.value,a.city=ie.value,a.country=B.value),{service_type:D.value,table_name:pe.value??void 0,expected_time:e??void 0,customer:a,items:E.value}},M=el(()=>new O.Api.TotalHubriseCalculator().calculateTotals(Te(),O.Api.HubriseCurrencyCode.EUR)),we=()=>{var a;const e=(a=V.value)==null?void 0:a.id;e!=null&&(R.value=!0,je(),H("orderpad/order",{method:"POST",body:{locationId:e,...Te()},onResponseError({response:m}){R.value=!1,L(m)}}).then(m=>{var u;R.value=!1,alert(`Order ${(u=m.order)==null?void 0:u.ref} created!`),window.location.reload()}).catch(m=>{R.value=!1,j(m)}))},Ce=e=>{if(typeof e=="object"&&e!==null)switch(D.value){case"delivery":return`${e.delivery}%`;case"collection":return`${e.collection}%`;case"eat_in":return`${e.eat_in}%`}return""},He=()=>{var a,m,u,f,C,k;if(h.value===void 0||h.value===null)return;const e={};(u=(m=(a=h.value)==null?void 0:a.data)==null?void 0:m.categories)==null||u.forEach(r=>{e[r.id]=r.name}),S=((k=(C=(f=h.value)==null?void 0:f.data)==null?void 0:C.products)==null?void 0:k.map(r=>{var s,b;const g=r.ref??(((s=r.skus)==null?void 0:s.length)===1&&(!Array.isArray(r.skus[0].option_list_ids)||r.skus[0].option_list_ids.length===0)?r.skus[0].ref:null),t=((b=r.skus)==null?void 0:b.length)===1&&(!Array.isArray(r.skus[0].option_list_ids)||r.skus[0].option_list_ids.length===0)?r.skus[0].price:null;return{id:r.id,sku_ref:g,category:e[r.category_id],product_name:r.name,quantity:1,tax_rate:r.tax_rate,price:t,customer_notes:void 0}}).sort((r,g)=>{var t,s;return((t=r.category)==null?void 0:t.localeCompare(g.category??""))||((s=r.name)==null?void 0:s.localeCompare(g.name??""))}))??[],Ae=(S==null?void 0:S.filter(r=>r.sku_ref!==void 0&&r.sku_ref!==null))??[]},Ye=()=>{var a,m,u,f,C,k;if(h.value===void 0||h.value===null)return;const e={};(u=(m=(a=h.value)==null?void 0:a.data)==null?void 0:m.option_lists)==null||u.forEach(r=>{e[r.id]=r}),A={},(k=(C=(f=h.value)==null?void 0:f.data)==null?void 0:C.products)==null||k.forEach(r=>{A[r.id]=[],!(!Array.isArray(r.skus)||r.skus.length===0||!Array.isArray(r.skus[0].option_list_ids)||r.skus[0].option_list_ids.length===0)&&(r.skus.forEach(g=>{if(Array.isArray(g.option_list_ids)&&g.option_list_ids.length>0)g.option_list_ids.forEach(t=>{const s=e[t];s!==void 0&&(!Array.isArray(s.options)||s.options.length===0||s.options.forEach(b=>{const Me=O.Api.HubrisePriceUtil.sum([g.price??null,b.price??null]);A[r.id].push({id:`${g.id}-${s.id}-${b.id}`,ref:b.ref??null,option_list_name:s.name,name:b.name,quantity:1,price:Me})}))});else{const t=g.price??null;A[r.id].push({id:g.id,ref:g.ref??null,name:g.name,quantity:1,price:t})}}),A[r.id].sort((g,t)=>{var s;return(s=g.name)==null?void 0:s.localeCompare(t.name??"")}))}),W={},Object.keys(A).forEach(r=>{var g;W[r]=((g=A[r])==null?void 0:g.filter(t=>t.ref!==void 0&&t.ref!==null))??[]})},_e=()=>{E.value.push({})},ze=e=>{const a=E.value.findIndex(m=>m===e);a>=0&&E.value.splice(a,1)},Ee=e=>{Array.isArray(e.options)||(e.options=[]),e.options.push({})},Be=(e,a)=>{const m=e.options.findIndex(u=>u===a);m>=0&&e.options.splice(m,1)},Pe=(e,a)=>{const m=S==null?void 0:S.find(u=>u.id===e);m!==void 0&&(O.Util.ObjectUtil.update(a,m),Array.isArray(A[e])&&A[e].length>0&&Ee(a))},De=(e,a,m)=>{var f;const u=(f=A[e])==null?void 0:f.find(C=>C.id===a);u!==void 0&&O.Util.ObjectUtil.update(m,u)},Se=e=>{var a;[void 0,null,""].includes(e)||(K.value=(a=w.value)==null?void 0:a.find(m=>m.id===e))},Ie=e=>{[void 0,null,""].includes(e)||H(`orderpad/catalog?catalogId=${e}`,{method:"GET",onResponseError({response:a}){h.value=void 0,L(a)}}).then(a=>{h.value=a.catalog,He(),Ye()}).catch(a=>{h.value=void 0,j(a)})},Ne=e=>{var a,m;[void 0,null,""].includes(e)||(V.value=(a=T.value)==null?void 0:a.find(u=>u.id===e),typeof((m=V.value)==null?void 0:m.country)=="string"&&(B.value=V.value.country),w.value=void 0,H(`orderpad/customers/list?locationId=${e}`,{method:"GET",onResponseError({response:u}){w.value=[],L(u)}}).then(u=>{var f;w.value=u.lists,((f=w.value)==null?void 0:f.length)===1&&Se(w.value[0].id)}).catch(u=>{w.value=[],j(u)}),_.value=void 0,H(`orderpad/catalogs?locationId=${e}`,{method:"GET",onResponseError({response:u}){_.value=[],L(u)}}).then(u=>{var f;_.value=u.catalogs,((f=_.value)==null?void 0:f.length)===1&&Ie(_.value[0].id)}).catch(u=>{_.value=[],j(u)}))},Oe=e=>{const a=e.target;a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.isContentEditable||(e.key==="+"||e.key==="Add"||e.code==="NumpadAdd"||e.shiftKey&&(e.key==="="||e.code==="Equal"))&&_e()};return ll(()=>{window.addEventListener("keydown",Oe),T.value=void 0,H("orderpad/locations",{method:"GET",onResponseError({response:e}){T.value=[],L(e)}}).then(e=>{var a;T.value=e.locations,((a=T.value)==null?void 0:a.length)===1&&Ne(T.value[0].id)}).catch(e=>{T.value=[],j(e)})}),al(()=>{window.removeEventListener("keydown",Oe)}),(e,a)=>{const m=Qe,u=Je,f=Ze,C=Xe,k=We,r=ol("IconBtn"),g=Ke;return y(),Y("div",null,[$("div",sl,[$("div",rl,[$("h4",ul,c(("$t"in e?e.$t:o(n))("page.order.add.title")),1),$("div",ml,c(("$t"in e?e.$t:o(n))("page.order.add.subtitle")),1)]),$("div",cl,[T.value!==null?(y(),P(ge,{key:0,disabled:T.value===void 0,items:T.value,label:("$t"in e?e.$t:o(n))("page.order.add.button.location.label"),loading:T.value===void 0,placeholder:("$t"in e?e.$t:o(n))("page.order.add.button.location.placeholder"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData",style:{width:"200px"},variant:"underlined","onUpdate:modelValue":Ne},null,8,["disabled","items","label","loading","placeholder"])):N("",!0),w.value!==null?(y(),P(ge,{key:1,disabled:w.value===void 0,items:w.value,label:("$t"in e?e.$t:o(n))("page.order.add.button.customerList.label"),loading:w.value===void 0,placeholder:("$t"in e?e.$t:o(n))("page.order.add.button.customerList.placeholder"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData",style:{width:"200px"},variant:"underlined","onUpdate:modelValue":Se},null,8,["disabled","items","label","loading","placeholder"])):N("",!0),_.value!==null?(y(),P(ge,{key:2,disabled:_.value===void 0,items:_.value,label:("$t"in e?e.$t:o(n))("page.order.add.button.catalog.label"),loading:_.value===void 0,placeholder:("$t"in e?e.$t:o(n))("page.order.add.button.catalog.placeholder"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData",style:{width:"200px"},variant:"underlined","onUpdate:modelValue":Ie},null,8,["disabled","items","label","loading","placeholder"])):N("",!0),l(z,{color:"secondary",onclick:"window.location.reload()",variant:"tonal"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.button.discard")),1)]),_:1}),l(z,{disabled:!q.value||E.value.length===0,loading:R.value,onClick:we},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.button.create")),1)]),_:1},8,["disabled","loading"])])]),l(U,{dense:""},{default:d(()=>[l(i,{cols:"12",md:"4"},{default:d(()=>[l($e,{disabled:!V.value||!K.value,loading:!V.value||!K.value,class:"mb-6 fill-height"},{default:d(()=>[l(ye,null,{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.customer.title")),1)]),_:1}),l(Ve,{class:"pb-0"},{default:d(()=>[l(U,{dense:""},{default:d(()=>[l(i,{cols:"12"},{default:d(()=>[l(m,{modelValue:q.value,"onUpdate:modelValue":a[0]||(a[0]=t=>q.value=t),items:[],label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.phone.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.customer.phone.placeholder")},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(Fe,{modelValue:Q.value,"onUpdate:modelValue":a[1]||(a[1]=t=>Q.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.smsMarketing.label")},null,8,["modelValue","label"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(m,{modelValue:x.value,"onUpdate:modelValue":a[2]||(a[2]=t=>x.value=t),items:[],label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.email.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.customer.email.placeholder")},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(Fe,{modelValue:ee.value,"onUpdate:modelValue":a[3]||(a[3]=t=>ee.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.emailMarketing.label")},null,8,["modelValue","label"])]),_:1}),l(i,{cols:"12",md:"6"},{default:d(()=>[l(u,{modelValue:X.value,"onUpdate:modelValue":a[4]||(a[4]=t=>X.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.firstName.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.customer.firstName.placeholder"),class:"mb-3"},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12",md:"6"},{default:d(()=>[l(u,{modelValue:Z.value,"onUpdate:modelValue":a[5]||(a[5]=t=>Z.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.lastName.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.customer.lastName.placeholder"),class:"mb-3"},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(u,{modelValue:J.value,"onUpdate:modelValue":a[6]||(a[6]=t=>J.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.company.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.customer.company.placeholder"),class:"mb-3"},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1}),l(i,{cols:"12",md:"8"},{default:d(()=>[l($e,{disabled:!V.value,loading:!V.value,class:"action-card mb-6 fill-height"},{default:d(()=>[l(ye,null,{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.action.title")),1)]),_:1}),l(Ve,{class:"pb-0"},{default:d(()=>[l(U,{dense:""},{default:d(()=>[l(i,{cols:"12",md:"4"},{default:d(()=>[$("div",pl,[l(dl,{modelValue:D.value,"onUpdate:modelValue":a[7]||(a[7]=t=>D.value=t),class:"v-tabs-pill",color:"primary",direction:"vertical"},{default:d(()=>[(y(),P(he,{key:0,value:"delivery"},{default:d(()=>[l(F,{class:"me-2",icon:"mdi-moped"}),$("div",vl,c(("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.title")),1)]),_:1})),(y(),P(he,{key:1,value:"collection"},{default:d(()=>[l(F,{class:"me-2",icon:"bx-walk"}),$("div",fl,c(("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.title")),1)]),_:1})),(y(),P(he,{key:2,value:"eat_in"},{default:d(()=>[l(F,{class:"me-2",icon:"ic-baseline-table-bar"}),$("div",gl,c(("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.title")),1)]),_:1}))]),_:1},8,["modelValue"])])]),_:1}),l(i,{cols:"12",md:"8"},{default:d(()=>[l(tl,{modelValue:D.value,"onUpdate:modelValue":a[20]||(a[20]=t=>D.value=t),touch:!1,class:"w-100"},{default:d(()=>[l(ke,{value:"delivery"},{default:d(()=>[$("div",bl,[l(U,null,{default:d(()=>[l(i,{cols:"6"},{default:d(()=>[l(f,{modelValue:oe.value,"onUpdate:modelValue":a[8]||(a[8]=t=>oe.value=t),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",disable:G},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.date.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.date.placeholder")},null,8,["modelValue","config","label","placeholder"])]),_:1}),l(i,{cols:"6"},{default:d(()=>[l(f,{modelValue:de.value,"onUpdate:modelValue":a[9]||(a[9]=t=>de.value=t),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.time.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.time.placeholder")},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(u,{modelValue:te.value,"onUpdate:modelValue":a[10]||(a[10]=t=>te.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.address1.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.address1.placeholder")},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(u,{modelValue:ne.value,"onUpdate:modelValue":a[11]||(a[11]=t=>ne.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.address2.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.address2.placeholder")},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12",md:"6"},{default:d(()=>[l(u,{modelValue:ie.value,"onUpdate:modelValue":a[12]||(a[12]=t=>ie.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.city.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.city.placeholder")},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12",md:"6"},{default:d(()=>[l(u,{modelValue:se.value,"onUpdate:modelValue":a[13]||(a[13]=t=>se.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.zipcode.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.zipcode.placeholder"),type:"number"},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(C,{modelValue:B.value,"onUpdate:modelValue":a[14]||(a[14]=t=>B.value=t),items:o(Le),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.country.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.country.placeholder"),"item-title":"label","item-value":"code"},null,8,["modelValue","items","label","placeholder"])]),_:1})]),_:1})])]),_:1}),l(ke,{value:"collection"},{default:d(()=>[$("div",$l,[$("div",yl,[$("div",Vl,[l(f,{modelValue:re.value,"onUpdate:modelValue":a[15]||(a[15]=t=>re.value=t),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",disable:G},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.date.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.date.placeholder")},null,8,["modelValue","config","label","placeholder"])]),$("div",hl,[l(f,{modelValue:ue.value,"onUpdate:modelValue":a[16]||(a[16]=t=>ue.value=t),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.time.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.time.placeholder")},null,8,["modelValue","label","placeholder"])])])])]),_:1}),l(ke,{value:"eat_in"},{default:d(()=>[$("div",kl,[$("div",Ul,[$("div",Al,[l(f,{modelValue:me.value,"onUpdate:modelValue":a[17]||(a[17]=t=>me.value=t),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",disable:G},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.date.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.date.placeholder")},null,8,["modelValue","config","label","placeholder"])]),$("div",Tl,[l(f,{modelValue:ce.value,"onUpdate:modelValue":a[18]||(a[18]=t=>ce.value=t),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.time.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.time.placeholder")},null,8,["modelValue","label","placeholder"])])]),$("div",wl,[l(nl,{modelValue:pe.value,"onUpdate:modelValue":a[19]||(a[19]=t=>pe.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.table.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.table.placeholder"),variant:"underlined"},null,8,["modelValue","label","placeholder"])])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1}),l(i,{class:"pt-0 mt-0",cols:"12",md:"12"},{default:d(()=>[l($e,{disabled:!V.value||!h.value,loading:!V.value||!h.value},{default:d(()=>[l(ye,null,{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.title")),1)]),_:1}),l(Ve,null,{default:d(()=>[l(U,{dense:""},{default:d(()=>[l(i,{cols:"2",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.reference")),1)]),_:1}),l(i,{cols:"2",md:"4"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.name")),1)]),_:1}),l(i,{cols:"2",md:"1"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.quantity")),1)]),_:1}),l(i,{cols:"2",md:"1"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.vat")),1)]),_:1}),l(i,{cols:"1",md:"1"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.price")),1)]),_:1}),l(i,{class:"text-center",cols:"2",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.subtotal")),1)]),_:1}),l(i,{cols:"1",md:"1"})]),_:1}),(y(!0),Y(be,null,Re(E.value,t=>(y(),Y(be,{key:t.id},[l(U,{dense:""},{default:d(()=>[l(i,{cols:"4",md:"2"},{default:d(()=>[t.sku_ref!==null?(y(),P(k,{key:0,modelValue:t.sku_ref,"onUpdate:modelValue":[s=>t.sku_ref=s,s=>Pe(s,t)],items:o(Ae),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.item.reference"),"item-title":"sku_ref","item-value":"id","no-data-text":"common.component.noData"},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])):N("",!0)]),_:2},1024),l(i,{cols:"6",md:"4"},{default:d(()=>[l(k,{modelValue:t.product_name,"onUpdate:modelValue":[s=>t.product_name=s,s=>Pe(s,t)],items:o(S),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.item.name"),"item-title":"product_name","item-value":"id","no-data-text":"common.component.noData"},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])]),_:2},1024),l(i,{cols:"2",md:"1"},{default:d(()=>[l(u,{modelValue:t.quantity,"onUpdate:modelValue":s=>t.quantity=s,clearable:!1,min:"1",placeholder:"1",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(i,{class:"align-self-end",cols:"3",md:"1"},{default:d(()=>[v(c(Ce(t.tax_rate)),1)]),_:2},1024),l(i,{class:"align-self-end",cols:"3",md:"1"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(t.price)),1)]),_:2},1024),l(i,{class:"align-self-end text-center",cols:"3",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(O.Api).HubrisePriceUtil.multiply(t.price,t.quantity))),1)]),_:2},1024),l(i,{class:"px-0",cols:"3",md:"1"},{default:d(()=>[l(r,{"x-small":"",onClick:s=>t.customer_notes=t.customer_notes===void 0?null:void 0},{default:d(()=>[l(F,{icon:"bx-edit"})]),_:2},1032,["onClick"]),l(r,{onClick:s=>ze(t)},{default:d(()=>[l(F,{icon:"bx-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),(y(!0),Y(be,null,Re(t.options,s=>(y(),Y("div",{key:s.ref},[l(U,{dense:""},{default:d(()=>[l(i,{class:"d-flex align-self-end",cols:"4",md:"2"},{default:d(()=>[l(qe),s.ref!==null?(y(),P(k,{key:0,modelValue:s.ref,"onUpdate:modelValue":[b=>s.ref=b,b=>De(t.id,b,s)],items:o(W)[t.id],placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.item.reference"),"item-title":"ref","item-value":"id","no-data-text":"common.component.noData"},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])):N("",!0)]),_:2},1024),l(i,{class:"d-flex align-self-end",cols:"6",md:"4"},{default:d(()=>[l(qe),l(k,{modelValue:s.name,"onUpdate:modelValue":[b=>s.name=b,b=>De(t.id,b,s)],items:o(A)[t.id],placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.item.name"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData"},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])]),_:2},1024),l(i,{class:"d-flex align-self-end",cols:"2",md:"1"},{default:d(()=>[l(u,{modelValue:s.quantity,"onUpdate:modelValue":b=>s.quantity=b,clearable:!1,min:"1",placeholder:"1",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(i,{class:"align-self-end",cols:"3",md:"1"},{default:d(()=>[v(c(Ce(t.tax_rate)),1)]),_:2},1024),l(i,{class:"align-self-end",cols:"3",md:"1"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(s.price)),1)]),_:2},1024),l(i,{class:"align-self-end text-center",cols:"3",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(O.Api).HubrisePriceUtil.multiply(s.price,s.quantity))),1)]),_:2},1024),l(i,{cols:"3",md:"1"},{default:d(()=>[l(r,{onClick:b=>Be(t,s)},{default:d(()=>[l(F,{icon:"bx-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),l(U,{dense:""},{default:d(()=>[l(i,{cols:"0",md:"2"}),l(i,{cols:"12",md:"5"},{default:d(()=>{var s;return[((s=o(A)[t.id])==null?void 0:s.length)>0?(y(),P(z,{key:0,class:"mt-6",color:"secondary","prepend-icon":"bx-plus",size:"x-small",onClick:b=>Ee(t)},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.button.add.itemOption")),1)]),_:2},1032,["onClick"])):N("",!0)]}),_:2},1024),l(i,{cols:"12",md:"4"},{default:d(()=>[t.customer_notes!==void 0?(y(),P(g,{key:0,modelValue:t.customer_notes,"onUpdate:modelValue":s=>t.customer_notes=s,"auto-grow":"",placeholder:"Customer notes",rows:"1"},null,8,["modelValue","onUpdate:modelValue"])):N("",!0)]),_:2},1024),l(i,{cols:"0",md:"1"})]),_:2},1024)],64))),128)),l(z,{class:"mt-6",color:"secondary","prepend-icon":"bx-plus",size:"small",onClick:_e},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.button.add.item")),1)]),_:1}),l(U,{dense:""},{default:d(()=>[l(i,{cols:"0",md:"7"}),l(i,{cols:"6",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.subtotal")),1)]),_:1}),l(i,{class:"text-center",cols:"6",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(M).subtotal)),1)]),_:1}),l(i,{cols:"0",md:"1"})]),_:1}),D.value==="delivery"?(y(),P(U,{key:0,dense:""},{default:d(()=>[l(i,{cols:"0",md:"7"}),l(i,{cols:"6",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.deliveryFee")),1)]),_:1}),l(i,{class:"text-center",cols:"6",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(M).deliveryFee)),1)]),_:1}),l(i,{cols:"0",md:"1"})]),_:1})):N("",!0),l(U,{dense:""},{default:d(()=>[l(i,{cols:"0",md:"7"}),l(i,{cols:"6",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.minimumOrderFee")),1)]),_:1}),l(i,{class:"text-center",cols:"6",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(M).minimumOrderFee)),1)]),_:1}),l(i,{cols:"0",md:"1"})]),_:1}),l(U,{dense:""},{default:d(()=>[l(i,{cols:"0",md:"7"}),l(i,{cols:"6",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.total")),1)]),_:1}),l(i,{class:"text-center",cols:"6",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(M).total)),1)]),_:1}),l(i,{cols:"0",md:"1"})]),_:1}),l(U,{dense:""},{default:d(()=>[l(i,{cols:"0",md:"7"}),l(i,{cols:"12",md:"4"},{default:d(()=>[l(z,{disabled:!q.value||E.value.length===0,loading:R.value,class:"w-100",onClick:we},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.button.create")),1)]),_:1},8,["disabled","loading"])]),_:1}),l(i,{cols:"0",md:"1"})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1})]),_:1})])}}}),Va=il(Cl,[["__scopeId","data-v-a1035a21"]]);export{Va as default};
