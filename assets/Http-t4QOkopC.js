import{$ as a}from"./TranslationUtil-CFKlA-R8.js";import{cR as l,cS as d,cT as m,b5 as i}from"./index-VpTvokrT.js";const c=()=>typeof window.navigator!="object"||typeof window.navigator.onLine!="boolean"?!0:window.navigator.onLine,u=()=>typeof document.hidden=="boolean"?document.hidden:typeof document.msHidden=="boolean"?document.msHidden:typeof document.webkitHidden=="boolean"?document.webkitHidden:!1;function w(t){return{all:t=t||new Map,on:function(e,n){var s=t.get(e);s?s.push(n):t.set(e,[n])},off:function(e,n){var s=t.get(e);s&&(n?s.splice(s.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var s=t.get(e);s&&s.slice().map(function(o){o(n)}),(s=t.get("*"))&&s.slice().map(function(o){o(e,n)})}}}class f{static info(e,n){l(s=>{s.setExtra("context",Object.assign({isOnline:c(),isHidden:u()},n)),d(e)})}static exception(e){if(u()&&e.message!==void 0&&e.message!==null&&typeof e.message=="string"&&e.message.includes("timeout")||e.message!==void 0&&e.message!==null&&typeof e.message=="string"&&e.message.includes("status code 401"))return!1;l(n=>{n.setExtra("context",{isOnline:c(),isHidden:u()}),m(e)})}}const r=async(t,e)=>!c()||typeof t.message=="string"&&t.message.includes("Network Error")?a("common.error.offline"):typeof t.message=="string"&&t.message.includes("timeout")?a("common.error.timeout"):(f.exception(t),a("common.error.default")),y=async(t,e)=>{t.status===401&&(i("jwt",{domain:".apps.onylab.com"}).value=null,i("accessToken").value=null,i("userData").value=null,i("userAbilityRules").value=null,window.location.href="/");const n=new Error(t._data.message??"Request failed");return r(n)};export{r as a,y as h,w as m};
