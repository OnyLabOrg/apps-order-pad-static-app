import{D as ve,$ as Ke,c as O,h as L,a as j,b as fe,d as n,e as I}from"./Http-DA1JP5Uo.js";import{_ as We}from"./AppTextarea.vue_vue_type_script_setup_true_lang-DpalLzo5.js";import{_ as Xe}from"./AppAutocomplete.vue_vue_type_script_setup_true_lang-Dav5Vfrq.js";import{_ as Ze}from"./AppSelect.vue_vue_type_script_setup_true_lang-DnurivOU.js";import{_ as Je}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-X194uunV.js";import{_ as Qe}from"./AppTextField.vue_vue_type_script_setup_true_lang-DowqXnch.js";import{_ as xe}from"./AppCombobox.vue_vue_type_script_setup_true_lang-C69TUSw1.js";import{$ as z}from"./api-D46nGrfz.js";import{V as be}from"./VSelect-DQXgcFY9.js";import{d as el,r as p,X as ll,G as al,ai as ol,c as H,e as b,b as l,v as c,m as o,g as P,l as N,f as d,ah as Y,a as dl,o as y,t as v,x as Re,$ as F,F as $e,i as Fe}from"./index-BJW83l6G.js";import{V as U,a as i}from"./VRow-BFY9_Zhi.js";import{V as ge,c as ye}from"./VCard-DQ_WvmXD.js";import{V as he}from"./VCardText-CrwfFOSG.js";import{V as qe}from"./VCheckbox-g6AM6K2o.js";import{a as tl,V as Ve}from"./VTabs-DwGbImT5.js";import{V as nl,a as ke}from"./VWindowItem-jU75R2Dd.js";import{V as il}from"./VTextField-CwVdIcGJ.js";import{V as Le}from"./VSpacer-D-hXG-3r.js";import{_ as sl}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./form-DBAYBY5T.js";/* empty css                   */import"./VCounter-x37juHw5.js";import"./VImg-aM1MR15U.js";import"./VField-VL6mpWTD.js";import"./easing-Bybner-F.js";import"./VInput-CpqVz0Ah.js";import"./forwardRefs-C-GTDzx5.js";import"./filter-DiUg5dpA.js";import"./VList-DAfapEQQ.js";import"./ssrBoot-ICEBasVi.js";import"./VAvatar-CWBKstAK.js";import"./VDivider-H3EjRnGv.js";import"./VMenu-DHcLUNos.js";import"./VOverlay-BU2OAJE6.js";import"./delay-D2mkRUXl.js";import"./lazy-BWazbN8F.js";import"./scopeId-C4KGj5Xq.js";import"./dialog-transition-DjyuLKqS.js";import"./VCheckboxBtn-sVOMa6DI.js";import"./VSelectionControl-C_Hs44dd.js";import"./VChip-nPXEUZPY.js";import"./VSlideGroup-ot3flHXD.js";import"./index-CvOPxmL5.js";/* empty css              */const rl={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},ul={class:"d-flex flex-column justify-center"},ml={class:"text-h4 mb-1"},cl={class:"text-body-1"},pl={class:"d-flex gap-4 align-center flex-wrap"},vl={class:"pe-3"},fl={class:"text-truncate font-weight-medium text-start"},bl={class:"text-truncate font-weight-medium text-start"},$l={class:"text-truncate font-weight-medium text-start"},gl={class:"ps-md-3"},yl={class:"text-h5 mb-3"},hl={class:"ps-md-3"},Vl={class:"mb-2 text-h6"},kl={class:"d-flex flex-sm-row flex-column flex-wrap justify-space-between gap-x-6 gap-y-4"},Ul={class:"flex-grow-1"},Al={class:"flex-grow-1"},wl={class:"ps-md-3"},Tl={class:"text-h5 mb-3"},Cl={class:"d-flex flex-sm-row flex-column flex-wrap justify-space-between gap-x-6 gap-y-4"},El={class:"flex-grow-1"},_l={class:"flex-grow-1"},Pl={class:"mt-3"},Dl=el({__name:"add",setup(Sl){const G=[{from:"1900-01-01",to:ve.local().minus({days:1}).toISODate()}],Ue=Ke("common.country"),je=Object.keys(Ue).map(e=>{var a,m;return{code:e,label:(m=(a=Ue[e])==null?void 0:a.body)==null?void 0:m.static}}).filter(e=>e.label!==void 0),h=p(),K=p(),V=p();let Ae=[],S=[],W={},A={};const w=p();w.value=null;const T=p();T.value=null;const E=p();E.value=null;const _=p([{}]),X=p(),Z=p(),J=p(),q=p(),Q=p(!0),x=p(),ee=p(!0),D=p("delivery"),le=ve.local().toISODate(),ae=ve.local().toISOTime({suppressSeconds:!0,suppressMilliseconds:!0,includeOffset:!1}),oe=p(le),de=p(ae),te=p(),ne=p(),ie=p(),se=p(),B=p(),re=p(le),ue=p(ae),me=p(le),ce=p(ae),pe=p(),R=p(!1),ze=()=>{_.value===void 0||_.value===null||(_.value=_.value.filter(e=>{var a;return e.options=(a=e.options)==null?void 0:a.filter(m=>"id"in m&&m.id!==void 0&&m.id!==null),"id"in e&&e.id!==void 0&&e.id!==null}))},we=()=>{var m,u,f,C,k,r;let e;switch(D.value){case"delivery":e=fe(oe.value,de.value,(u=(m=h.value)==null?void 0:m.timezone)==null?void 0:u.name);break;case"collection":e=fe(re.value,ue.value,(C=(f=h.value)==null?void 0:f.timezone)==null?void 0:C.name);break;case"eat_in":e=fe(me.value,ce.value,(r=(k=h.value)==null?void 0:k.timezone)==null?void 0:r.name);break}const a={first_name:X.value,last_name:Z.value,company_name:J.value,email:x.value,email_marketing:ee.value,phone:q.value,sms_marketing:Q.value};return D.value==="delivery"&&(a.address_1=te.value,a.address_2=ne.value,a.postal_code=se.value,a.city=ie.value,a.country=B.value),{service_type:D.value,table_name:pe.value??void 0,expected_time:e??void 0,customer:a,items:_.value}},M=ll(()=>new O.Api.TotalHubriseCalculator().calculateTotals(we(),O.Api.HubriseCurrencyCode.EUR)),Te=()=>{var a;const e=(a=h.value)==null?void 0:a.id;e!=null&&(R.value=!0,ze(),z("orderpad/order",{method:"POST",body:{locationId:e,...we()},onResponseError({response:m}){R.value=!1,L(m)}}).then(m=>{var u;R.value=!1,alert(`Order ${(u=m.order)==null?void 0:u.ref} created!`),window.location.reload()}).catch(m=>{R.value=!1,j(m)}))},Ce=e=>{if(typeof e=="object"&&e!==null)switch(D.value){case"delivery":return`${e.delivery}%`;case"collection":return`${e.collection}%`;case"eat_in":return`${e.eat_in}%`}return""},He=()=>{var a,m,u,f,C,k;if(V.value===void 0||V.value===null)return;const e={};(u=(m=(a=V.value)==null?void 0:a.data)==null?void 0:m.categories)==null||u.forEach(r=>{e[r.id]=r.name}),S=((k=(C=(f=V.value)==null?void 0:f.data)==null?void 0:C.products)==null?void 0:k.map(r=>{var s,g;const $=r.ref??(((s=r.skus)==null?void 0:s.length)===1&&(!Array.isArray(r.skus[0].option_list_ids)||r.skus[0].option_list_ids.length===0)?r.skus[0].ref:null),t=((g=r.skus)==null?void 0:g.length)===1&&(!Array.isArray(r.skus[0].option_list_ids)||r.skus[0].option_list_ids.length===0)?r.skus[0].price:null;return{id:r.id,sku_ref:$,category:e[r.category_id],product_name:r.name,quantity:1,tax_rate:r.tax_rate,price:t,customer_notes:void 0}}).sort((r,$)=>{var t,s;return((t=r.category)==null?void 0:t.localeCompare($.category??""))||((s=r.name)==null?void 0:s.localeCompare($.name??""))}))??[],Ae=(S==null?void 0:S.filter(r=>r.sku_ref!==void 0&&r.sku_ref!==null))??[]},Ye=()=>{var a,m,u,f,C,k;if(V.value===void 0||V.value===null)return;const e={};(u=(m=(a=V.value)==null?void 0:a.data)==null?void 0:m.option_lists)==null||u.forEach(r=>{e[r.id]=r}),A={},(k=(C=(f=V.value)==null?void 0:f.data)==null?void 0:C.products)==null||k.forEach(r=>{A[r.id]=[],!(!Array.isArray(r.skus)||r.skus.length===0||!Array.isArray(r.skus[0].option_list_ids)||r.skus[0].option_list_ids.length===0)&&(r.skus.forEach($=>{if(Array.isArray($.option_list_ids)&&$.option_list_ids.length>0)$.option_list_ids.forEach(t=>{const s=e[t];s!==void 0&&(!Array.isArray(s.options)||s.options.length===0||s.options.forEach(g=>{const Ge=O.Api.HubrisePriceUtil.sum([$.price??null,g.price??null]);A[r.id].push({id:`${$.id}-${s.id}-${g.id}`,ref:g.ref??null,option_list_name:s.name,name:g.name,quantity:1,price:Ge})}))});else{const t=$.price??null;A[r.id].push({id:$.id,ref:$.ref??null,name:$.name,quantity:1,price:t})}}),A[r.id].sort(($,t)=>{var s;return(s=$.name)==null?void 0:s.localeCompare(t.name??"")}))}),W={},Object.keys(A).forEach(r=>{var $;W[r]=(($=A[r])==null?void 0:$.filter(t=>t.ref!==void 0&&t.ref!==null))??[]})},Ee=()=>{_.value.push({})},Be=e=>{const a=_.value.findIndex(m=>m===e);a>=0&&_.value.splice(a,1)},_e=e=>{Array.isArray(e.options)||(e.options=[]),e.options.push({})},Me=(e,a)=>{const m=e.options.findIndex(u=>u===a);m>=0&&e.options.splice(m,1)},Pe=(e,a)=>{const m=S==null?void 0:S.find(u=>u.id===e);m!==void 0&&(O.Util.ObjectUtil.update(a,m),Array.isArray(A[e])&&A[e].length>0&&_e(a))},De=(e,a,m)=>{var f;const u=(f=A[e])==null?void 0:f.find(C=>C.id===a);u!==void 0&&O.Util.ObjectUtil.update(m,u)},Se=e=>{var a;[void 0,null,""].includes(e)||(K.value=(a=T.value)==null?void 0:a.find(m=>m.id===e))},Ie=e=>{[void 0,null,""].includes(e)||z(`orderpad/catalog?catalogId=${e}`,{method:"GET",onResponseError({response:a}){V.value=void 0,L(a)}}).then(a=>{V.value=a.catalog,He(),Ye()}).catch(a=>{V.value=void 0,j(a)})},Ne=e=>{var a,m;[void 0,null,""].includes(e)||(h.value=(a=w.value)==null?void 0:a.find(u=>u.id===e),typeof((m=h.value)==null?void 0:m.country)=="string"&&(B.value=h.value.country),T.value=void 0,z(`orderpad/customers/list?locationId=${e}`,{method:"GET",onResponseError({response:u}){T.value=[],L(u)}}).then(u=>{var f;T.value=u.lists,((f=T.value)==null?void 0:f.length)===1&&Se(T.value[0].id)}).catch(u=>{T.value=[],j(u)}),E.value=void 0,z(`orderpad/catalogs?locationId=${e}`,{method:"GET",onResponseError({response:u}){E.value=[],L(u)}}).then(u=>{var f;E.value=u.catalogs,((f=E.value)==null?void 0:f.length)===1&&Ie(E.value[0].id)}).catch(u=>{E.value=[],j(u)}))},Oe=e=>{const a=e.target;a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.isContentEditable||(e.key==="+"||e.key==="Add"||e.code==="NumpadAdd"||e.shiftKey&&(e.key==="="||e.code==="Equal"))&&Ee()};return al(()=>{window.addEventListener("keydown",Oe),w.value=void 0,z("orderpad/locations",{method:"GET",onResponseError({response:e}){w.value=[],L(e)}}).then(e=>{var a;w.value=e.locations,((a=w.value)==null?void 0:a.length)===1&&Ne(w.value[0].id)}).catch(e=>{w.value=[],j(e)})}),ol(()=>{window.removeEventListener("keydown",Oe)}),(e,a)=>{const m=xe,u=Qe,f=Je,C=Ze,k=Xe,r=dl("IconBtn"),$=We;return y(),H("div",null,[b("div",rl,[b("div",ul,[b("h4",ml,c(("$t"in e?e.$t:o(n))("page.order.add.title")),1),b("div",cl,c(("$t"in e?e.$t:o(n))("page.order.add.subtitle")),1)]),b("div",pl,[w.value!==null?(y(),P(be,{key:0,disabled:w.value===void 0,items:w.value,label:("$t"in e?e.$t:o(n))("page.order.add.button.location.label"),loading:w.value===void 0,placeholder:("$t"in e?e.$t:o(n))("page.order.add.button.location.placeholder"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData",style:{width:"200px"},variant:"underlined","onUpdate:modelValue":Ne},null,8,["disabled","items","label","loading","placeholder"])):N("",!0),T.value!==null?(y(),P(be,{key:1,disabled:T.value===void 0,items:T.value,label:("$t"in e?e.$t:o(n))("page.order.add.button.customerList.label"),loading:T.value===void 0,placeholder:("$t"in e?e.$t:o(n))("page.order.add.button.customerList.placeholder"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData",style:{width:"200px"},variant:"underlined","onUpdate:modelValue":Se},null,8,["disabled","items","label","loading","placeholder"])):N("",!0),E.value!==null?(y(),P(be,{key:2,disabled:E.value===void 0,items:E.value,label:("$t"in e?e.$t:o(n))("page.order.add.button.catalog.label"),loading:E.value===void 0,placeholder:("$t"in e?e.$t:o(n))("page.order.add.button.catalog.placeholder"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData",style:{width:"200px"},variant:"underlined","onUpdate:modelValue":Ie},null,8,["disabled","items","label","loading","placeholder"])):N("",!0),l(Y,{color:"secondary",onclick:"window.location.reload()",variant:"tonal"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.button.discard")),1)]),_:1}),l(Y,{disabled:!q.value||_.value.length===0,loading:R.value,onClick:Te},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.button.create")),1)]),_:1},8,["disabled","loading"])])]),l(U,{dense:""},{default:d(()=>[l(i,{cols:"12",md:"4"},{default:d(()=>[l(ge,{disabled:!h.value||!K.value,loading:!h.value||!K.value,class:"mb-6"},{default:d(()=>[l(ye,null,{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.customer.title")),1)]),_:1}),l(he,null,{default:d(()=>[l(U,{dense:""},{default:d(()=>[l(i,{cols:"12"},{default:d(()=>[l(m,{modelValue:q.value,"onUpdate:modelValue":a[0]||(a[0]=t=>q.value=t),items:["+33606060606"],label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.phone.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.customer.phone.placeholder")},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(qe,{modelValue:Q.value,"onUpdate:modelValue":a[1]||(a[1]=t=>Q.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.smsMarketing.label")},null,8,["modelValue","label"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(m,{modelValue:x.value,"onUpdate:modelValue":a[2]||(a[2]=t=>x.value=t),items:["test@onylab.com"],label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.email.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.customer.email.placeholder")},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(qe,{modelValue:ee.value,"onUpdate:modelValue":a[3]||(a[3]=t=>ee.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.emailMarketing.label")},null,8,["modelValue","label"])]),_:1}),l(i,{cols:"12",md:"6"},{default:d(()=>[l(u,{modelValue:X.value,"onUpdate:modelValue":a[4]||(a[4]=t=>X.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.firstName.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.customer.firstName.placeholder"),class:"mb-3"},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12",md:"6"},{default:d(()=>[l(u,{modelValue:Z.value,"onUpdate:modelValue":a[5]||(a[5]=t=>Z.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.lastName.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.customer.lastName.placeholder"),class:"mb-3"},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(u,{modelValue:J.value,"onUpdate:modelValue":a[6]||(a[6]=t=>J.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.company.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.customer.company.placeholder"),class:"mb-3"},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1}),l(i,{cols:"12",md:"8"},{default:d(()=>[l(ge,{disabled:!h.value,loading:!h.value,class:"action-card"},{default:d(()=>[l(ye,null,{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.action.title")),1)]),_:1}),l(he,null,{default:d(()=>[l(U,{dense:""},{default:d(()=>[l(i,{class:Re(e.$vuetify.display.mdAndUp?"border-e":"border-b pb-6"),cols:"12",md:"4"},{default:d(()=>[b("div",vl,[l(tl,{modelValue:D.value,"onUpdate:modelValue":a[7]||(a[7]=t=>D.value=t),class:"v-tabs-pill",color:"primary",direction:"vertical"},{default:d(()=>[(y(),P(Ve,{key:0,value:"delivery"},{default:d(()=>[l(F,{class:"me-2",icon:"mdi-moped"}),b("div",fl,c(("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.title")),1)]),_:1})),(y(),P(Ve,{key:1,value:"collection"},{default:d(()=>[l(F,{class:"me-2",icon:"bx-walk"}),b("div",bl,c(("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.title")),1)]),_:1})),(y(),P(Ve,{key:2,value:"eat_in"},{default:d(()=>[l(F,{class:"me-2",icon:"ic-baseline-table-bar"}),b("div",$l,c(("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.title")),1)]),_:1}))]),_:1},8,["modelValue"])])]),_:1},8,["class"]),l(i,{class:Re(e.$vuetify.display.mdAndDown?"pt-6":""),cols:"12",md:"8"},{default:d(()=>[l(nl,{modelValue:D.value,"onUpdate:modelValue":a[20]||(a[20]=t=>D.value=t),touch:!1,class:"w-100"},{default:d(()=>[l(ke,{value:"delivery"},{default:d(()=>[b("div",gl,[b("h5",yl,c(("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.title")),1),l(U,{class:"mt-2",dense:""},{default:d(()=>[l(i,{cols:"6"},{default:d(()=>[l(f,{modelValue:oe.value,"onUpdate:modelValue":a[8]||(a[8]=t=>oe.value=t),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",disable:G},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.date.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.date.placeholder")},null,8,["modelValue","config","label","placeholder"])]),_:1}),l(i,{cols:"6"},{default:d(()=>[l(f,{modelValue:de.value,"onUpdate:modelValue":a[9]||(a[9]=t=>de.value=t),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.time.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.time.placeholder")},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(u,{modelValue:te.value,"onUpdate:modelValue":a[10]||(a[10]=t=>te.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.address1.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.address1.placeholder")},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(u,{modelValue:ne.value,"onUpdate:modelValue":a[11]||(a[11]=t=>ne.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.address2.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.address2.placeholder")},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12",md:"6"},{default:d(()=>[l(u,{modelValue:ie.value,"onUpdate:modelValue":a[12]||(a[12]=t=>ie.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.city.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.city.placeholder")},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12",md:"6"},{default:d(()=>[l(u,{modelValue:se.value,"onUpdate:modelValue":a[13]||(a[13]=t=>se.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.zipcode.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.zipcode.placeholder"),type:"number"},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(C,{modelValue:B.value,"onUpdate:modelValue":a[14]||(a[14]=t=>B.value=t),items:o(je),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.country.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.country.placeholder"),"item-title":"label","item-value":"code"},null,8,["modelValue","items","label","placeholder"])]),_:1})]),_:1})])]),_:1}),l(ke,{value:"collection"},{default:d(()=>[b("div",hl,[b("div",Vl,c(("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.title")),1),b("div",kl,[b("div",Ul,[l(f,{modelValue:re.value,"onUpdate:modelValue":a[15]||(a[15]=t=>re.value=t),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",disable:G},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.date.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.date.placeholder")},null,8,["modelValue","config","label","placeholder"])]),b("div",Al,[l(f,{modelValue:ue.value,"onUpdate:modelValue":a[16]||(a[16]=t=>ue.value=t),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.time.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.time.placeholder")},null,8,["modelValue","label","placeholder"])])])])]),_:1}),l(ke,{value:"eat_in"},{default:d(()=>[b("div",wl,[b("h5",Tl,c(("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.title")),1),b("div",Cl,[b("div",El,[l(f,{modelValue:me.value,"onUpdate:modelValue":a[17]||(a[17]=t=>me.value=t),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",disable:G},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.date.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.date.placeholder")},null,8,["modelValue","config","label","placeholder"])]),b("div",_l,[l(f,{modelValue:ce.value,"onUpdate:modelValue":a[18]||(a[18]=t=>ce.value=t),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.time.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.time.placeholder")},null,8,["modelValue","label","placeholder"])])]),b("div",Pl,[l(il,{modelValue:pe.value,"onUpdate:modelValue":a[19]||(a[19]=t=>pe.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.table.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.table.placeholder"),variant:"underlined"},null,8,["modelValue","label","placeholder"])])])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1}),l(i,{class:"pt-0 mt-0",cols:"12",md:"12"},{default:d(()=>[l(ge,{disabled:!h.value||!V.value,loading:!h.value||!V.value},{default:d(()=>[l(ye,null,{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.title")),1)]),_:1}),l(he,null,{default:d(()=>[l(U,{dense:""},{default:d(()=>[l(i,{cols:"2",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.reference")),1)]),_:1}),l(i,{cols:"2",md:"4"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.name")),1)]),_:1}),l(i,{cols:"2",md:"1"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.quantity")),1)]),_:1}),l(i,{cols:"2",md:"1"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.vat")),1)]),_:1}),l(i,{cols:"1",md:"1"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.price")),1)]),_:1}),l(i,{class:"text-center",cols:"2",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.subtotal")),1)]),_:1}),l(i,{cols:"1",md:"1"})]),_:1}),(y(!0),H($e,null,Fe(_.value,t=>(y(),H($e,{key:t.id},[l(U,{dense:""},{default:d(()=>[l(i,{cols:"4",md:"2"},{default:d(()=>[t.sku_ref!==null?(y(),P(k,{key:0,modelValue:t.sku_ref,"onUpdate:modelValue":[s=>t.sku_ref=s,s=>Pe(s,t)],items:o(Ae),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.item.reference"),"item-title":"sku_ref","item-value":"id","no-data-text":"common.component.noData"},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])):N("",!0)]),_:2},1024),l(i,{cols:"6",md:"4"},{default:d(()=>[l(k,{modelValue:t.product_name,"onUpdate:modelValue":[s=>t.product_name=s,s=>Pe(s,t)],items:o(S),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.item.name"),"item-title":"product_name","item-value":"id","no-data-text":"common.component.noData"},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])]),_:2},1024),l(i,{cols:"2",md:"1"},{default:d(()=>[l(u,{modelValue:t.quantity,"onUpdate:modelValue":s=>t.quantity=s,clearable:!1,min:"1",placeholder:"1",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(i,{class:"align-self-end",cols:"3",md:"1"},{default:d(()=>[v(c(Ce(t.tax_rate)),1)]),_:2},1024),l(i,{class:"align-self-end",cols:"3",md:"1"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(t.price)),1)]),_:2},1024),l(i,{class:"align-self-end text-center",cols:"3",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(O.Api).HubrisePriceUtil.multiply(t.price,t.quantity))),1)]),_:2},1024),l(i,{class:"px-0",cols:"3",md:"1"},{default:d(()=>[l(r,{"x-small":"",onClick:s=>t.customer_notes=t.customer_notes===void 0?null:void 0},{default:d(()=>[l(F,{icon:"bx-edit"})]),_:2},1032,["onClick"]),l(r,{onClick:s=>Be(t)},{default:d(()=>[l(F,{icon:"bx-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),(y(!0),H($e,null,Fe(t.options,s=>(y(),H("div",{key:s.ref},[l(U,{dense:""},{default:d(()=>[l(i,{class:"d-flex align-self-end",cols:"4",md:"2"},{default:d(()=>[l(Le),s.ref!==null?(y(),P(k,{key:0,modelValue:s.ref,"onUpdate:modelValue":[g=>s.ref=g,g=>De(t.id,g,s)],items:o(W)[t.id],placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.item.reference"),"item-title":"ref","item-value":"id","no-data-text":"common.component.noData"},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])):N("",!0)]),_:2},1024),l(i,{class:"d-flex align-self-end",cols:"6",md:"4"},{default:d(()=>[l(Le),l(k,{modelValue:s.name,"onUpdate:modelValue":[g=>s.name=g,g=>De(t.id,g,s)],items:o(A)[t.id],placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.item.name"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData"},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])]),_:2},1024),l(i,{class:"d-flex align-self-end",cols:"2",md:"1"},{default:d(()=>[l(u,{modelValue:s.quantity,"onUpdate:modelValue":g=>s.quantity=g,clearable:!1,min:"1",placeholder:"1",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(i,{class:"align-self-end",cols:"3",md:"1"},{default:d(()=>[v(c(Ce(t.tax_rate)),1)]),_:2},1024),l(i,{class:"align-self-end",cols:"3",md:"1"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(s.price)),1)]),_:2},1024),l(i,{class:"align-self-end text-center",cols:"3",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(O.Api).HubrisePriceUtil.multiply(s.price,s.quantity))),1)]),_:2},1024),l(i,{cols:"3",md:"1"},{default:d(()=>[l(r,{onClick:g=>Me(t,s)},{default:d(()=>[l(F,{icon:"bx-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),l(U,{dense:""},{default:d(()=>[l(i,{cols:"0",md:"2"}),l(i,{cols:"12",md:"5"},{default:d(()=>{var s;return[((s=o(A)[t.id])==null?void 0:s.length)>0?(y(),P(Y,{key:0,class:"mt-6",color:"secondary","prepend-icon":"bx-plus",size:"x-small",onClick:g=>_e(t)},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.button.add.itemOption")),1)]),_:2},1032,["onClick"])):N("",!0)]}),_:2},1024),l(i,{cols:"12",md:"4"},{default:d(()=>[t.customer_notes!==void 0?(y(),P($,{key:0,modelValue:t.customer_notes,"onUpdate:modelValue":s=>t.customer_notes=s,"auto-grow":"",placeholder:"Customer notes",rows:"1"},null,8,["modelValue","onUpdate:modelValue"])):N("",!0)]),_:2},1024),l(i,{cols:"0",md:"1"})]),_:2},1024)],64))),128)),l(Y,{class:"mt-6",color:"secondary","prepend-icon":"bx-plus",size:"small",onClick:Ee},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.button.add.item")),1)]),_:1}),l(U,{dense:""},{default:d(()=>[l(i,{cols:"0",md:"7"}),l(i,{cols:"6",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.subtotal")),1)]),_:1}),l(i,{class:"text-center",cols:"6",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(M).subtotal)),1)]),_:1}),l(i,{cols:"0",md:"1"})]),_:1}),D.value==="delivery"?(y(),P(U,{key:0,dense:""},{default:d(()=>[l(i,{cols:"0",md:"7"}),l(i,{cols:"6",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.deliveryFee")),1)]),_:1}),l(i,{class:"text-center",cols:"6",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(M).deliveryFee)),1)]),_:1}),l(i,{cols:"0",md:"1"})]),_:1})):N("",!0),l(U,{dense:""},{default:d(()=>[l(i,{cols:"0",md:"7"}),l(i,{cols:"6",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.minimumOrderFee")),1)]),_:1}),l(i,{class:"text-center",cols:"6",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(M).minimumOrderFee)),1)]),_:1}),l(i,{cols:"0",md:"1"})]),_:1}),l(U,{dense:""},{default:d(()=>[l(i,{cols:"0",md:"7"}),l(i,{cols:"6",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.total")),1)]),_:1}),l(i,{class:"text-center",cols:"6",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(M).total)),1)]),_:1}),l(i,{cols:"0",md:"1"})]),_:1}),l(U,{dense:""},{default:d(()=>[l(i,{cols:"0",md:"7"}),l(i,{cols:"12",md:"4"},{default:d(()=>[l(Y,{disabled:!q.value||_.value.length===0,loading:R.value,class:"w-100",onClick:Te},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.button.create")),1)]),_:1},8,["disabled","loading"])]),_:1}),l(i,{cols:"0",md:"1"})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1})]),_:1})])}}}),Aa=sl(Dl,[["__scopeId","data-v-45074253"]]);export{Aa as default};
