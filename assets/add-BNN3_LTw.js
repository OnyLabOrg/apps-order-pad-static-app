import{a as kl,$ as d}from"./TranslationUtil-pdlYL3up.js";import{d as Tl,r as i,X as El,G as Ul,ai as wl,g as R,f as o,a as Sl,o as E,e as h,b as l,v as c,m as t,ah as P,t as y,dm as v,$ as j,c as se,F as Ue,i as ml,l as le,aZ as Ll,H as Il}from"./index-DOdbB806.js";import{_ as Dl}from"./AppAutocomplete.vue_vue_type_script_setup_true_lang-C6T6vsGI.js";import{_ as Nl}from"./AppTextarea.vue_vue_type_script_setup_true_lang-DzQLVDfj.js";import{_ as Kl}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-CpspakHg.js";import{_ as Rl}from"./AppSelect.vue_vue_type_script_setup_true_lang-DkfD0iOB.js";import{_ as Hl}from"./AppTextField.vue_vue_type_script_setup_true_lang-Dd68LhHI.js";import{_ as Ol}from"./AppCombobox.vue_vue_type_script_setup_true_lang-CbgBQzTj.js";import{_ as Fl}from"./AppSelectContext.vue_vue_type_script_setup_true_lang-D_ARwRuU.js";import{D as we,d as U,c as Se}from"./PriceUtil-E7PtDa_3.js";import{c as $}from"./common-api.web.min-rTQUY9Dn.js";import{u as Pl}from"./usePageTitle-zQWUl2sm.js";import{b as ql,c as Yl,d as jl,e as zl,h as Le,a as Ie}from"./Http-zN6zsM5q.js";import{_ as Bl}from"./dialog-create-order.vue_vue_type_script_setup_true_lang-CmlLPVeU.js";import{$ as De}from"./api-DasSzC_v.js";import{V as Ml}from"./VForm-C-yAAQIS.js";import{V as k,a as s}from"./VRow-Bv3tKSAg.js";import{V as Ne,c as Ke}from"./VCard-vHX5ehuX.js";import{V as Re}from"./VCardText-BWHcqFBT.js";import{V as cl}from"./VCheckbox-Bt1H34_2.js";import{a as Gl,V as He}from"./VTabs-DK-f9JXe.js";import{V as Wl,a as Oe}from"./VWindowItem-DDxseJro.js";import{V as Xl}from"./VTextField-P7IkwXff.js";import{V as Fe}from"./VSpacer-BEp2W0WS.js";import{V as Zl}from"./VSelect-tMlDkMau.js";import{_ as Jl}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./filter-DV9vBeOh.js";import"./form-BYA75kRI.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-DX4YjIHe.js";import"./ssrBoot-BwkNX1N8.js";import"./VImg-Cvoqsjc8.js";import"./VAvatar-CNE9dOc4.js";import"./VDivider-Dc1oZ17H.js";import"./VMenu-CTWLrBEH.js";import"./VOverlay-NJg5cUmV.js";import"./easing-Bybner-F.js";import"./delay-CNfmcGJX.js";import"./lazy-BLnuBAuF.js";import"./scopeId-DqsXg8zJ.js";import"./dialog-transition-DnzY6fWQ.js";import"./VCheckboxBtn-CKMzTM9n.js";import"./VSelectionControl-CMfwvphU.js";import"./VChip-DMVfqWOo.js";import"./VSlideGroup-H-n7yTLg.js";/* empty css                   */import"./VCounter-BwdTF3s8.js";import"./VField-HMbAOuQp.js";import"./VInput-Bw3dTipo.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-BfvDJIHG.js";import"./VDialog-CyB8WYM8.js";import"./index-CvOPxmL5.js";/* empty css              */const Ql=q=>typeof q!="string"?!1:/^[\w.!#$%&'*+/=?^`{|}~-]+@[a-z0-9-]+(?:\.[a-z0-9-]+)*$/i.test(q),xl=q=>{if(typeof q!="string")return!1;const F=q.replace(/\s/g,"");return/^\+\d+(?:#\d+)?$/.test(F)||/^0\d{9}(?:#\d+)?$/.test(F)},ea={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},la={class:"d-flex flex-column justify-center"},aa={class:"text-h4 mb-1"},ta={class:"text-body-1"},oa={class:"d-flex gap-4 align-center flex-wrap"},na={class:"pe-3"},da={class:"text-truncate font-weight-medium text-start"},sa={class:"text-truncate font-weight-medium text-start"},ra={class:"text-truncate font-weight-medium text-start"},ia={class:"ps-md-3"},ua={class:"ps-md-3"},ma={class:"d-flex flex-sm-row flex-column flex-wrap justify-space-between gap-x-6 gap-y-4"},ca={class:"flex-grow-1"},pa={class:"flex-grow-1"},va={class:"ps-md-3"},fa={class:"mt-3"},ga={class:"d-flex flex-sm-row flex-column flex-wrap justify-space-between gap-x-6 gap-y-4 mt-5"},ya={class:"flex-grow-1"},ba={class:"flex-grow-1"},pl=1e3,$a=Tl({__name:"add",setup(q){var ul;const F=we.local().toISODate(),Pe=kl("common.country"),qe=Object.keys(Pe).map(e=>{var a,m;return{code:e,label:(m=(a=Pe[e])==null?void 0:a.body)==null?void 0:m.static}}).filter(e=>e.label!==void 0),A=((ul=ql().getCurrentAccount)==null?void 0:ul.currency)??$.Api.HubriseCurrencyCode.EUR,_=i(),re=i(),L=i();let Ye=[],H=[],ie={},w={};const je=i(null),ze=i({}),O=i([{}]),ue=i(),me=i(),ce=i(`0.00 ${A}`),Be=i([{value:`0.00 ${A}`,name:U(`0.00 ${A}`)},{value:`1.00 ${A}`,name:U(`1.00 ${A}`)},{value:`2.00 ${A}`,name:U(`2.00 ${A}`)},{value:`3.00 ${A}`,name:U(`3.00 ${A}`)},{value:`4.00 ${A}`,name:U(`4.00 ${A}`)},{value:`5.00 ${A}`,name:U(`5.00 ${A}`)}]),z=i(),B=i(),M=i(),G=i(),I=i(),vl=[e=>!!e||xl(e)||d("page.order.add.section.customer.phone.rule.format")],W=i(!0),D=i(),fl=[e=>!e||Ql(e)||d("page.order.add.section.customer.email.rule.format")],X=i(!0),Z=i(!1),J=i(!1),N=i($.Api.HubriseServiceType.DELIVERY),pe=we.local().toISODate(),ve=we.local().toISOTime({suppressSeconds:!0,suppressMilliseconds:!0,includeOffset:!1}),fe=i(pe),ge=i(ve),Me=i(!1),ye=i(),Q=i(),Y=i(),ae=i(),x=i(),ee=i(),K=i(),be=i(),$e=i(),he=i(),Ve=i(pe),Ce=i(ve),Ae=i(pe),_e=i(ve),ke=i(),te=i(!1),Ge=e=>{typeof e=="string"||e===null||(I.value=e.phone,B.value=e.first_name,M.value=e.last_name,G.value=e.company_name,I.value=e.phone,W.value=e.sms_marketing??!1,D.value=e.email,X.value=e.email_marketing??!1)},Te=()=>{z.value=[],B.value=void 0,M.value=void 0,G.value=void 0,I.value=void 0,W.value=!0,D.value=void 0,X.value=!0},gl=()=>{var e;typeof I.value!="string"||I.value.length<5||(Z.value=!0,De(`customers/search?phone=${encodeURIComponent(I.value)}&customerListId=${String((e=de.getCurrentCustomerList)==null?void 0:e.id)}`,{method:"GET",onResponseError({response:a}){Z.value=!1,Le(a)}}).then(a=>{Z.value=!1,z.value=a.customers}).catch(a=>{Z.value=!1,Ie(a)}))},yl=()=>{var e;typeof D.value!="string"||D.value.length<5||(J.value=!0,De(`customers/search?email=${encodeURIComponent(D.value)}&customerListId=${String((e=de.getCurrentCustomerList)==null?void 0:e.id)}`,{method:"GET",onResponseError({response:a}){J.value=!1,Le(a)}}).then(a=>{J.value=!1,z.value=a.customers}).catch(a=>{J.value=!1,Ie(a)}))},We=()=>{if(!(!Array.isArray(O.value)||O.value.length===0))return O.value.filter(e=>"id"in e&&e.id!==void 0&&e.id!==null).length===0},Xe=()=>{var m,g,f,S,C,r;let e;switch(N.value){case $.Api.HubriseServiceType.DELIVERY:e=Se(fe.value,ge.value,(g=(m=_.value)==null?void 0:m.timezone)==null?void 0:g.name);break;case $.Api.HubriseServiceType.COLLECTION:e=Se(Ve.value,Ce.value,(S=(f=_.value)==null?void 0:f.timezone)==null?void 0:S.name);break;case $.Api.HubriseServiceType.EAT_IN:e=Se(Ae.value,_e.value,(r=(C=_.value)==null?void 0:C.timezone)==null?void 0:r.name);break}const a={first_name:B.value,last_name:M.value,company_name:G.value,email:D.value,email_marketing:X.value,phone:I.value,sms_marketing:W.value};return N.value===$.Api.HubriseServiceType.DELIVERY&&(a.address_1=Y.value,a.address_2=ae.value,a.postal_code=ee.value,a.city=x.value,a.country=K.value,a.latitude=be.value,a.longitude=$e.value,a.delivery_notes=he.value??void 0),{service_type:N.value,table_name:ke.value??void 0,expected_time:e??void 0,customer:a,items:O.value,customer_notes:ue.value,seller_notes:me.value}},Ee=El(()=>{const e=new $.Api.TotalHubriseCalculator().calculateTotals(Xe(),A);return ce.value=e.deliveryFee,e}),Ze=async()=>{var e;(await((e=je.value)==null?void 0:e.validate())).valid&&(te.value=!0,ze.value=Xe())},Je=e=>{if(typeof e=="object"&&e!==null)switch(N.value){case $.Api.HubriseServiceType.DELIVERY:return`${e.delivery}%`;case $.Api.HubriseServiceType.COLLECTION:return`${e.collection}%`;case $.Api.HubriseServiceType.EAT_IN:return`${e.eat_in}%`}return""},bl=()=>{var a,m,g,f,S,C;if(L.value===void 0||L.value===null)return;const e={};(g=(m=(a=L.value)==null?void 0:a.data)==null?void 0:m.categories)==null||g.forEach(r=>{e[r.id]=r.name}),H=((C=(S=(f=L.value)==null?void 0:f.data)==null?void 0:S.products)==null?void 0:C.map(r=>{var n,u;const b=r.ref??(((n=r.skus)==null?void 0:n.length)===1&&(!Array.isArray(r.skus[0].option_list_ids)||r.skus[0].option_list_ids.length===0)?r.skus[0].ref:null),V=((u=r.skus)==null?void 0:u.length)===1&&(!Array.isArray(r.skus[0].option_list_ids)||r.skus[0].option_list_ids.length===0)?r.skus[0].price:$.Api.HubrisePriceUtil.multiply(r.skus[0].price,0);return{id:r.id,sku_ref:b,category:e[r.category_id],product_name:r.name,quantity:1,tax_rate:r.tax_rate,price:V,customer_notes:void 0}}).sort((r,b)=>{var V,n;return((V=r.category)==null?void 0:V.localeCompare(b.category??""))||((n=r.name)==null?void 0:n.localeCompare(b.name??""))}))??[],Ye=(H==null?void 0:H.filter(r=>r.sku_ref!==void 0&&r.sku_ref!==null))??[]},$l=()=>{var a,m,g,f,S,C;if(L.value===void 0||L.value===null)return;const e={};(g=(m=(a=L.value)==null?void 0:a.data)==null?void 0:m.option_lists)==null||g.forEach(r=>{e[r.id]=r}),w={},(C=(S=(f=L.value)==null?void 0:f.data)==null?void 0:S.products)==null||C.forEach(r=>{w[r.id]=[],!(!Array.isArray(r.skus)||r.skus.length===0||!Array.isArray(r.skus[0].option_list_ids)||r.skus[0].option_list_ids.length===0)&&(r.skus.forEach(b=>{if(Array.isArray(b.option_list_ids)&&b.option_list_ids.length>0)b.option_list_ids.forEach(V=>{const n=e[V];n!==void 0&&(!Array.isArray(n.options)||n.options.length===0||n.options.forEach(u=>{const T=$.Api.HubrisePriceUtil.sum([b.price??null,u.price??null]);w[r.id].push({id:`${b.id}-${n.id}-${u.id}`,ref:u.ref??null,option_list_name:n.name,name:u.name,quantity:1,price:T})}))});else{const V=b.price??null;w[r.id].push({id:b.id,ref:b.ref??null,name:b.name,quantity:1,price:V})}}),w[r.id].sort((b,V)=>{var n;return(n=b.name)==null?void 0:n.localeCompare(V.name??"")}))}),ie={},Object.keys(w).forEach(r=>{var b;ie[r]=((b=w[r])==null?void 0:b.filter(V=>V.ref!==void 0&&V.ref!==null))??[]})},Qe=()=>{O.value.push({})},hl=e=>{const a=O.value.findIndex(m=>m===e);a>=0&&O.value.splice(a,1)},xe=e=>{Array.isArray(e.options)||(e.options=[]),e.options.push({})},Vl=(e,a)=>{const m=e.options.findIndex(g=>g===a);m>=0&&e.options.splice(m,1)},el=(e,a)=>{const m=H==null?void 0:H.find(g=>g.id===e);m!==void 0&&($.Util.ObjectUtil.update(a,m),Array.isArray(w[e])&&w[e].length>0&&xe(a))},ll=(e,a,m)=>{var f;const g=(f=w[e])==null?void 0:f.find(S=>S.id===a);g!==void 0&&$.Util.ObjectUtil.update(m,g)},al=e=>{const a=e.target;a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.isContentEditable||(e.key==="+"||e.key==="Add"||e.code==="NumpadAdd"||e.shiftKey&&(e.key==="="||e.code==="Equal"))&&Qe()},p=e=>{if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();const a=Array.from(document.querySelectorAll('input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex="-1"])')).filter(f=>f.offsetParent!==null),m=a.indexOf(e.target),g=a[m+1];g&&g.focus()}};let oe=Date.now(),ne;const tl=()=>{var g;const e=Y.value;if(typeof e!="string"||e.length<3||/^[\d\s,]+$/.test(e))return;if(clearTimeout(ne),Date.now()<oe+pl){ne=setTimeout(()=>{ne=void 0,tl()},Math.max(0,pl-(Date.now()-oe)));return}const a=(g=Ll("language",Il.app.i18n.defaultLocale))==null?void 0:g.value,m=K.value??void 0;Q.value=!0,oe=Date.now(),De(`address/search?text=${encodeURIComponent(e)}&language=${a}${m!==void 0?`&country=${String(m)}`:""}`,{method:"GET",onResponseError({response:f}){Q.value=!1,Le(f)}}).then(f=>{clearTimeout(ne),Q.value=!1,ye.value=f.addresses,Me.value=!0,oe=Date.now()}).catch(f=>{Q.value=!1,Ie(f)})},Cl=e=>{var a;return typeof e!="object"||e===null?e:[e.address_1,e.city,e.postal_code,(a=e.country)==null?void 0:a.toUpperCase()].filter(m=>m!==void 0).join(", ")},Al=e=>{var m;if(typeof e=="string"||e===null)return;Y.value=e.address_1,x.value=e.city,ee.value=e.postal_code,be.value=e.latitude,$e.value=e.longitude;const a=(m=e.country)==null?void 0:m.toUpperCase();a!==void 0&&a!==K.value&&qe.find(g=>g.code===a)&&(K.value=a)},ol=()=>{var e;ye.value=[],Y.value=void 0,ae.value=void 0,x.value=void 0,ee.value=void 0,be.value=void 0,$e.value=void 0,typeof((e=_.value)==null?void 0:e.country)=="string"?K.value=_.value.country:K.value=void 0},nl=e=>{var a;_.value=e,typeof((a=_.value)==null?void 0:a.country)=="string"&&(K.value=_.value.country)},dl=e=>{re.value=e},sl=e=>{L.value=e,bl(),$l()},_l=()=>{te.value=!1,Te(),ol()},rl=Yl(),de=jl(),il=zl();return Ul(()=>{Pl("page.order.add.title"),window.addEventListener("keydown",al),rl.onCurrentLocationChange(nl),de.onCurrentCustomerListChange(dl),il.onCurrentCatalogChange(sl)}),wl(()=>{window.removeEventListener("keydown",al),rl.offCurrentLocationChange(nl),de.offCurrentCustomerListChange(dl),il.offCurrentCatalogChange(sl)}),(e,a)=>{const m=Fl,g=Ol,f=Hl,S=Rl,C=Kl,r=Nl,b=Dl,V=Sl("IconBtn");return E(),R(Ml,{ref_key:"form",ref:je},{default:o(()=>[h("div",ea,[h("div",la,[h("h4",aa,c(("$t"in e?e.$t:t(d))("page.order.add.title")),1),h("div",ta,c(("$t"in e?e.$t:t(d))("page.order.add.subtitle")),1)]),h("div",oa,[l(m,{"enable-catalogs":"","enable-customer-lists":"","enable-locations":""}),l(P,{color:"secondary",onclick:"window.location = '/'",variant:"tonal"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.button.discard")),1)]),_:1}),l(P,{disabled:We(),loading:te.value,onClick:Ze},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.button.create")),1)]),_:1},8,["disabled","loading"])])]),l(k,{dense:""},{default:o(()=>[l(s,{cols:"12",md:"4"},{default:o(()=>[l(Ne,{disabled:!_.value||!re.value,loading:!_.value||!re.value,class:"mb-6 fill-height"},{default:o(()=>[l(Ke,null,{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.customer.title")),1)]),_:1}),l(Re,{class:"pb-0"},{default:o(()=>[l(k,{dense:""},{default:o(()=>[l(s,{cols:"10"},{default:o(()=>[l(g,{modelValue:I.value,"onUpdate:modelValue":[a[0]||(a[0]=n=>I.value=n),Ge],items:z.value,label:("$t"in e?e.$t:t(d))("page.order.add.section.customer.phone.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.customer.phone.placeholder"),rules:vl,clearable:"","item-title":"phone","item-value":"id","validate-on":"blur",onKeyup:v(p,["enter"]),"onClick:clear":Te},null,8,["modelValue","items","label","placeholder"])]),_:1}),l(s,{class:"text-center",cols:"2"},{default:o(()=>[l(P,{disabled:!I.value||I.value.length<5,loading:Z.value,icon:"bx-search",rounded:"",size:"small",onClick:gl},null,8,["disabled","loading"])]),_:1}),l(s,{cols:"10"},{default:o(()=>[l(g,{modelValue:D.value,"onUpdate:modelValue":[a[1]||(a[1]=n=>D.value=n),Ge],items:z.value,label:("$t"in e?e.$t:t(d))("page.order.add.section.customer.email.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.customer.email.placeholder"),rules:fl,clearable:"","item-title":"email","item-value":"id","validate-on":"blur",onKeyup:v(p,["enter"]),"onClick:clear":Te},null,8,["modelValue","items","label","placeholder"])]),_:1}),l(s,{class:"text-center",cols:"2"},{default:o(()=>[l(P,{disabled:!D.value||D.value.length<5,loading:J.value,icon:"bx-search",rounded:"",size:"small",onClick:yl},null,8,["disabled","loading"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(cl,{modelValue:W.value,"onUpdate:modelValue":a[2]||(a[2]=n=>W.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.customer.smsMarketing.label"),onKeyup:v(p,["enter"])},null,8,["modelValue","label"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(cl,{modelValue:X.value,"onUpdate:modelValue":a[3]||(a[3]=n=>X.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.customer.emailMarketing.label"),onKeyup:v(p,["enter"])},null,8,["modelValue","label"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:B.value,"onUpdate:modelValue":a[4]||(a[4]=n=>B.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.customer.firstName.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.customer.firstName.placeholder"),class:"mb-3",onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:M.value,"onUpdate:modelValue":a[5]||(a[5]=n=>M.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.customer.lastName.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.customer.lastName.placeholder"),class:"mb-3",onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12"},{default:o(()=>[l(f,{modelValue:G.value,"onUpdate:modelValue":a[6]||(a[6]=n=>G.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.customer.company.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.customer.company.placeholder"),class:"mb-3",onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1}),l(s,{cols:"12",md:"8"},{default:o(()=>[l(Ne,{disabled:!_.value,loading:!_.value,class:"action-card mb-6 fill-height"},{default:o(()=>[l(Ke,null,{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.action.title")),1)]),_:1}),l(Re,{class:"pb-0"},{default:o(()=>[l(k,{dense:""},{default:o(()=>[l(s,{cols:"12",md:"3"},{default:o(()=>[h("div",na,[l(Gl,{modelValue:N.value,"onUpdate:modelValue":a[7]||(a[7]=n=>N.value=n),class:"v-tabs-pill",color:"primary",direction:"vertical"},{default:o(()=>[(E(),R(He,{key:0,value:t($.Api).HubriseServiceType.DELIVERY},{default:o(()=>[l(j,{class:"me-2",icon:"mdi-moped"}),h("div",da,c(("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.title")),1)]),_:1},8,["value"])),(E(),R(He,{key:1,value:t($.Api).HubriseServiceType.COLLECTION},{default:o(()=>[l(j,{class:"me-2",icon:"bx-walk"}),h("div",sa,c(("$t"in e?e.$t:t(d))("page.order.add.section.action.pickup.title")),1)]),_:1},8,["value"])),(E(),R(He,{key:2,value:t($.Api).HubriseServiceType.EAT_IN},{default:o(()=>[l(j,{class:"me-2",icon:"ic-baseline-table-bar"}),h("div",ra,c(("$t"in e?e.$t:t(d))("page.order.add.section.action.eatin.title")),1)]),_:1},8,["value"]))]),_:1},8,["modelValue"])])]),_:1}),l(s,{cols:"12",md:"9"},{default:o(()=>[l(Wl,{modelValue:N.value,"onUpdate:modelValue":a[21]||(a[21]=n=>N.value=n),touch:!1,class:"w-100"},{default:o(()=>[l(Oe,{value:t($.Api).HubriseServiceType.DELIVERY},{default:o(()=>[h("div",ia,[l(k,{class:"v-row-small"},{default:o(()=>[l(s,{cols:"12",md:"6"},{default:o(()=>[l(g,{modelValue:Y.value,"onUpdate:modelValue":[a[8]||(a[8]=n=>Y.value=n),Al],"item-title":Cl,items:ye.value,label:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.address1.label"),loading:Q.value,menu:Me.value,placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.address1.placeholder"),clearable:"","item-value":"id",onInput:tl,onKeyup:v(p,["enter"]),"onClick:clear":ol},null,8,["modelValue","items","label","loading","menu","placeholder"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:ae.value,"onUpdate:modelValue":a[9]||(a[9]=n=>ae.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.address2.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.address2.placeholder"),onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"4"},{default:o(()=>[l(f,{modelValue:x.value,"onUpdate:modelValue":a[10]||(a[10]=n=>x.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.city.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.city.placeholder"),onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"4"},{default:o(()=>[l(f,{modelValue:ee.value,"onUpdate:modelValue":a[11]||(a[11]=n=>ee.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.zipcode.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.zipcode.placeholder"),onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"4"},{default:o(()=>[l(S,{modelValue:K.value,"onUpdate:modelValue":a[12]||(a[12]=n=>K.value=n),items:t(qe),label:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.country.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.country.placeholder"),"item-title":"label","item-value":"code",onKeyup:v(p,["enter"])},null,8,["modelValue","items","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(C,{modelValue:fe.value,"onUpdate:modelValue":a[13]||(a[13]=n=>fe.value=n),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",minDate:t(F)},label:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.date.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.date.placeholder"),onKeyup:v(p,["enter"])},null,8,["modelValue","config","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(C,{modelValue:ge.value,"onUpdate:modelValue":a[14]||(a[14]=n=>ge.value=n),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:10},label:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.time.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.time.placeholder"),format:"24h",onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{class:"not-small",cols:"12"},{default:o(()=>[l(r,{modelValue:he.value,"onUpdate:modelValue":a[15]||(a[15]=n=>he.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.notes.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.notes.placeholder"),"auto-grow":"",counter:"",maxlength:"300",rows:"1",onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1})])]),_:1},8,["value"]),l(Oe,{value:t($.Api).HubriseServiceType.COLLECTION},{default:o(()=>[h("div",ua,[h("div",ma,[h("div",ca,[l(C,{modelValue:Ve.value,"onUpdate:modelValue":a[16]||(a[16]=n=>Ve.value=n),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",minDate:t(F)},label:("$t"in e?e.$t:t(d))("page.order.add.section.action.pickup.date.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.pickup.date.placeholder"),onKeyup:v(p,["enter"])},null,8,["modelValue","config","label","placeholder"])]),h("div",pa,[l(C,{modelValue:Ce.value,"onUpdate:modelValue":a[17]||(a[17]=n=>Ce.value=n),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:10},label:("$t"in e?e.$t:t(d))("page.order.add.section.action.pickup.time.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.pickup.time.placeholder"),onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])])])])]),_:1},8,["value"]),l(Oe,{value:t($.Api).HubriseServiceType.EAT_IN},{default:o(()=>[h("div",va,[h("div",fa,[l(Xl,{modelValue:ke.value,"onUpdate:modelValue":a[18]||(a[18]=n=>ke.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.action.eatin.table.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.eatin.table.placeholder"),variant:"underlined",onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),h("div",ga,[h("div",ya,[l(C,{modelValue:Ae.value,"onUpdate:modelValue":a[19]||(a[19]=n=>Ae.value=n),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",minDate:t(F)},label:("$t"in e?e.$t:t(d))("page.order.add.section.action.eatin.date.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.eatin.date.placeholder"),onKeyup:v(p,["enter"])},null,8,["modelValue","config","label","placeholder"])]),h("div",ba,[l(C,{modelValue:_e.value,"onUpdate:modelValue":a[20]||(a[20]=n=>_e.value=n),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:10},label:("$t"in e?e.$t:t(d))("page.order.add.section.action.eatin.time.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.eatin.time.placeholder"),onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])])])])]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1}),l(s,{class:"pt-0 mt-0",cols:"12",md:"12"},{default:o(()=>[l(Ne,{disabled:!_.value||!L.value,loading:!_.value||!L.value},{default:o(()=>[l(Ke,null,{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.title")),1)]),_:1}),l(Re,null,{default:o(()=>[l(k,{dense:""},{default:o(()=>[l(s,{cols:"2",md:"2"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.reference")),1)]),_:1}),l(s,{cols:"2",md:"4"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.name")),1)]),_:1}),l(s,{cols:"2",md:"1"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.quantity")),1)]),_:1}),l(s,{cols:"2",md:"1"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.vat")),1)]),_:1}),l(s,{cols:"1",md:"1"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.price")),1)]),_:1}),l(s,{class:"text-center",cols:"2",md:"2"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.subtotal")),1)]),_:1}),l(s,{cols:"1",md:"1"})]),_:1}),(E(!0),se(Ue,null,ml(O.value,n=>(E(),se(Ue,{key:n.id},[l(k,{dense:""},{default:o(()=>[l(s,{cols:"4",md:"2"},{default:o(()=>[n.sku_ref!==null?(E(),R(b,{key:0,modelValue:n.sku_ref,"onUpdate:modelValue":[u=>n.sku_ref=u,u=>el(u,n)],items:t(Ye),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.item.reference"),"item-title":"sku_ref","item-value":"id","no-data-text":"common.component.noData",onKeyup:v(p,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])):le("",!0)]),_:2},1024),l(s,{cols:"6",md:"4"},{default:o(()=>[l(b,{modelValue:n.product_name,"onUpdate:modelValue":[u=>n.product_name=u,u=>el(u,n)],items:t(H),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.item.name"),"item-title":"product_name","item-value":"id","no-data-text":"common.component.noData",onKeyup:v(p,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])]),_:2},1024),l(s,{cols:"2",md:"1"},{default:o(()=>[l(f,{modelValue:n.quantity,"onUpdate:modelValue":u=>n.quantity=u,clearable:!1,min:"1",placeholder:"1",type:"number",onKeyup:v(p,["enter"])},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(s,{class:"align-self-end",cols:"3",md:"1"},{default:o(()=>[y(c(Je(n.tax_rate)),1)]),_:2},1024),l(s,{class:"align-self-end",cols:"3",md:"1"},{default:o(()=>[y(c(t(U)(n.price)),1)]),_:2},1024),l(s,{class:"align-self-end text-center",cols:"3",md:"2"},{default:o(()=>[y(c(t(U)(t($.Api).HubrisePriceUtil.multiply(n.price,n.quantity))),1)]),_:2},1024),l(s,{class:"px-0",cols:"3",md:"1"},{default:o(()=>[l(V,{"x-small":"",onClick:u=>n.customer_notes=n.customer_notes===void 0?null:void 0},{default:o(()=>[l(j,{icon:"bx-edit"})]),_:2},1032,["onClick"]),l(V,{onClick:u=>hl(n)},{default:o(()=>[l(j,{icon:"bx-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),(E(!0),se(Ue,null,ml(n.options,u=>(E(),se("div",{key:u.ref},[l(k,{dense:""},{default:o(()=>[l(s,{class:"d-flex align-self-end",cols:"4",md:"2"},{default:o(()=>[l(Fe),u.ref!==null?(E(),R(b,{key:0,modelValue:u.ref,"onUpdate:modelValue":[T=>u.ref=T,T=>ll(n.id,T,u)],items:t(ie)[n.id],placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.item.reference"),"item-title":"ref","item-value":"id","no-data-text":"common.component.noData",onKeyup:v(p,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])):le("",!0)]),_:2},1024),l(s,{class:"d-flex align-self-end",cols:"6",md:"4"},{default:o(()=>[l(Fe),l(b,{modelValue:u.name,"onUpdate:modelValue":[T=>u.name=T,T=>ll(n.id,T,u)],items:t(w)[n.id],placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.item.name"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData",onKeyup:v(p,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])]),_:2},1024),l(s,{class:"d-flex align-self-end",cols:"2",md:"1"},{default:o(()=>[l(f,{modelValue:u.quantity,"onUpdate:modelValue":T=>u.quantity=T,clearable:!1,min:"1",placeholder:"1",type:"number",onKeyup:v(p,["enter"])},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(s,{class:"align-self-end",cols:"3",md:"1"},{default:o(()=>[y(c(Je(n.tax_rate)),1)]),_:2},1024),l(s,{class:"align-self-end",cols:"3",md:"1"},{default:o(()=>[y(c(t(U)(u.price)),1)]),_:2},1024),l(s,{class:"align-self-end text-center",cols:"3",md:"2"},{default:o(()=>[y(c(t(U)(t($.Api).HubrisePriceUtil.multiply(u.price,u.quantity))),1)]),_:2},1024),l(s,{cols:"3",md:"1"},{default:o(()=>[l(V,{onClick:T=>Vl(n,u)},{default:o(()=>[l(j,{icon:"bx-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),l(k,{dense:""},{default:o(()=>[l(s,{cols:"0",md:"2"}),l(s,{cols:"12",md:"5"},{default:o(()=>{var u;return[((u=t(w)[n.id])==null?void 0:u.length)>0?(E(),R(P,{key:0,class:"mt-6",color:"secondary","prepend-icon":"bx-plus",size:"x-small",onClick:T=>xe(n)},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.button.add.itemOption")),1)]),_:2},1032,["onClick"])):le("",!0)]}),_:2},1024),l(s,{cols:"12",md:"4"},{default:o(()=>[n.customer_notes!==void 0?(E(),R(r,{key:0,modelValue:n.customer_notes,"onUpdate:modelValue":u=>n.customer_notes=u,label:("$t"in e?e.$t:t(d))("page.order.add.section.item.itemNotes"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.item.itemNotes"),"auto-grow":"",counter:"",maxlength:"300",rows:"1",onKeyup:v(p,["enter"])},null,8,["modelValue","onUpdate:modelValue","label","placeholder"])):le("",!0)]),_:2},1024),l(s,{cols:"0",md:"1"})]),_:2},1024)],64))),128)),l(k,{dense:""},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[l(P,{class:"mt-6",color:"secondary","prepend-icon":"bx-plus",size:"small",onClick:Qe},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.button.add.item")),1)]),_:1})]),_:1}),l(s,{class:"px-4 py-8",cols:"6",md:"3"},{default:o(()=>[l(r,{modelValue:ue.value,"onUpdate:modelValue":a[22]||(a[22]=n=>ue.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.item.customerNotes"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.item.customerNotes"),"auto-grow":"",counter:"",maxlength:"500",rows:"4",onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{class:"px-4 py-8",cols:"6",md:"3"},{default:o(()=>[l(Fe),l(r,{modelValue:me.value,"onUpdate:modelValue":a[23]||(a[23]=n=>me.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.item.sellerNotes"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.item.sellerNotes"),"auto-grow":"",counter:"",maxlength:"500",rows:"4",onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"0",md:"1"}),l(s,{cols:"12",md:"5"},{default:o(()=>[l(k,{dense:""},{default:o(()=>[l(s,{class:"align-self-end",cols:"6",md:"5"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.subtotal")),1)]),_:1}),l(s,{class:"text-center",cols:"6",md:"4"},{default:o(()=>[y(c(t(U)(t(Ee).subtotal)),1)]),_:1}),l(s,{cols:"0",md:"3"})]),_:1}),l(k,{dense:""},{default:o(()=>[l(s,{class:"align-self-end",cols:"6",md:"5"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.minimumOrderFee")),1)]),_:1}),l(s,{class:"text-center",cols:"6",md:"4"},{default:o(()=>[y(c(t(U)(t(Ee).minimumOrderFee)),1)]),_:1}),l(s,{cols:"0",md:"3"})]),_:1}),N.value===t($.Api).HubriseServiceType.DELIVERY?(E(),R(k,{key:0,dense:""},{default:o(()=>[l(s,{class:"align-self-end",cols:"6",md:"5"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.deliveryFee")),1)]),_:1}),l(s,{class:"text-center pa-0",cols:"6",md:"4"},{default:o(()=>[l(Zl,{modelValue:ce.value,"onUpdate:modelValue":a[24]||(a[24]=n=>ce.value=n),disabled:!0,items:Be.value,loading:Be.value.length===0,class:"d-inline-flex","item-title":"name","item-value":"value",variant:"plain"},null,8,["modelValue","items","loading"])]),_:1}),l(s,{cols:"0",md:"3"})]),_:1})):le("",!0),l(k,{dense:""},{default:o(()=>[l(s,{class:"align-self-end",cols:"6",md:"5"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.total")),1)]),_:1}),l(s,{class:"text-center",cols:"6",md:"4"},{default:o(()=>[y(c(t(U)(t(Ee).total)),1)]),_:1}),l(s,{cols:"0",md:"3"})]),_:1}),l(k,{dense:""},{default:o(()=>[l(s,{cols:"12",md:"9"},{default:o(()=>[l(P,{disabled:We(),loading:te.value,class:"w-100",onClick:Ze},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.button.create")),1)]),_:1},8,["disabled","loading"])]),_:1}),l(s,{cols:"0",md:"3"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1})]),_:1}),l(Bl,{order:ze.value,onDone:_l},null,8,["order"])]),_:1},512)}}}),$t=Jl($a,[["__scopeId","data-v-bfb7e255"]]);export{$t as default};
