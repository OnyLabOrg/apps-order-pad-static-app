import{a as $l,$ as n}from"./TranslationUtil-CDY0a4uU.js";import{d as hl,r as m,X as Vl,G as Cl,ai as Al,c as le,e as V,b as l,v as p,m as t,f as o,ah as F,a as _l,o as U,t as y,dm as g,g as O,$ as Y,F as Se,i as nl,l as ae,aZ as kl,H as Tl}from"./index-BTJzwLw-.js";import{_ as El}from"./AppAutocomplete.vue_vue_type_script_setup_true_lang-3koFNQi8.js";import{_ as Ul}from"./AppTextarea.vue_vue_type_script_setup_true_lang-CJRCwAoS.js";import{_ as wl}from"./AppSelect.vue_vue_type_script_setup_true_lang-8bGoDz9V.js";import{_ as Sl}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-Dy3ng08H.js";import{_ as Ll}from"./AppTextField.vue_vue_type_script_setup_true_lang-DwuvN6eB.js";import{_ as Il}from"./AppCombobox.vue_vue_type_script_setup_true_lang-BB4ble-t.js";import{_ as Dl}from"./AppSelectContext.vue_vue_type_script_setup_true_lang-BNL6fpSN.js";import{D as Le,d as w,u as Nl,c as Ie}from"./PriceUtil-C-Vjqd71.js";import{c as $}from"./common-api.web.min-rTQUY9Dn.js";import{b as Kl,c as Rl,d as Hl,h as ne,a as se}from"./Http-DyCMnVwC.js";import{u as Ol}from"./account-CwaUsJXa.js";import{$ as re}from"./api-CljGITsQ.js";import{V as k,a as s}from"./VRow-DJ8q3BpO.js";import{V as De,c as Ne}from"./VCard-Dqa_2QKe.js";import{V as Ke}from"./VCardText-BHj4IAqC.js";import{V as sl}from"./VCheckbox-DAdnX0OK.js";import{a as Fl,V as Re}from"./VTabs-D93WHYOF.js";import{V as ql,a as He}from"./VWindowItem-BLYkJ0yB.js";import{V as Pl}from"./VTextField-DJURhlgU.js";import{V as Oe}from"./VSpacer-CWBoDyE-.js";import{V as Yl}from"./VSelect-C0M7Jt3m.js";import{_ as jl}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./filter-D47CgkrH.js";import"./form-BeMOW-sf.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-CbO5tgH9.js";import"./ssrBoot-Dh6kibGg.js";import"./VImg-CwYBG7XQ.js";import"./VAvatar-CGAC7Bsv.js";import"./VDivider-DVDcduyL.js";import"./VMenu-B58_nNX7.js";import"./VOverlay-BSI-O4Ku.js";import"./easing-Bybner-F.js";import"./delay-CHoYsI0-.js";import"./lazy-D3VtSbPJ.js";import"./scopeId-DhLpB2cu.js";import"./dialog-transition-CAej9op4.js";import"./VCheckboxBtn-DiiLrPwB.js";import"./VSelectionControl-C6MpvfGw.js";import"./VChip-D22TUTXp.js";import"./VSlideGroup-wQ4L9Hdw.js";/* empty css                   */import"./VCounter-aJ9LkKwV.js";import"./VField-B2rOsho7.js";import"./VInput-D5bJ2Xmo.js";import"./index-CvOPxmL5.js";/* empty css              */const zl={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},Bl={class:"d-flex flex-column justify-center"},Ml={class:"text-h4 mb-1"},Gl={class:"text-body-1"},Wl={class:"d-flex gap-4 align-center flex-wrap"},Xl={class:"pe-3"},Zl={class:"text-truncate font-weight-medium text-start"},Jl={class:"text-truncate font-weight-medium text-start"},Ql={class:"text-truncate font-weight-medium text-start"},xl={class:"ps-md-3"},ea={class:"ps-md-3"},la={class:"d-flex flex-sm-row flex-column flex-wrap justify-space-between gap-x-6 gap-y-4"},aa={class:"flex-grow-1"},ta={class:"flex-grow-1"},oa={class:"ps-md-3"},da={class:"d-flex flex-sm-row flex-column flex-wrap justify-space-between gap-x-6 gap-y-4"},na={class:"flex-grow-1"},sa={class:"flex-grow-1"},ra={class:"mt-5"},rl=1e3,ia=hl({__name:"add",setup(ua){var dl;const ie=Le.local().toISODate(),Fe=$l("common.country"),qe=Object.keys(Fe).map(e=>{var a,i;return{code:e,label:(i=(a=Fe[e])==null?void 0:a.body)==null?void 0:i.static}}).filter(e=>e.label!==void 0),A=((dl=Ol().getCurrentAccount)==null?void 0:dl.currency)??$.Api.HubriseCurrencyCode.EUR,_=m(),ue=m(),L=m();let Pe=[],H=[],me={},S={};const I=m([{}]),ce=m(),pe=m(),ve=m(`0.00 ${A}`),Ye=m([{value:`0.00 ${A}`,name:w(`0.00 ${A}`)},{value:`1.00 ${A}`,name:w(`1.00 ${A}`)},{value:`2.00 ${A}`,name:w(`2.00 ${A}`)},{value:`3.00 ${A}`,name:w(`3.00 ${A}`)},{value:`4.00 ${A}`,name:w(`4.00 ${A}`)},{value:`5.00 ${A}`,name:w(`5.00 ${A}`)}]),j=m(),z=m(),B=m(),M=m(),T=m(),G=m(!0),D=m(),W=m(!0),X=m(!1),Z=m(!1),K=m($.Api.HubriseServiceType.DELIVERY),fe=Le.local().toISODate(),ge=Le.local().toISOTime({suppressSeconds:!0,suppressMilliseconds:!0,includeOffset:!1}),ye=m(fe),be=m(ge),je=m(!1),$e=m(),J=m(),q=m(),te=m(),Q=m(),x=m(),R=m(),he=m(),Ve=m(),Ce=m(),Ae=m(fe),_e=m(ge),ke=m(fe),Te=m(ge),Ee=m(),P=m(!1),ze=e=>{typeof e=="string"||e===null||(T.value=e.phone,z.value=e.first_name,B.value=e.last_name,M.value=e.company_name,T.value=e.phone,G.value=e.sms_marketing??!1,D.value=e.email,W.value=e.email_marketing??!1)},Be=()=>{j.value=[],z.value=void 0,B.value=void 0,M.value=void 0,T.value=void 0,G.value=!0,D.value=void 0,W.value=!0},il=()=>{var e;typeof T.value!="string"||T.value.length<5||(X.value=!0,re(`customers/search?phone=${encodeURIComponent(T.value)}&customerListId=${String((e=ee.getCurrentCustomerList)==null?void 0:e.id)}`,{method:"GET",onResponseError({response:a}){X.value=!1,ne(a)}}).then(a=>{X.value=!1,j.value=a.customers}).catch(a=>{X.value=!1,se(a)}))},ul=()=>{var e;typeof D.value!="string"||D.value.length<5||(Z.value=!0,re(`customers/search?email=${encodeURIComponent(D.value)}&customerListId=${String((e=ee.getCurrentCustomerList)==null?void 0:e.id)}`,{method:"GET",onResponseError({response:a}){Z.value=!1,ne(a)}}).then(a=>{Z.value=!1,j.value=a.customers}).catch(a=>{Z.value=!1,se(a)}))},ml=()=>{I.value===void 0||I.value===null||(I.value=I.value.filter(e=>{var a;return e.options=(a=e.options)==null?void 0:a.filter(i=>"id"in i&&i.id!==void 0&&i.id!==null),"id"in e&&e.id!==void 0&&e.id!==null}))},Me=()=>{var i,v,c,h,N,r;let e;switch(K.value){case $.Api.HubriseServiceType.DELIVERY:e=Ie(ye.value,be.value,(v=(i=_.value)==null?void 0:i.timezone)==null?void 0:v.name);break;case $.Api.HubriseServiceType.COLLECTION:e=Ie(Ae.value,_e.value,(h=(c=_.value)==null?void 0:c.timezone)==null?void 0:h.name);break;case $.Api.HubriseServiceType.EAT_IN:e=Ie(ke.value,Te.value,(r=(N=_.value)==null?void 0:N.timezone)==null?void 0:r.name);break}const a={first_name:z.value,last_name:B.value,company_name:M.value,email:D.value,email_marketing:W.value,phone:T.value,sms_marketing:G.value};return K.value===$.Api.HubriseServiceType.DELIVERY&&(a.address_1=q.value,a.address_2=te.value,a.postal_code=x.value,a.city=Q.value,a.country=R.value,a.latitude=he.value,a.longitude=Ve.value,a.delivery_notes=Ce.value??void 0),{service_type:K.value,table_name:Ee.value??void 0,expected_time:e??void 0,customer:a,items:I.value,customer_notes:ce.value,seller_notes:pe.value}},Ue=Vl(()=>{const e=new $.Api.TotalHubriseCalculator().calculateTotals(Me(),A);return ve.value=e.deliveryFee,e}),Ge=()=>{var i,v;const e=(i=we.getCurrentLocation)==null?void 0:i.id;if(e===void 0)return;const a=(v=ee.getCurrentCustomerList)==null?void 0:v.id;a!==void 0&&(P.value=!0,ml(),re("orderpad/order",{method:"POST",body:{locationId:e,customerListId:a,...Me()},onResponseError({response:c}){P.value=!1,ne(c)}}).then(c=>{var h;P.value=!1,alert(`Order ${(h=c.order)==null?void 0:h.ref} created!`),window.location.reload()}).catch(c=>{P.value=!1,se(c)}))},We=e=>{if(typeof e=="object"&&e!==null)switch(K.value){case $.Api.HubriseServiceType.DELIVERY:return`${e.delivery}%`;case $.Api.HubriseServiceType.COLLECTION:return`${e.collection}%`;case $.Api.HubriseServiceType.EAT_IN:return`${e.eat_in}%`}return""},cl=()=>{var a,i,v,c,h,N;if(L.value===void 0||L.value===null)return;const e={};(v=(i=(a=L.value)==null?void 0:a.data)==null?void 0:i.categories)==null||v.forEach(r=>{e[r.id]=r.name}),H=((N=(h=(c=L.value)==null?void 0:c.data)==null?void 0:h.products)==null?void 0:N.map(r=>{var d,u;const b=r.ref??(((d=r.skus)==null?void 0:d.length)===1&&(!Array.isArray(r.skus[0].option_list_ids)||r.skus[0].option_list_ids.length===0)?r.skus[0].ref:null),C=((u=r.skus)==null?void 0:u.length)===1&&(!Array.isArray(r.skus[0].option_list_ids)||r.skus[0].option_list_ids.length===0)?r.skus[0].price:$.Api.HubrisePriceUtil.multiply(r.skus[0].price,0);return{id:r.id,sku_ref:b,category:e[r.category_id],product_name:r.name,quantity:1,tax_rate:r.tax_rate,price:C,customer_notes:void 0}}).sort((r,b)=>{var C,d;return((C=r.category)==null?void 0:C.localeCompare(b.category??""))||((d=r.name)==null?void 0:d.localeCompare(b.name??""))}))??[],Pe=(H==null?void 0:H.filter(r=>r.sku_ref!==void 0&&r.sku_ref!==null))??[]},pl=()=>{var a,i,v,c,h,N;if(L.value===void 0||L.value===null)return;const e={};(v=(i=(a=L.value)==null?void 0:a.data)==null?void 0:i.option_lists)==null||v.forEach(r=>{e[r.id]=r}),S={},(N=(h=(c=L.value)==null?void 0:c.data)==null?void 0:h.products)==null||N.forEach(r=>{S[r.id]=[],!(!Array.isArray(r.skus)||r.skus.length===0||!Array.isArray(r.skus[0].option_list_ids)||r.skus[0].option_list_ids.length===0)&&(r.skus.forEach(b=>{if(Array.isArray(b.option_list_ids)&&b.option_list_ids.length>0)b.option_list_ids.forEach(C=>{const d=e[C];d!==void 0&&(!Array.isArray(d.options)||d.options.length===0||d.options.forEach(u=>{const E=$.Api.HubrisePriceUtil.sum([b.price??null,u.price??null]);S[r.id].push({id:`${b.id}-${d.id}-${u.id}`,ref:u.ref??null,option_list_name:d.name,name:u.name,quantity:1,price:E})}))});else{const C=b.price??null;S[r.id].push({id:b.id,ref:b.ref??null,name:b.name,quantity:1,price:C})}}),S[r.id].sort((b,C)=>{var d;return(d=b.name)==null?void 0:d.localeCompare(C.name??"")}))}),me={},Object.keys(S).forEach(r=>{var b;me[r]=((b=S[r])==null?void 0:b.filter(C=>C.ref!==void 0&&C.ref!==null))??[]})},Xe=()=>{I.value.push({})},vl=e=>{const a=I.value.findIndex(i=>i===e);a>=0&&I.value.splice(a,1)},Ze=e=>{Array.isArray(e.options)||(e.options=[]),e.options.push({})},fl=(e,a)=>{const i=e.options.findIndex(v=>v===a);i>=0&&e.options.splice(i,1)},Je=(e,a)=>{const i=H==null?void 0:H.find(v=>v.id===e);i!==void 0&&($.Util.ObjectUtil.update(a,i),Array.isArray(S[e])&&S[e].length>0&&Ze(a))},Qe=(e,a,i)=>{var c;const v=(c=S[e])==null?void 0:c.find(h=>h.id===a);v!==void 0&&$.Util.ObjectUtil.update(i,v)},xe=e=>{const a=e.target;a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.isContentEditable||(e.key==="+"||e.key==="Add"||e.code==="NumpadAdd"||e.shiftKey&&(e.key==="="||e.code==="Equal"))&&Xe()},f=e=>{if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();const a=Array.from(document.querySelectorAll('input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex="-1"])')).filter(c=>c.offsetParent!==null),i=a.indexOf(e.target),v=a[i+1];v&&v.focus()}};let oe=Date.now(),de;const el=()=>{var v;const e=q.value;if(typeof e!="string"||e.length<3||/^[\d\s,]+$/.test(e))return;if(clearTimeout(de),Date.now()<oe+rl){de=setTimeout(()=>{de=void 0,el()},Math.max(0,rl-(Date.now()-oe)));return}const a=(v=kl("language",Tl.app.i18n.defaultLocale))==null?void 0:v.value,i=R.value??void 0;J.value=!0,oe=Date.now(),re(`address/search?text=${encodeURIComponent(e)}&language=${a}${i!==void 0?`&country=${String(i)}`:""}`,{method:"GET",onResponseError({response:c}){J.value=!1,ne(c)}}).then(c=>{clearTimeout(de),J.value=!1,$e.value=c.addresses,je.value=!0,oe=Date.now()}).catch(c=>{J.value=!1,se(c)})},gl=e=>{var a;return typeof e!="object"||e===null?e:[e.address_1,e.city,e.postal_code,(a=e.country)==null?void 0:a.toUpperCase()].filter(i=>i!==void 0).join(", ")},yl=e=>{var i;if(typeof e=="string"||e===null)return;q.value=e.address_1,Q.value=e.city,x.value=e.postal_code,he.value=e.latitude,Ve.value=e.longitude;const a=(i=e.country)==null?void 0:i.toUpperCase();a!==void 0&&a!==R.value&&qe.find(v=>v.code===a)&&(R.value=a)},bl=()=>{var e;$e.value=[],q.value=void 0,te.value=void 0,Q.value=void 0,x.value=void 0,he.value=void 0,Ve.value=void 0,typeof((e=_.value)==null?void 0:e.country)=="string"?R.value=_.value.country:R.value=void 0},ll=e=>{var a;_.value=e,typeof((a=_.value)==null?void 0:a.country)=="string"&&(R.value=_.value.country)},al=e=>{ue.value=e},tl=e=>{L.value=e,cl(),pl()},we=Kl(),ee=Rl(),ol=Hl();return Cl(()=>{Nl("page.order.add.title"),window.addEventListener("keydown",xe),we.onCurrentLocationChange(ll),ee.onCurrentCustomerListChange(al),ol.onCurrentCatalogChange(tl)}),Al(()=>{window.removeEventListener("keydown",xe),we.offCurrentLocationChange(ll),ee.offCurrentCustomerListChange(al),ol.offCurrentCatalogChange(tl)}),(e,a)=>{const i=Dl,v=Il,c=Ll,h=Sl,N=wl,r=Ul,b=El,C=_l("IconBtn");return U(),le("div",null,[V("div",zl,[V("div",Bl,[V("h4",Ml,p(("$t"in e?e.$t:t(n))("page.order.add.title")),1),V("div",Gl,p(("$t"in e?e.$t:t(n))("page.order.add.subtitle")),1)]),V("div",Wl,[l(i,{"enable-catalogs":"","enable-customer-lists":"","enable-locations":""}),l(F,{color:"secondary",onclick:"window.location = '/'",variant:"tonal"},{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.button.discard")),1)]),_:1}),l(F,{disabled:!T.value||I.value.length===0,loading:P.value,onClick:Ge},{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.button.create")),1)]),_:1},8,["disabled","loading"])])]),l(k,{dense:""},{default:o(()=>[l(s,{cols:"12",md:"4"},{default:o(()=>[l(De,{disabled:!_.value||!ue.value,loading:!_.value||!ue.value,class:"mb-6 fill-height"},{default:o(()=>[l(Ne,null,{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.section.customer.title")),1)]),_:1}),l(Ke,{class:"pb-0"},{default:o(()=>[l(k,{dense:""},{default:o(()=>[l(s,{cols:"10"},{default:o(()=>[l(v,{modelValue:T.value,"onUpdate:modelValue":[a[0]||(a[0]=d=>T.value=d),ze],items:j.value,label:("$t"in e?e.$t:t(n))("page.order.add.section.customer.phone.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.customer.phone.placeholder"),clearable:"","item-title":"phone","item-value":"id",onKeyup:g(f,["enter"]),"onClick:clear":Be},null,8,["modelValue","items","label","placeholder"])]),_:1}),l(s,{class:"text-center",cols:"2"},{default:o(()=>[l(F,{disabled:!T.value||T.value.length<5,loading:X.value,icon:"bx-search",rounded:"",size:"small",onClick:il},null,8,["disabled","loading"])]),_:1}),l(s,{cols:"10"},{default:o(()=>[l(v,{modelValue:D.value,"onUpdate:modelValue":[a[1]||(a[1]=d=>D.value=d),ze],items:j.value,label:("$t"in e?e.$t:t(n))("page.order.add.section.customer.email.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.customer.email.placeholder"),clearable:"","item-title":"email","item-value":"id",onKeyup:g(f,["enter"]),"onClick:clear":Be},null,8,["modelValue","items","label","placeholder"])]),_:1}),l(s,{class:"text-center",cols:"2"},{default:o(()=>[l(F,{disabled:!D.value||D.value.length<5,loading:Z.value,icon:"bx-search",rounded:"",size:"small",onClick:ul},null,8,["disabled","loading"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(sl,{modelValue:G.value,"onUpdate:modelValue":a[2]||(a[2]=d=>G.value=d),label:("$t"in e?e.$t:t(n))("page.order.add.section.customer.smsMarketing.label"),onKeyup:g(f,["enter"])},null,8,["modelValue","label"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(sl,{modelValue:W.value,"onUpdate:modelValue":a[3]||(a[3]=d=>W.value=d),label:("$t"in e?e.$t:t(n))("page.order.add.section.customer.emailMarketing.label"),onKeyup:g(f,["enter"])},null,8,["modelValue","label"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(c,{modelValue:z.value,"onUpdate:modelValue":a[4]||(a[4]=d=>z.value=d),label:("$t"in e?e.$t:t(n))("page.order.add.section.customer.firstName.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.customer.firstName.placeholder"),class:"mb-3",onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(c,{modelValue:B.value,"onUpdate:modelValue":a[5]||(a[5]=d=>B.value=d),label:("$t"in e?e.$t:t(n))("page.order.add.section.customer.lastName.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.customer.lastName.placeholder"),class:"mb-3",onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12"},{default:o(()=>[l(c,{modelValue:M.value,"onUpdate:modelValue":a[6]||(a[6]=d=>M.value=d),label:("$t"in e?e.$t:t(n))("page.order.add.section.customer.company.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.customer.company.placeholder"),class:"mb-3",onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1}),l(s,{cols:"12",md:"8"},{default:o(()=>[l(De,{disabled:!_.value,loading:!_.value,class:"action-card mb-6 fill-height"},{default:o(()=>[l(Ne,null,{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.section.action.title")),1)]),_:1}),l(Ke,{class:"pb-0"},{default:o(()=>[l(k,{dense:""},{default:o(()=>[l(s,{cols:"12",md:"3"},{default:o(()=>[V("div",Xl,[l(Fl,{modelValue:K.value,"onUpdate:modelValue":a[7]||(a[7]=d=>K.value=d),class:"v-tabs-pill",color:"primary",direction:"vertical"},{default:o(()=>[(U(),O(Re,{key:0,value:t($.Api).HubriseServiceType.DELIVERY},{default:o(()=>[l(Y,{class:"me-2",icon:"mdi-moped"}),V("div",Zl,p(("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.title")),1)]),_:1},8,["value"])),(U(),O(Re,{key:1,value:t($.Api).HubriseServiceType.COLLECTION},{default:o(()=>[l(Y,{class:"me-2",icon:"bx-walk"}),V("div",Jl,p(("$t"in e?e.$t:t(n))("page.order.add.section.action.pickup.title")),1)]),_:1},8,["value"])),(U(),O(Re,{key:2,value:t($.Api).HubriseServiceType.EAT_IN},{default:o(()=>[l(Y,{class:"me-2",icon:"ic-baseline-table-bar"}),V("div",Ql,p(("$t"in e?e.$t:t(n))("page.order.add.section.action.eatin.title")),1)]),_:1},8,["value"]))]),_:1},8,["modelValue"])])]),_:1}),l(s,{cols:"12",md:"9"},{default:o(()=>[l(ql,{modelValue:K.value,"onUpdate:modelValue":a[21]||(a[21]=d=>K.value=d),touch:!1,class:"w-100"},{default:o(()=>[l(He,{value:t($.Api).HubriseServiceType.DELIVERY},{default:o(()=>[V("div",xl,[l(k,{class:"v-row-small"},{default:o(()=>[l(s,{cols:"12",md:"6"},{default:o(()=>[l(h,{modelValue:ye.value,"onUpdate:modelValue":a[8]||(a[8]=d=>ye.value=d),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",minDate:t(ie)},label:("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.date.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.date.placeholder"),onKeyup:g(f,["enter"])},null,8,["modelValue","config","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(h,{modelValue:be.value,"onUpdate:modelValue":a[9]||(a[9]=d=>be.value=d),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:10},label:("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.time.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.time.placeholder"),format:"24h",onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(v,{modelValue:q.value,"onUpdate:modelValue":[a[10]||(a[10]=d=>q.value=d),yl],"item-title":gl,items:$e.value,label:("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.address1.label"),loading:J.value,menu:je.value,placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.address1.placeholder"),clearable:"","item-value":"id",onInput:el,onKeyup:g(f,["enter"]),"onClick:clear":bl},null,8,["modelValue","items","label","loading","menu","placeholder"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(c,{modelValue:te.value,"onUpdate:modelValue":a[11]||(a[11]=d=>te.value=d),label:("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.address2.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.address2.placeholder"),onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"4"},{default:o(()=>[l(c,{modelValue:Q.value,"onUpdate:modelValue":a[12]||(a[12]=d=>Q.value=d),label:("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.city.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.city.placeholder"),onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"4"},{default:o(()=>[l(c,{modelValue:x.value,"onUpdate:modelValue":a[13]||(a[13]=d=>x.value=d),label:("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.zipcode.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.zipcode.placeholder"),onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"4"},{default:o(()=>[l(N,{modelValue:R.value,"onUpdate:modelValue":a[14]||(a[14]=d=>R.value=d),items:t(qe),label:("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.country.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.country.placeholder"),"item-title":"label","item-value":"code",onKeyup:g(f,["enter"])},null,8,["modelValue","items","label","placeholder"])]),_:1}),l(s,{class:"not-small",cols:"12"},{default:o(()=>[l(r,{modelValue:Ce.value,"onUpdate:modelValue":a[15]||(a[15]=d=>Ce.value=d),label:("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.notes.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.action.delivery.notes.placeholder"),"auto-grow":"",counter:"",maxlength:"300",rows:"1",onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1})])]),_:1},8,["value"]),l(He,{value:t($.Api).HubriseServiceType.COLLECTION},{default:o(()=>[V("div",ea,[V("div",la,[V("div",aa,[l(h,{modelValue:Ae.value,"onUpdate:modelValue":a[16]||(a[16]=d=>Ae.value=d),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",minDate:t(ie)},label:("$t"in e?e.$t:t(n))("page.order.add.section.action.pickup.date.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.action.pickup.date.placeholder"),onKeyup:g(f,["enter"])},null,8,["modelValue","config","label","placeholder"])]),V("div",ta,[l(h,{modelValue:_e.value,"onUpdate:modelValue":a[17]||(a[17]=d=>_e.value=d),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:10},label:("$t"in e?e.$t:t(n))("page.order.add.section.action.pickup.time.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.action.pickup.time.placeholder"),onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])])])])]),_:1},8,["value"]),l(He,{value:t($.Api).HubriseServiceType.EAT_IN},{default:o(()=>[V("div",oa,[V("div",da,[V("div",na,[l(h,{modelValue:ke.value,"onUpdate:modelValue":a[18]||(a[18]=d=>ke.value=d),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",minDate:t(ie)},label:("$t"in e?e.$t:t(n))("page.order.add.section.action.eatin.date.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.action.eatin.date.placeholder"),onKeyup:g(f,["enter"])},null,8,["modelValue","config","label","placeholder"])]),V("div",sa,[l(h,{modelValue:Te.value,"onUpdate:modelValue":a[19]||(a[19]=d=>Te.value=d),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:10},label:("$t"in e?e.$t:t(n))("page.order.add.section.action.eatin.time.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.action.eatin.time.placeholder"),onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])])]),V("div",ra,[l(Pl,{modelValue:Ee.value,"onUpdate:modelValue":a[20]||(a[20]=d=>Ee.value=d),label:("$t"in e?e.$t:t(n))("page.order.add.section.action.eatin.table.label"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.action.eatin.table.placeholder"),variant:"underlined",onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])])])]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1}),l(s,{class:"pt-0 mt-0",cols:"12",md:"12"},{default:o(()=>[l(De,{disabled:!_.value||!L.value,loading:!_.value||!L.value},{default:o(()=>[l(Ne,null,{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.section.item.title")),1)]),_:1}),l(Ke,null,{default:o(()=>[l(k,{dense:""},{default:o(()=>[l(s,{cols:"2",md:"2"},{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.section.item.reference")),1)]),_:1}),l(s,{cols:"2",md:"4"},{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.section.item.name")),1)]),_:1}),l(s,{cols:"2",md:"1"},{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.section.item.quantity")),1)]),_:1}),l(s,{cols:"2",md:"1"},{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.section.item.vat")),1)]),_:1}),l(s,{cols:"1",md:"1"},{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.section.item.price")),1)]),_:1}),l(s,{class:"text-center",cols:"2",md:"2"},{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.section.item.subtotal")),1)]),_:1}),l(s,{cols:"1",md:"1"})]),_:1}),(U(!0),le(Se,null,nl(I.value,d=>(U(),le(Se,{key:d.id},[l(k,{dense:""},{default:o(()=>[l(s,{cols:"4",md:"2"},{default:o(()=>[d.sku_ref!==null?(U(),O(b,{key:0,modelValue:d.sku_ref,"onUpdate:modelValue":[u=>d.sku_ref=u,u=>Je(u,d)],items:t(Pe),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.item.reference"),"item-title":"sku_ref","item-value":"id","no-data-text":"common.component.noData",onKeyup:g(f,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])):ae("",!0)]),_:2},1024),l(s,{cols:"6",md:"4"},{default:o(()=>[l(b,{modelValue:d.product_name,"onUpdate:modelValue":[u=>d.product_name=u,u=>Je(u,d)],items:t(H),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.item.name"),"item-title":"product_name","item-value":"id","no-data-text":"common.component.noData",onKeyup:g(f,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])]),_:2},1024),l(s,{cols:"2",md:"1"},{default:o(()=>[l(c,{modelValue:d.quantity,"onUpdate:modelValue":u=>d.quantity=u,clearable:!1,min:"1",placeholder:"1",type:"number",onKeyup:g(f,["enter"])},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(s,{class:"align-self-end",cols:"3",md:"1"},{default:o(()=>[y(p(We(d.tax_rate)),1)]),_:2},1024),l(s,{class:"align-self-end",cols:"3",md:"1"},{default:o(()=>[y(p(t(w)(d.price)),1)]),_:2},1024),l(s,{class:"align-self-end text-center",cols:"3",md:"2"},{default:o(()=>[y(p(t(w)(t($.Api).HubrisePriceUtil.multiply(d.price,d.quantity))),1)]),_:2},1024),l(s,{class:"px-0",cols:"3",md:"1"},{default:o(()=>[l(C,{"x-small":"",onClick:u=>d.customer_notes=d.customer_notes===void 0?null:void 0},{default:o(()=>[l(Y,{icon:"bx-edit"})]),_:2},1032,["onClick"]),l(C,{onClick:u=>vl(d)},{default:o(()=>[l(Y,{icon:"bx-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),(U(!0),le(Se,null,nl(d.options,u=>(U(),le("div",{key:u.ref},[l(k,{dense:""},{default:o(()=>[l(s,{class:"d-flex align-self-end",cols:"4",md:"2"},{default:o(()=>[l(Oe),u.ref!==null?(U(),O(b,{key:0,modelValue:u.ref,"onUpdate:modelValue":[E=>u.ref=E,E=>Qe(d.id,E,u)],items:t(me)[d.id],placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.item.reference"),"item-title":"ref","item-value":"id","no-data-text":"common.component.noData",onKeyup:g(f,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])):ae("",!0)]),_:2},1024),l(s,{class:"d-flex align-self-end",cols:"6",md:"4"},{default:o(()=>[l(Oe),l(b,{modelValue:u.name,"onUpdate:modelValue":[E=>u.name=E,E=>Qe(d.id,E,u)],items:t(S)[d.id],placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.item.name"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData",onKeyup:g(f,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])]),_:2},1024),l(s,{class:"d-flex align-self-end",cols:"2",md:"1"},{default:o(()=>[l(c,{modelValue:u.quantity,"onUpdate:modelValue":E=>u.quantity=E,clearable:!1,min:"1",placeholder:"1",type:"number",onKeyup:g(f,["enter"])},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(s,{class:"align-self-end",cols:"3",md:"1"},{default:o(()=>[y(p(We(d.tax_rate)),1)]),_:2},1024),l(s,{class:"align-self-end",cols:"3",md:"1"},{default:o(()=>[y(p(t(w)(u.price)),1)]),_:2},1024),l(s,{class:"align-self-end text-center",cols:"3",md:"2"},{default:o(()=>[y(p(t(w)(t($.Api).HubrisePriceUtil.multiply(u.price,u.quantity))),1)]),_:2},1024),l(s,{cols:"3",md:"1"},{default:o(()=>[l(C,{onClick:E=>fl(d,u)},{default:o(()=>[l(Y,{icon:"bx-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),l(k,{dense:""},{default:o(()=>[l(s,{cols:"0",md:"2"}),l(s,{cols:"12",md:"5"},{default:o(()=>{var u;return[((u=t(S)[d.id])==null?void 0:u.length)>0?(U(),O(F,{key:0,class:"mt-6",color:"secondary","prepend-icon":"bx-plus",size:"x-small",onClick:E=>Ze(d)},{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.section.item.button.add.itemOption")),1)]),_:2},1032,["onClick"])):ae("",!0)]}),_:2},1024),l(s,{cols:"12",md:"4"},{default:o(()=>[d.customer_notes!==void 0?(U(),O(r,{key:0,modelValue:d.customer_notes,"onUpdate:modelValue":u=>d.customer_notes=u,label:("$t"in e?e.$t:t(n))("page.order.add.section.item.itemNotes"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.item.itemNotes"),"auto-grow":"",counter:"",maxlength:"300",rows:"1",onKeyup:g(f,["enter"])},null,8,["modelValue","onUpdate:modelValue","label","placeholder"])):ae("",!0)]),_:2},1024),l(s,{cols:"0",md:"1"})]),_:2},1024)],64))),128)),l(k,{dense:""},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[l(F,{class:"mt-6",color:"secondary","prepend-icon":"bx-plus",size:"small",onClick:Xe},{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.section.item.button.add.item")),1)]),_:1})]),_:1}),l(s,{class:"px-4 py-8",cols:"6",md:"3"},{default:o(()=>[l(r,{modelValue:ce.value,"onUpdate:modelValue":a[22]||(a[22]=d=>ce.value=d),label:("$t"in e?e.$t:t(n))("page.order.add.section.item.customerNotes"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.item.customerNotes"),"auto-grow":"",counter:"",maxlength:"500",rows:"4",onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{class:"px-4 py-8",cols:"6",md:"3"},{default:o(()=>[l(Oe),l(r,{modelValue:pe.value,"onUpdate:modelValue":a[23]||(a[23]=d=>pe.value=d),label:("$t"in e?e.$t:t(n))("page.order.add.section.item.sellerNotes"),placeholder:("$t"in e?e.$t:t(n))("page.order.add.section.item.sellerNotes"),"auto-grow":"",counter:"",maxlength:"500",rows:"4",onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"0",md:"1"}),l(s,{cols:"12",md:"5"},{default:o(()=>[l(k,{dense:""},{default:o(()=>[l(s,{class:"align-self-end",cols:"6",md:"5"},{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.section.item.subtotal")),1)]),_:1}),l(s,{class:"text-center",cols:"6",md:"4"},{default:o(()=>[y(p(t(w)(t(Ue).subtotal)),1)]),_:1}),l(s,{cols:"0",md:"3"})]),_:1}),l(k,{dense:""},{default:o(()=>[l(s,{class:"align-self-end",cols:"6",md:"5"},{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.section.item.minimumOrderFee")),1)]),_:1}),l(s,{class:"text-center",cols:"6",md:"4"},{default:o(()=>[y(p(t(w)(t(Ue).minimumOrderFee)),1)]),_:1}),l(s,{cols:"0",md:"3"})]),_:1}),K.value===t($.Api).HubriseServiceType.DELIVERY?(U(),O(k,{key:0,dense:""},{default:o(()=>[l(s,{class:"align-self-end",cols:"6",md:"5"},{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.section.item.deliveryFee")),1)]),_:1}),l(s,{class:"text-center pa-0",cols:"6",md:"4"},{default:o(()=>[l(Yl,{modelValue:ve.value,"onUpdate:modelValue":a[24]||(a[24]=d=>ve.value=d),disabled:!0,items:Ye.value,loading:Ye.value.length===0,class:"d-inline-flex","item-title":"name","item-value":"value",variant:"plain"},null,8,["modelValue","items","loading"])]),_:1}),l(s,{cols:"0",md:"3"})]),_:1})):ae("",!0),l(k,{dense:""},{default:o(()=>[l(s,{class:"align-self-end",cols:"6",md:"5"},{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.section.item.total")),1)]),_:1}),l(s,{class:"text-center",cols:"6",md:"4"},{default:o(()=>[y(p(t(w)(t(Ue).total)),1)]),_:1}),l(s,{cols:"0",md:"3"})]),_:1}),l(k,{dense:""},{default:o(()=>[l(s,{cols:"12",md:"9"},{default:o(()=>[l(F,{disabled:!T.value||I.value.length===0,loading:P.value,class:"w-100",onClick:Ge},{default:o(()=>[y(p(("$t"in e?e.$t:t(n))("page.order.add.button.create")),1)]),_:1},8,["disabled","loading"])]),_:1}),l(s,{cols:"0",md:"3"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1})]),_:1})])}}}),nt=jl(ia,[["__scopeId","data-v-1c97a335"]]);export{nt as default};
