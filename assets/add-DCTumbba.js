import{a as wl,$ as d}from"./TranslationUtil-txEdll2G.js";import{d as Sl,r as u,X as Il,G as Ll,ai as Dl,g as D,f as n,a as Nl,o as C,e as V,b as l,v as c,m as o,ah as q,t as y,di as v,$ as B,l as O,c as M,F as Ie,i as vl,aZ as Kl,H as Rl}from"./index-Goc0oEgv.js";import{_ as Hl}from"./AppAutocomplete.vue_vue_type_script_setup_true_lang-2ZPqZ4g2.js";import{_ as Ol}from"./AppTextarea.vue_vue_type_script_setup_true_lang-BTgkm3rC.js";import{_ as Fl}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-BEiWpeyj.js";import{_ as jl}from"./AppSelect.vue_vue_type_script_setup_true_lang-NLDrCBSp.js";import{_ as Pl}from"./AppTextField.vue_vue_type_script_setup_true_lang-BljN_7Za.js";import{_ as ql}from"./AppCombobox.vue_vue_type_script_setup_true_lang-BJXVhZhP.js";import{_ as Yl}from"./AppSelectContext.vue_vue_type_script_setup_true_lang-NdvlyDJv.js";import{D as Le,d as U,c as De}from"./PriceUtil-Dy0-oThm.js";import{c as $}from"./common-api.web.min-rTQUY9Dn.js";import{u as zl}from"./usePageTitle-CZzLS4nK.js";import{a as Bl,d as Ml,e as Gl,f as Wl,h as Ne,b as Ke}from"./Http-D6ZRkbOf.js";import{_ as Xl}from"./dialog-create-order.vue_vue_type_script_setup_true_lang-CtthO2FU.js";import{$ as Re}from"./api-D2SRUUrg.js";import{V as Zl}from"./VForm--hpDYyMt.js";import{V as T,a as s}from"./VRow-Dxk3zYBv.js";import{V as He,c as Oe}from"./VCard-Hi3enb3A.js";import{V as Fe}from"./VCardText-ByLSNzFK.js";import{V as oe}from"./VCheckbox-DxB6cbE_.js";import{a as Jl,V as je}from"./VTabs-DKw6Z6eb.js";import{V as Ql,a as Pe}from"./VWindowItem-sy0sC05U.js";import{V as xl}from"./VTextField-CR04nTIp.js";import{V as qe}from"./VSpacer-d8Qv0KB5.js";import{V as ea}from"./VSelect-CGdljwSj.js";import{_ as la}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./filter-DviLzOwC.js";import"./form-Cvd7Z3nQ.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-CyQAikvn.js";import"./ssrBoot-C14YqjMk.js";import"./transition-Cejw4OVu.js";import"./VAvatar-Cno2X9OK.js";import"./VImg-CW4tn89Z.js";import"./VDivider-Bpy069mI.js";import"./VMenu-D5_xY20l.js";import"./VOverlay-CED38df1.js";import"./easing-Bybner-F.js";import"./delay-DzR6fN_p.js";import"./lazy-CS5zq6xB.js";import"./scopeId-DiYz2j46.js";import"./dialog-transition-Ceh94fV-.js";import"./VCheckboxBtn-CQq3jQWb.js";import"./VSelectionControl-CvSi2XYp.js";import"./VChip-DGP2AG5A.js";import"./VSlideGroup-nggss79z.js";/* empty css                   */import"./VCounter-BhwrUDpB.js";import"./VField-DcXQUFK4.js";import"./VInput-DB1JDESc.js";import"./alert-ue1KGXTe.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-Cz7J_CTO.js";import"./VDialog-DEnfXVPE.js";import"./index-CvOPxmL5.js";/* empty css              */const aa=Y=>typeof Y!="string"?!1:/^[\w.!#$%&'*+/=?^`{|}~-]+@[a-z0-9-]+(?:\.[a-z0-9-]+)*$/i.test(Y),ta=Y=>{if(typeof Y!="string")return!1;const P=Y.replace(/\s/g,"");return/^\+\d+(?:#\d+)?$/.test(P)||/^0\d{9}(?:#\d+)?$/.test(P)},oa={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},na={class:"d-flex flex-column justify-center"},da={class:"text-h4 mb-1"},sa={class:"text-body-1"},ra={class:"d-flex gap-4 align-center flex-wrap"},ia={class:"pe-3"},ua={class:"text-truncate font-weight-medium text-start"},ma={class:"text-truncate font-weight-medium text-start"},ca={class:"text-truncate font-weight-medium text-start"},pa={class:"ps-md-3"},va={class:"ps-md-3"},fa={class:"my-2"},ga={key:0,class:"d-flex flex-sm-row flex-column flex-wrap justify-space-between gap-x-6 gap-y-4"},ya={class:"flex-grow-1"},ba={class:"flex-grow-1"},$a={class:"ps-md-3"},Va={class:"mt-3"},ha={class:"mt-3"},Ca={key:0,class:"d-flex flex-sm-row flex-column flex-wrap justify-space-between gap-x-6 gap-y-4 mt-3"},Aa={class:"flex-grow-1"},ka={class:"flex-grow-1"},fl=1e3,_a=Sl({__name:"add",setup(Y){var pl;const P=Le.local().toISODate(),Ye=wl("common.country"),ze=Object.keys(Ye).map(e=>{var a,m;return{code:e,label:(m=(a=Ye[e])==null?void 0:a.body)==null?void 0:m.static}}).filter(e=>e.label!==void 0),k=((pl=Bl().getCurrentAccount)==null?void 0:pl.currency)??$.Api.HubriseCurrencyCode.EUR,_=u(),ue=u(),L=u();let Be=[],F=[],me={},w={};const Me=u(null),Ge=u({}),j=u([{}]),ce=u(),pe=u(),ve=u(`0.00 ${k}`),We=u([{value:`0.00 ${k}`,name:U(`0.00 ${k}`)},{value:`1.00 ${k}`,name:U(`1.00 ${k}`)},{value:`2.00 ${k}`,name:U(`2.00 ${k}`)},{value:`3.00 ${k}`,name:U(`3.00 ${k}`)},{value:`4.00 ${k}`,name:U(`4.00 ${k}`)},{value:`5.00 ${k}`,name:U(`5.00 ${k}`)}]),G=u(),fe=u(),W=u(),X=u(),Z=u(),N=u(),gl=[e=>!!e||ta(e)||d("page.order.add.section.customer.phone.rule.format")],J=u(!0),K=u(),yl=[e=>!e||aa(e)||d("page.order.add.section.customer.email.rule.format")],Q=u(!0),x=u(!1),ee=u(!1),R=u($.Api.HubriseServiceType.DELIVERY),S=u(!0),ge=Le.local().toISODate(),ye=Le.local().toISOTime({suppressSeconds:!0,suppressMilliseconds:!0,includeOffset:!1}),be=u(ge),$e=u(ye),Xe=u(!1),Ve=u(),le=u(),z=u(),ne=u(),ae=u(),te=u(),H=u(),he=u(),Ce=u(),Ae=u(),ke=u(ge),_e=u(ye),Te=u(ge),Ee=u(ye),Ue=u(),de=u(!1),Ze=e=>{typeof e=="string"||e===null||(fe.value=e.id,W.value=e.first_name,X.value=e.last_name,Z.value=e.company_name,N.value=e.phone,J.value=e.sms_marketing??!1,K.value=e.email,Q.value=e.email_marketing??!1)},we=()=>{G.value=[],fe.value=void 0,W.value=void 0,X.value=void 0,Z.value=void 0,N.value=void 0,J.value=!0,K.value=void 0,Q.value=!0},bl=e=>typeof e!="object"||e===null?e:[e.phone,[e.first_name,e.last_name].filter(a=>a!=null).join(" ")||void 0].filter(a=>a!=null).join(" - "),$l=()=>{var e;typeof N.value!="string"||N.value.length<5||(x.value=!0,Re(`customers/search?phone=${encodeURIComponent(N.value)}&customerListId=${String((e=ie.getCurrentCustomerList)==null?void 0:e.id)}`,{method:"GET",onResponseError({response:a}){x.value=!1,Ne(a)}}).then(a=>{x.value=!1,G.value=a.customers}).catch(a=>{x.value=!1,Ke(a)}))},Vl=e=>typeof e!="object"||e===null?e:[e.email,[e.first_name,e.last_name].filter(a=>a!=null).join(" ")||void 0].filter(a=>a!=null).join(" - "),hl=()=>{var e;typeof K.value!="string"||K.value.length<5||(ee.value=!0,Re(`customers/search?email=${encodeURIComponent(K.value)}&customerListId=${String((e=ie.getCurrentCustomerList)==null?void 0:e.id)}`,{method:"GET",onResponseError({response:a}){ee.value=!1,Ne(a)}}).then(a=>{ee.value=!1,G.value=a.customers}).catch(a=>{ee.value=!1,Ke(a)}))},Je=()=>{if(!(!Array.isArray(j.value)||j.value.length===0))return j.value.filter(e=>"id"in e&&e.id!==void 0&&e.id!==null).length===0},Qe=()=>{var m,g,f,I,A,i;let e;if(S.value===!1)switch(R.value){case $.Api.HubriseServiceType.DELIVERY:e=De(be.value,$e.value,(g=(m=_.value)==null?void 0:m.timezone)==null?void 0:g.name);break;case $.Api.HubriseServiceType.COLLECTION:e=De(ke.value,_e.value,(I=(f=_.value)==null?void 0:f.timezone)==null?void 0:I.name);break;case $.Api.HubriseServiceType.EAT_IN:e=De(Te.value,Ee.value,(i=(A=_.value)==null?void 0:A.timezone)==null?void 0:i.name);break}const a={id:fe.value,first_name:W.value,last_name:X.value,company_name:Z.value,phone:N.value,sms_marketing:J.value,email:K.value,email_marketing:Q.value};return R.value===$.Api.HubriseServiceType.DELIVERY&&(a.address_1=z.value,a.address_2=ne.value,a.postal_code=te.value,a.city=ae.value,a.country=H.value,a.latitude=he.value,a.longitude=Ce.value,a.delivery_notes=Ae.value??void 0),{service_type:R.value,table_name:Ue.value??void 0,expected_time:e??void 0,asap:S.value,customer:a,items:j.value,customer_notes:ce.value,seller_notes:pe.value}},Se=Il(()=>{const e=new $.Api.TotalHubriseCalculator().calculateTotals(Qe(),k);return ve.value=e.deliveryFee,e}),xe=async()=>{var e;(await((e=Me.value)==null?void 0:e.validate())).valid&&(de.value=!0,Ge.value=Qe())},el=e=>{if(typeof e=="object"&&e!==null)switch(R.value){case $.Api.HubriseServiceType.DELIVERY:return`${e.delivery}%`;case $.Api.HubriseServiceType.COLLECTION:return`${e.collection}%`;case $.Api.HubriseServiceType.EAT_IN:return`${e.eat_in}%`}return""},Cl=()=>{var a,m,g,f,I,A;if(L.value===void 0||L.value===null)return;const e={};(g=(m=(a=L.value)==null?void 0:a.data)==null?void 0:m.categories)==null||g.forEach(i=>{e[i.id]=i.name}),F=((A=(I=(f=L.value)==null?void 0:f.data)==null?void 0:I.products)==null?void 0:A.map(i=>{var t,r;const b=i.ref??(((t=i.skus)==null?void 0:t.length)===1&&(!Array.isArray(i.skus[0].option_list_ids)||i.skus[0].option_list_ids.length===0)?i.skus[0].ref:null),h=((r=i.skus)==null?void 0:r.length)===1&&(!Array.isArray(i.skus[0].option_list_ids)||i.skus[0].option_list_ids.length===0)?i.skus[0].price:$.Api.HubrisePriceUtil.multiply(i.skus[0].price,0);return{id:i.id,sku_ref:b,category:e[i.category_id],product_name:i.name,quantity:"1",tax_rate:i.tax_rate,price:h,customer_notes:void 0}}).sort((i,b)=>{var h,t;return((h=i.category)==null?void 0:h.localeCompare(b.category??""))||((t=i.name)==null?void 0:t.localeCompare(b.name??""))}))??[],Be=(F==null?void 0:F.filter(i=>i.sku_ref!==void 0&&i.sku_ref!==null))??[]},Al=()=>{var a,m,g,f,I,A;if(L.value===void 0||L.value===null)return;const e={};(g=(m=(a=L.value)==null?void 0:a.data)==null?void 0:m.option_lists)==null||g.forEach(i=>{e[i.id]=i}),w={},(A=(I=(f=L.value)==null?void 0:f.data)==null?void 0:I.products)==null||A.forEach(i=>{w[i.id]=[],!(!Array.isArray(i.skus)||i.skus.length===0||!Array.isArray(i.skus[0].option_list_ids)||i.skus[0].option_list_ids.length===0)&&(i.skus.forEach(b=>{if(Array.isArray(b.option_list_ids)&&b.option_list_ids.length>0)b.option_list_ids.forEach(h=>{const t=e[h];t!==void 0&&(!Array.isArray(t.options)||t.options.length===0||t.options.forEach(r=>{const E=$.Api.HubrisePriceUtil.sum([b.price??null,r.price??null]);w[i.id].push({id:`${b.id}-${t.id}-${r.id}`,ref:r.ref??null,option_list_name:t.name,name:r.name,quantity:1,price:E})}))});else{const h=b.price??null;w[i.id].push({id:b.id,ref:b.ref??null,name:b.name,quantity:"1",price:h})}}),w[i.id].sort((b,h)=>{var t;return(t=b.name)==null?void 0:t.localeCompare(h.name??"")}))}),me={},Object.keys(w).forEach(i=>{var b;me[i]=((b=w[i])==null?void 0:b.filter(h=>h.ref!==void 0&&h.ref!==null))??[]})},ll=()=>{j.value.push({})},kl=e=>{const a=j.value.findIndex(m=>m===e);a>=0&&j.value.splice(a,1)},al=e=>{Array.isArray(e.options)||(e.options=[]),e.options.push({})},_l=(e,a)=>{const m=e.options.findIndex(g=>g===a);m>=0&&e.options.splice(m,1)},tl=(e,a)=>{const m=F==null?void 0:F.find(g=>g.id===e);m!==void 0&&($.Util.ObjectUtil.update(a,m),Array.isArray(w[e])&&w[e].length>0&&al(a))},ol=(e,a,m)=>{var f;const g=(f=w[e])==null?void 0:f.find(I=>I.id===a);g!==void 0&&$.Util.ObjectUtil.update(m,g)},nl=e=>{const a=e.target;a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.isContentEditable||(e.key==="+"||e.key==="Add"||e.code==="NumpadAdd"||e.shiftKey&&(e.key==="="||e.code==="Equal"))&&ll()},p=e=>{if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();const a=Array.from(document.querySelectorAll('input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex="-1"])')).filter(f=>f.offsetParent!==null),m=a.indexOf(e.target),g=a[m+1];g&&g.focus()}};let se=Date.now(),re;const dl=()=>{var g;const e=z.value;if(typeof e!="string"||e.length<3||/^[\d\s,]+$/.test(e))return;if(clearTimeout(re),Date.now()<se+fl){re=setTimeout(()=>{re=void 0,dl()},Math.max(0,fl-(Date.now()-se)));return}const a=(g=Kl("language",Rl.app.i18n.defaultLocale))==null?void 0:g.value,m=H.value??void 0;le.value=!0,se=Date.now(),Re(`address/search?text=${encodeURIComponent(e)}&language=${a}${m!==void 0?`&country=${String(m)}`:""}`,{method:"GET",onResponseError({response:f}){le.value=!1,Ne(f)}}).then(f=>{clearTimeout(re),le.value=!1,Ve.value=f.addresses,Xe.value=!0,se=Date.now()}).catch(f=>{le.value=!1,Ke(f)})},Tl=e=>{var a;return typeof e!="object"||e===null?e:[e.address_1,e.city,e.postal_code,(a=e.country)==null?void 0:a.toUpperCase()].filter(m=>m!==void 0).join(", ")},El=e=>{var m;if(typeof e=="string"||e===null)return;z.value=e.address_1,ae.value=e.city,te.value=e.postal_code,he.value=e.latitude,Ce.value=e.longitude;const a=(m=e.country)==null?void 0:m.toUpperCase();a!==void 0&&a!==H.value&&ze.find(g=>g.code===a)&&(H.value=a)},sl=()=>{var e;Ve.value=[],z.value=void 0,ne.value=void 0,ae.value=void 0,te.value=void 0,he.value=void 0,Ce.value=void 0,typeof((e=_.value)==null?void 0:e.country)=="string"?H.value=_.value.country:H.value=void 0},rl=e=>{var a;_.value=e,typeof((a=_.value)==null?void 0:a.country)=="string"&&(H.value=_.value.country)},il=e=>{ue.value=e},ul=e=>{L.value=e,Cl(),Al()},Ul=()=>{de.value=!1,we(),sl()},ml=Ml(),ie=Gl(),cl=Wl();return Ll(()=>{zl("page.order.add.title"),window.addEventListener("keydown",nl),ml.onCurrentLocationChange(rl),ie.onCurrentCustomerListChange(il),cl.onCurrentCatalogChange(ul)}),Dl(()=>{window.removeEventListener("keydown",nl),ml.offCurrentLocationChange(rl),ie.offCurrentCustomerListChange(il),cl.offCurrentCatalogChange(ul)}),(e,a)=>{const m=Yl,g=ql,f=Pl,I=jl,A=Fl,i=Ol,b=Hl,h=Nl("IconBtn");return C(),D(Zl,{ref_key:"form",ref:Me},{default:n(()=>[V("div",oa,[V("div",na,[V("h4",da,c(("$t"in e?e.$t:o(d))("page.order.add.title")),1),V("div",sa,c(("$t"in e?e.$t:o(d))("page.order.add.subtitle")),1)]),V("div",ra,[l(m,{"enable-catalogs":"","enable-customer-lists":"","enable-locations":""}),l(q,{color:"secondary",onclick:"window.location = '/'",variant:"tonal"},{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.button.discard")),1)]),_:1}),l(q,{disabled:Je(),loading:de.value,onClick:xe},{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.button.create")),1)]),_:1},8,["disabled","loading"])])]),l(T,{dense:""},{default:n(()=>[l(s,{cols:"12",md:"4"},{default:n(()=>[l(He,{disabled:!_.value||!ue.value,loading:!_.value||!ue.value,class:"mb-6 fill-height"},{default:n(()=>[l(Oe,null,{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.section.customer.title")),1)]),_:1}),l(Fe,{class:"pb-0"},{default:n(()=>[l(T,{dense:""},{default:n(()=>[l(s,{cols:"10"},{default:n(()=>{var t;return[l(g,{modelValue:N.value,"onUpdate:modelValue":[a[0]||(a[0]=r=>N.value=r),Ze],"item-title":bl,items:(t=G.value)==null?void 0:t.filter(r=>r.phone!==void 0&&r.phone!==null),label:("$t"in e?e.$t:o(d))("page.order.add.section.customer.phone.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.customer.phone.placeholder"),rules:gl,clearable:"","item-value":"id","validate-on":"blur",onKeyup:v(p,["enter"]),"onClick:clear":we},null,8,["modelValue","items","label","placeholder"])]}),_:1}),l(s,{class:"text-center",cols:"2"},{default:n(()=>[l(q,{disabled:!N.value||N.value.length<5,loading:x.value,icon:"bx-search",rounded:"",size:"small",onClick:$l},null,8,["disabled","loading"])]),_:1}),l(s,{cols:"10"},{default:n(()=>{var t;return[l(g,{modelValue:K.value,"onUpdate:modelValue":[a[1]||(a[1]=r=>K.value=r),Ze],"item-title":Vl,items:(t=G.value)==null?void 0:t.filter(r=>r.email!==void 0&&r.email!==null),label:("$t"in e?e.$t:o(d))("page.order.add.section.customer.email.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.customer.email.placeholder"),rules:yl,clearable:"","item-value":"id","validate-on":"blur",onKeyup:v(p,["enter"]),"onClick:clear":we},null,8,["modelValue","items","label","placeholder"])]}),_:1}),l(s,{class:"text-center",cols:"2"},{default:n(()=>[l(q,{disabled:!K.value||K.value.length<5,loading:ee.value,icon:"bx-search",rounded:"",size:"small",onClick:hl},null,8,["disabled","loading"])]),_:1}),l(s,{cols:"12",md:"6"},{default:n(()=>[l(oe,{modelValue:J.value,"onUpdate:modelValue":a[2]||(a[2]=t=>J.value=t),label:("$t"in e?e.$t:o(d))("page.order.add.section.customer.smsMarketing.label"),onKeyup:v(p,["enter"])},null,8,["modelValue","label"])]),_:1}),l(s,{cols:"12",md:"6"},{default:n(()=>[l(oe,{modelValue:Q.value,"onUpdate:modelValue":a[3]||(a[3]=t=>Q.value=t),label:("$t"in e?e.$t:o(d))("page.order.add.section.customer.emailMarketing.label"),onKeyup:v(p,["enter"])},null,8,["modelValue","label"])]),_:1}),l(s,{cols:"12",md:"6"},{default:n(()=>[l(f,{modelValue:W.value,"onUpdate:modelValue":a[4]||(a[4]=t=>W.value=t),label:("$t"in e?e.$t:o(d))("page.order.add.section.customer.firstName.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.customer.firstName.placeholder"),class:"mb-3",onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"6"},{default:n(()=>[l(f,{modelValue:X.value,"onUpdate:modelValue":a[5]||(a[5]=t=>X.value=t),label:("$t"in e?e.$t:o(d))("page.order.add.section.customer.lastName.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.customer.lastName.placeholder"),class:"mb-3",onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12"},{default:n(()=>[l(f,{modelValue:Z.value,"onUpdate:modelValue":a[6]||(a[6]=t=>Z.value=t),label:("$t"in e?e.$t:o(d))("page.order.add.section.customer.company.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.customer.company.placeholder"),class:"mb-3",onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1}),l(s,{cols:"12",md:"8"},{default:n(()=>[l(He,{disabled:!_.value,loading:!_.value,class:"action-card mb-6 fill-height"},{default:n(()=>[l(Oe,null,{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.section.action.title")),1)]),_:1}),l(Fe,{class:"pb-0"},{default:n(()=>[l(T,{dense:""},{default:n(()=>[l(s,{cols:"12",md:"3"},{default:n(()=>[V("div",ia,[l(Jl,{modelValue:R.value,"onUpdate:modelValue":a[7]||(a[7]=t=>R.value=t),class:"v-tabs-pill",color:"primary",direction:"vertical"},{default:n(()=>[(C(),D(je,{key:0,value:o($.Api).HubriseServiceType.DELIVERY},{default:n(()=>[l(B,{class:"me-2",icon:"mdi-moped"}),V("div",ua,c(("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.title")),1)]),_:1},8,["value"])),(C(),D(je,{key:1,value:o($.Api).HubriseServiceType.COLLECTION},{default:n(()=>[l(B,{class:"me-2",icon:"bx-walk"}),V("div",ma,c(("$t"in e?e.$t:o(d))("page.order.add.section.action.pickup.title")),1)]),_:1},8,["value"])),(C(),D(je,{key:2,value:o($.Api).HubriseServiceType.EAT_IN},{default:n(()=>[l(B,{class:"me-2",icon:"ic-baseline-table-bar"}),V("div",ca,c(("$t"in e?e.$t:o(d))("page.order.add.section.action.eatin.title")),1)]),_:1},8,["value"]))]),_:1},8,["modelValue"])])]),_:1}),l(s,{cols:"12",md:"9"},{default:n(()=>[l(Ql,{modelValue:R.value,"onUpdate:modelValue":a[24]||(a[24]=t=>R.value=t),touch:!1,class:"w-100"},{default:n(()=>[l(Pe,{value:o($.Api).HubriseServiceType.DELIVERY},{default:n(()=>[V("div",pa,[l(T,{class:"v-row-small"},{default:n(()=>[l(s,{cols:"12",md:"6"},{default:n(()=>[l(g,{modelValue:z.value,"onUpdate:modelValue":[a[8]||(a[8]=t=>z.value=t),El],"item-title":Tl,items:Ve.value,label:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.address1.label"),loading:le.value,menu:Xe.value,placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.address1.placeholder"),clearable:"","item-value":"id",onInput:dl,onKeyup:v(p,["enter"]),"onClick:clear":sl},null,8,["modelValue","items","label","loading","menu","placeholder"])]),_:1}),l(s,{cols:"12",md:"6"},{default:n(()=>[l(f,{modelValue:ne.value,"onUpdate:modelValue":a[9]||(a[9]=t=>ne.value=t),label:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.address2.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.address2.placeholder"),onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"4"},{default:n(()=>[l(f,{modelValue:ae.value,"onUpdate:modelValue":a[10]||(a[10]=t=>ae.value=t),label:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.city.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.city.placeholder"),onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"4"},{default:n(()=>[l(f,{modelValue:te.value,"onUpdate:modelValue":a[11]||(a[11]=t=>te.value=t),label:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.zipcode.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.zipcode.placeholder"),onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"4"},{default:n(()=>[l(I,{modelValue:H.value,"onUpdate:modelValue":a[12]||(a[12]=t=>H.value=t),items:o(ze),label:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.country.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.country.placeholder"),"item-title":"label","item-value":"code",onKeyup:v(p,["enter"])},null,8,["modelValue","items","label","placeholder"])]),_:1}),l(s,{class:"pa-0",cols:"12"},{default:n(()=>[l(oe,{modelValue:S.value,"onUpdate:modelValue":a[13]||(a[13]=t=>S.value=t),label:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.asap.label")},null,8,["modelValue","label"])]),_:1}),S.value?O("",!0):(C(),D(s,{key:0,cols:"12",md:"6"},{default:n(()=>[l(A,{modelValue:be.value,"onUpdate:modelValue":a[14]||(a[14]=t=>be.value=t),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",minDate:o(P)},label:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.date.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.date.placeholder"),onKeyup:v(p,["enter"])},null,8,["modelValue","config","label","placeholder"])]),_:1})),S.value?O("",!0):(C(),D(s,{key:1,cols:"12",md:"6"},{default:n(()=>[l(A,{modelValue:$e.value,"onUpdate:modelValue":a[15]||(a[15]=t=>$e.value=t),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:10},label:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.time.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.time.placeholder"),format:"24h",onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1})),l(s,{class:"not-small",cols:"12"},{default:n(()=>[l(i,{modelValue:Ae.value,"onUpdate:modelValue":a[16]||(a[16]=t=>Ae.value=t),label:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.notes.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.action.delivery.notes.placeholder"),"auto-grow":"",counter:"",maxlength:"300",rows:"1",onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1})])]),_:1},8,["value"]),l(Pe,{value:o($.Api).HubriseServiceType.COLLECTION},{default:n(()=>[V("div",va,[V("div",fa,[l(oe,{modelValue:S.value,"onUpdate:modelValue":a[17]||(a[17]=t=>S.value=t),label:("$t"in e?e.$t:o(d))("page.order.add.section.action.pickup.asap.label")},null,8,["modelValue","label"])]),S.value?O("",!0):(C(),M("div",ga,[V("div",ya,[l(A,{modelValue:ke.value,"onUpdate:modelValue":a[18]||(a[18]=t=>ke.value=t),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",minDate:o(P)},label:("$t"in e?e.$t:o(d))("page.order.add.section.action.pickup.date.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.action.pickup.date.placeholder"),onKeyup:v(p,["enter"])},null,8,["modelValue","config","label","placeholder"])]),V("div",ba,[l(A,{modelValue:_e.value,"onUpdate:modelValue":a[19]||(a[19]=t=>_e.value=t),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:10},label:("$t"in e?e.$t:o(d))("page.order.add.section.action.pickup.time.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.action.pickup.time.placeholder"),onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])])]))])]),_:1},8,["value"]),l(Pe,{value:o($.Api).HubriseServiceType.EAT_IN},{default:n(()=>[V("div",$a,[V("div",Va,[l(xl,{modelValue:Ue.value,"onUpdate:modelValue":a[20]||(a[20]=t=>Ue.value=t),label:("$t"in e?e.$t:o(d))("page.order.add.section.action.eatin.table.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.action.eatin.table.placeholder"),variant:"underlined",onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),V("div",ha,[l(oe,{modelValue:S.value,"onUpdate:modelValue":a[21]||(a[21]=t=>S.value=t),label:("$t"in e?e.$t:o(d))("page.order.add.section.action.pickup.asap.label")},null,8,["modelValue","label"])]),S.value?O("",!0):(C(),M("div",Ca,[V("div",Aa,[l(A,{modelValue:Te.value,"onUpdate:modelValue":a[22]||(a[22]=t=>Te.value=t),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",minDate:o(P)},label:("$t"in e?e.$t:o(d))("page.order.add.section.action.eatin.date.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.action.eatin.date.placeholder"),onKeyup:v(p,["enter"])},null,8,["modelValue","config","label","placeholder"])]),V("div",ka,[l(A,{modelValue:Ee.value,"onUpdate:modelValue":a[23]||(a[23]=t=>Ee.value=t),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:10},label:("$t"in e?e.$t:o(d))("page.order.add.section.action.eatin.time.label"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.action.eatin.time.placeholder"),onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])])]))])]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1}),l(s,{class:"pt-0 mt-0",cols:"12",md:"12"},{default:n(()=>[l(He,{disabled:!_.value||!L.value,loading:!_.value||!L.value},{default:n(()=>[l(Oe,null,{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.section.item.title")),1)]),_:1}),l(Fe,null,{default:n(()=>[l(T,{dense:""},{default:n(()=>[l(s,{cols:"2",md:"2"},{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.section.item.reference")),1)]),_:1}),l(s,{cols:"2",md:"4"},{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.section.item.name")),1)]),_:1}),l(s,{cols:"2",md:"1"},{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.section.item.quantity")),1)]),_:1}),l(s,{cols:"2",md:"1"},{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.section.item.vat")),1)]),_:1}),l(s,{cols:"1",md:"1"},{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.section.item.price")),1)]),_:1}),l(s,{class:"text-center",cols:"2",md:"2"},{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.section.item.subtotal")),1)]),_:1}),l(s,{cols:"1",md:"1"})]),_:1}),(C(!0),M(Ie,null,vl(j.value,t=>(C(),M(Ie,{key:t.id},[l(T,{dense:""},{default:n(()=>[l(s,{cols:"4",md:"2"},{default:n(()=>[t.sku_ref!==null?(C(),D(b,{key:0,modelValue:t.sku_ref,"onUpdate:modelValue":[r=>t.sku_ref=r,r=>tl(r,t)],items:o(Be),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.item.reference"),"item-title":"sku_ref","item-value":"id","no-data-text":"common.component.noData",onKeyup:v(p,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])):O("",!0)]),_:2},1024),l(s,{cols:"6",md:"4"},{default:n(()=>[l(b,{modelValue:t.product_name,"onUpdate:modelValue":[r=>t.product_name=r,r=>tl(r,t)],items:o(F),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.item.name"),"item-title":"product_name","item-value":"id","no-data-text":"common.component.noData",onKeyup:v(p,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])]),_:2},1024),l(s,{cols:"2",md:"1"},{default:n(()=>[l(f,{modelValue:t.quantity,"onUpdate:modelValue":r=>t.quantity=r,clearable:!1,min:"1",placeholder:"1",type:"number",onKeyup:v(p,["enter"])},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(s,{class:"align-self-end",cols:"3",md:"1"},{default:n(()=>[y(c(el(t.tax_rate)),1)]),_:2},1024),l(s,{class:"align-self-end",cols:"3",md:"1"},{default:n(()=>[y(c(o(U)(t.price)),1)]),_:2},1024),l(s,{class:"align-self-end text-center",cols:"3",md:"2"},{default:n(()=>[y(c(o(U)(o($.Api).HubrisePriceUtil.multiply(t.price,t.quantity))),1)]),_:2},1024),l(s,{class:"px-0",cols:"3",md:"1"},{default:n(()=>[l(h,{"x-small":"",onClick:r=>t.customer_notes=t.customer_notes===void 0?null:void 0},{default:n(()=>[l(B,{icon:"bx-edit"})]),_:2},1032,["onClick"]),l(h,{onClick:r=>kl(t)},{default:n(()=>[l(B,{icon:"bx-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),(C(!0),M(Ie,null,vl(t.options,r=>(C(),M("div",{key:r.ref},[l(T,{dense:""},{default:n(()=>[l(s,{class:"d-flex align-self-end",cols:"4",md:"2"},{default:n(()=>[l(qe),r.ref!==null?(C(),D(b,{key:0,modelValue:r.ref,"onUpdate:modelValue":[E=>r.ref=E,E=>ol(t.id,E,r)],items:o(me)[t.id],placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.item.reference"),"item-title":"ref","item-value":"id","no-data-text":"common.component.noData",onKeyup:v(p,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])):O("",!0)]),_:2},1024),l(s,{class:"d-flex align-self-end",cols:"6",md:"4"},{default:n(()=>[l(qe),l(b,{modelValue:r.name,"onUpdate:modelValue":[E=>r.name=E,E=>ol(t.id,E,r)],items:o(w)[t.id],placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.item.name"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData",onKeyup:v(p,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])]),_:2},1024),l(s,{class:"d-flex align-self-end",cols:"2",md:"1"},{default:n(()=>[l(f,{modelValue:r.quantity,"onUpdate:modelValue":E=>r.quantity=E,clearable:!1,min:"1",placeholder:"1",type:"number",onKeyup:v(p,["enter"])},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(s,{class:"align-self-end",cols:"3",md:"1"},{default:n(()=>[y(c(el(t.tax_rate)),1)]),_:2},1024),l(s,{class:"align-self-end",cols:"3",md:"1"},{default:n(()=>[y(c(o(U)(r.price)),1)]),_:2},1024),l(s,{class:"align-self-end text-center",cols:"3",md:"2"},{default:n(()=>[y(c(o(U)(o($.Api).HubrisePriceUtil.multiply(r.price,r.quantity))),1)]),_:2},1024),l(s,{cols:"3",md:"1"},{default:n(()=>[l(h,{onClick:E=>_l(t,r)},{default:n(()=>[l(B,{icon:"bx-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),l(T,{dense:""},{default:n(()=>[l(s,{cols:"0",md:"2"}),l(s,{cols:"12",md:"5"},{default:n(()=>{var r;return[((r=o(w)[t.id])==null?void 0:r.length)>0?(C(),D(q,{key:0,class:"mt-6",color:"secondary","prepend-icon":"bx-plus",size:"x-small",onClick:E=>al(t)},{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.section.item.button.add.itemOption")),1)]),_:2},1032,["onClick"])):O("",!0)]}),_:2},1024),l(s,{cols:"12",md:"4"},{default:n(()=>[t.customer_notes!==void 0?(C(),D(i,{key:0,modelValue:t.customer_notes,"onUpdate:modelValue":r=>t.customer_notes=r,label:("$t"in e?e.$t:o(d))("page.order.add.section.item.itemNotes"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.item.itemNotes"),"auto-grow":"",counter:"",maxlength:"300",rows:"1",onKeyup:v(p,["enter"])},null,8,["modelValue","onUpdate:modelValue","label","placeholder"])):O("",!0)]),_:2},1024),l(s,{cols:"0",md:"1"})]),_:2},1024)],64))),128)),l(T,{dense:""},{default:n(()=>[l(s,{cols:"12"},{default:n(()=>[l(q,{class:"mt-6",color:"secondary","prepend-icon":"bx-plus",size:"small",onClick:ll},{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.section.item.button.add.item")),1)]),_:1})]),_:1}),l(s,{class:"px-4 py-8",cols:"6",md:"3"},{default:n(()=>[l(i,{modelValue:ce.value,"onUpdate:modelValue":a[25]||(a[25]=t=>ce.value=t),label:("$t"in e?e.$t:o(d))("page.order.add.section.item.customerNotes"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.item.customerNotes"),"auto-grow":"",counter:"",maxlength:"500",rows:"4",onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{class:"px-4 py-8",cols:"6",md:"3"},{default:n(()=>[l(qe),l(i,{modelValue:pe.value,"onUpdate:modelValue":a[26]||(a[26]=t=>pe.value=t),label:("$t"in e?e.$t:o(d))("page.order.add.section.item.sellerNotes"),placeholder:("$t"in e?e.$t:o(d))("page.order.add.section.item.sellerNotes"),"auto-grow":"",counter:"",maxlength:"500",rows:"4",onKeyup:v(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"0",md:"1"}),l(s,{cols:"12",md:"5"},{default:n(()=>[l(T,{dense:""},{default:n(()=>[l(s,{class:"align-self-end",cols:"6",md:"5"},{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.section.item.subtotal")),1)]),_:1}),l(s,{class:"text-center",cols:"6",md:"4"},{default:n(()=>[y(c(o(U)(o(Se).subtotal)),1)]),_:1}),l(s,{cols:"0",md:"3"})]),_:1}),l(T,{dense:""},{default:n(()=>[l(s,{class:"align-self-end",cols:"6",md:"5"},{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.section.item.minimumOrderFee")),1)]),_:1}),l(s,{class:"text-center",cols:"6",md:"4"},{default:n(()=>[y(c(o(U)(o(Se).minimumOrderFee)),1)]),_:1}),l(s,{cols:"0",md:"3"})]),_:1}),R.value===o($.Api).HubriseServiceType.DELIVERY?(C(),D(T,{key:0,dense:""},{default:n(()=>[l(s,{class:"align-self-end",cols:"6",md:"5"},{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.section.item.deliveryFee")),1)]),_:1}),l(s,{class:"text-center pa-0",cols:"6",md:"4"},{default:n(()=>[l(ea,{modelValue:ve.value,"onUpdate:modelValue":a[27]||(a[27]=t=>ve.value=t),disabled:!0,items:We.value,loading:We.value.length===0,class:"d-inline-flex","item-title":"name","item-value":"value",variant:"plain"},null,8,["modelValue","items","loading"])]),_:1}),l(s,{cols:"0",md:"3"})]),_:1})):O("",!0),l(T,{dense:""},{default:n(()=>[l(s,{class:"align-self-end",cols:"6",md:"5"},{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.section.item.total")),1)]),_:1}),l(s,{class:"text-center",cols:"6",md:"4"},{default:n(()=>[y(c(o(U)(o(Se).total)),1)]),_:1}),l(s,{cols:"0",md:"3"})]),_:1}),l(T,{dense:""},{default:n(()=>[l(s,{cols:"12",md:"9"},{default:n(()=>[l(q,{disabled:Je(),loading:de.value,class:"w-100",onClick:xe},{default:n(()=>[y(c(("$t"in e?e.$t:o(d))("page.order.add.button.create")),1)]),_:1},8,["disabled","loading"])]),_:1}),l(s,{cols:"0",md:"3"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1})]),_:1}),l(Xl,{order:Ge.value,onDone:Ul},null,8,["order"])]),_:1},512)}}}),Et=la(_a,[["__scopeId","data-v-abe5d6fb"]]);export{Et as default};
