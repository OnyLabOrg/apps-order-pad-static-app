import{a as _l,$ as d}from"./TranslationUtil-CmPVkUyL.js";import{d as kl,r as m,X as Tl,G as El,ai as Ul,g as H,f as o,a as wl,o as U,e as h,b as l,v as c,m as t,ah as P,t as y,dm as g,$ as z,c as re,F as Le,i as il,l as te,aZ as Sl,H as Ll}from"./index-fi8j2oVz.js";import{_ as Il}from"./AppAutocomplete.vue_vue_type_script_setup_true_lang-DMWDZpbI.js";import{_ as Nl}from"./AppTextarea.vue_vue_type_script_setup_true_lang-BC8gzrzh.js";import{_ as Dl}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-CS74r7gh.js";import{_ as Kl}from"./AppSelect.vue_vue_type_script_setup_true_lang-CuooQsE4.js";import{_ as Rl}from"./AppTextField.vue_vue_type_script_setup_true_lang-BxveU29v.js";import{_ as Hl}from"./AppCombobox.vue_vue_type_script_setup_true_lang-Taz-JTr9.js";import{_ as Ol}from"./AppSelectContext.vue_vue_type_script_setup_true_lang-CngjXQps.js";import{D as Ie,d as w,c as Ne}from"./PriceUtil-CbwV5198.js";import{c as $}from"./common-api.web.min-rTQUY9Dn.js";import{u as Fl}from"./usePageTitle-B3_CzGCe.js";import{b as Pl,c as ql,d as Yl,e as jl,h as se,a as ie}from"./Http-BWR1DsAv.js";import{$ as ue}from"./api-COvoLub6.js";import{V as zl}from"./VForm-iF4iQPhK.js";import{V as T,a as r}from"./VRow-BRqo71mD.js";import{V as De,c as Ke}from"./VCard-T45oLZVc.js";import{V as Re}from"./VCardText-BwPizGzA.js";import{V as ul}from"./VCheckbox-FuXm6z4t.js";import{a as Bl,V as He}from"./VTabs-RV4WgjOw.js";import{V as Ml,a as Oe}from"./VWindowItem-B1CCVf96.js";import{V as Gl}from"./VTextField-CmsvgTS8.js";import{V as Fe}from"./VSpacer-DnKjfQKP.js";import{V as Wl}from"./VSelect-DtoAnlQC.js";import{_ as Xl}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./filter-DcX5ke-Q.js";import"./form-D_IbL9P9.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-GgsCBWoq.js";import"./ssrBoot-CrmjezvH.js";import"./VImg-BNPCz-9u.js";import"./VAvatar-B4g97CWn.js";import"./VDivider-CvHrnILO.js";import"./VMenu-6ToSRiLe.js";import"./VOverlay-BDE4XxpE.js";import"./easing-Bybner-F.js";import"./delay-CZ7iA9Ek.js";import"./lazy-Bm7GEMuE.js";import"./scopeId-nWOF_xLB.js";import"./dialog-transition-5wy1mqM2.js";import"./VCheckboxBtn-BJoyQzgE.js";import"./VSelectionControl-C42Z-vkc.js";import"./VChip-BytzV4dx.js";import"./VSlideGroup-D0N5PBbd.js";/* empty css                   */import"./VCounter-CP92TYvx.js";import"./VField-DaODwuNN.js";import"./VInput-B-2mP8le.js";import"./index-CvOPxmL5.js";/* empty css              */const Zl=q=>typeof q!="string"?!1:/^[\w.!#$%&'*+/=?^`{|}~-]+@[a-z0-9-]+(?:\.[a-z0-9-]+)*$/i.test(q),Jl=q=>{if(typeof q!="string")return!1;const F=q.replace(/\s/g,"");return/^\+\d+(?:#\d+)?$/.test(F)||/^0\d{9}(?:#\d+)?$/.test(F)},Ql={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},xl={class:"d-flex flex-column justify-center"},ea={class:"text-h4 mb-1"},la={class:"text-body-1"},aa={class:"d-flex gap-4 align-center flex-wrap"},ta={class:"pe-3"},oa={class:"text-truncate font-weight-medium text-start"},na={class:"text-truncate font-weight-medium text-start"},da={class:"text-truncate font-weight-medium text-start"},ra={class:"ps-md-3"},sa={class:"ps-md-3"},ia={class:"d-flex flex-sm-row flex-column flex-wrap justify-space-between gap-x-6 gap-y-4"},ua={class:"flex-grow-1"},ma={class:"flex-grow-1"},ca={class:"ps-md-3"},pa={class:"mt-3"},va={class:"d-flex flex-sm-row flex-column flex-wrap justify-space-between gap-x-6 gap-y-4 mt-5"},fa={class:"flex-grow-1"},ga={class:"flex-grow-1"},ml=1e3,ya=kl({__name:"add",setup(q){var sl;const F=Ie.local().toISODate(),Pe=_l("common.country"),qe=Object.keys(Pe).map(e=>{var a,i;return{code:e,label:(i=(a=Pe[e])==null?void 0:a.body)==null?void 0:i.static}}).filter(e=>e.label!==void 0),_=((sl=Pl().getCurrentAccount)==null?void 0:sl.currency)??$.Api.HubriseCurrencyCode.EUR,k=m(),me=m(),I=m();let Ye=[],O=[],ce={},S={};const je=m(null),L=m([{}]),pe=m(),ve=m(),fe=m(`0.00 ${_}`),ze=m([{value:`0.00 ${_}`,name:w(`0.00 ${_}`)},{value:`1.00 ${_}`,name:w(`1.00 ${_}`)},{value:`2.00 ${_}`,name:w(`2.00 ${_}`)},{value:`3.00 ${_}`,name:w(`3.00 ${_}`)},{value:`4.00 ${_}`,name:w(`4.00 ${_}`)},{value:`5.00 ${_}`,name:w(`5.00 ${_}`)}]),B=m(),M=m(),G=m(),W=m(),N=m(),cl=[e=>!!e||Jl(e)||d("page.order.add.section.customer.phone.rule.format")],X=m(!0),D=m(),pl=[e=>!e||Zl(e)||d("page.order.add.section.customer.email.rule.format")],Z=m(!0),J=m(!1),Q=m(!1),K=m($.Api.HubriseServiceType.DELIVERY),ge=Ie.local().toISODate(),ye=Ie.local().toISOTime({suppressSeconds:!0,suppressMilliseconds:!0,includeOffset:!1}),be=m(ge),$e=m(ye),Be=m(!1),he=m(),x=m(),Y=m(),oe=m(),ee=m(),le=m(),R=m(),Ve=m(),Ce=m(),Ae=m(),_e=m(ge),ke=m(ye),Te=m(ge),Ee=m(ye),Ue=m(),j=m(!1),Me=e=>{typeof e=="string"||e===null||(N.value=e.phone,M.value=e.first_name,G.value=e.last_name,W.value=e.company_name,N.value=e.phone,X.value=e.sms_marketing??!1,D.value=e.email,Z.value=e.email_marketing??!1)},Ge=()=>{B.value=[],M.value=void 0,G.value=void 0,W.value=void 0,N.value=void 0,X.value=!0,D.value=void 0,Z.value=!0},vl=()=>{var e;typeof N.value!="string"||N.value.length<5||(J.value=!0,ue(`customers/search?phone=${encodeURIComponent(N.value)}&customerListId=${String((e=ae.getCurrentCustomerList)==null?void 0:e.id)}`,{method:"GET",onResponseError({response:a}){J.value=!1,se(a)}}).then(a=>{J.value=!1,B.value=a.customers}).catch(a=>{J.value=!1,ie(a)}))},fl=()=>{var e;typeof D.value!="string"||D.value.length<5||(Q.value=!0,ue(`customers/search?email=${encodeURIComponent(D.value)}&customerListId=${String((e=ae.getCurrentCustomerList)==null?void 0:e.id)}`,{method:"GET",onResponseError({response:a}){Q.value=!1,se(a)}}).then(a=>{Q.value=!1,B.value=a.customers}).catch(a=>{Q.value=!1,ie(a)}))},We=()=>{if(!(!Array.isArray(L.value)||L.value.length===0))return L.value.filter(e=>"id"in e&&e.id!==void 0&&e.id!==null).length===0},gl=()=>{L.value===void 0||L.value===null||(L.value=L.value.filter(e=>{var a;return e.options=(a=e.options)==null?void 0:a.filter(i=>"id"in i&&i.id!==void 0&&i.id!==null),"id"in e&&e.id!==void 0&&e.id!==null}))},Xe=()=>{var i,v,p,V,C,s;let e;switch(K.value){case $.Api.HubriseServiceType.DELIVERY:e=Ne(be.value,$e.value,(v=(i=k.value)==null?void 0:i.timezone)==null?void 0:v.name);break;case $.Api.HubriseServiceType.COLLECTION:e=Ne(_e.value,ke.value,(V=(p=k.value)==null?void 0:p.timezone)==null?void 0:V.name);break;case $.Api.HubriseServiceType.EAT_IN:e=Ne(Te.value,Ee.value,(s=(C=k.value)==null?void 0:C.timezone)==null?void 0:s.name);break}const a={first_name:M.value,last_name:G.value,company_name:W.value,email:D.value,email_marketing:Z.value,phone:N.value,sms_marketing:X.value};return K.value===$.Api.HubriseServiceType.DELIVERY&&(a.address_1=Y.value,a.address_2=oe.value,a.postal_code=le.value,a.city=ee.value,a.country=R.value,a.latitude=Ve.value,a.longitude=Ce.value,a.delivery_notes=Ae.value??void 0),{service_type:K.value,table_name:Ue.value??void 0,expected_time:e??void 0,customer:a,items:L.value,customer_notes:pe.value,seller_notes:ve.value}},we=Tl(()=>{const e=new $.Api.TotalHubriseCalculator().calculateTotals(Xe(),_);return fe.value=e.deliveryFee,e}),Ze=async()=>{var i,v,p;if(!(await((i=je.value)==null?void 0:i.validate())).valid)return;const e=(v=Se.getCurrentLocation)==null?void 0:v.id;if(e===void 0)return;const a=(p=ae.getCurrentCustomerList)==null?void 0:p.id;a!==void 0&&(j.value=!0,gl(),ue("orderpad/order",{method:"POST",body:{locationId:e,customerListId:a,...Xe()},onResponseError({response:V}){j.value=!1,se(V)}}).then(V=>{var C;j.value=!1,alert(`Order ${(C=V.order)==null?void 0:C.ref} created!`),window.location.reload()}).catch(V=>{j.value=!1,ie(V)}))},Je=e=>{if(typeof e=="object"&&e!==null)switch(K.value){case $.Api.HubriseServiceType.DELIVERY:return`${e.delivery}%`;case $.Api.HubriseServiceType.COLLECTION:return`${e.collection}%`;case $.Api.HubriseServiceType.EAT_IN:return`${e.eat_in}%`}return""},yl=()=>{var a,i,v,p,V,C;if(I.value===void 0||I.value===null)return;const e={};(v=(i=(a=I.value)==null?void 0:a.data)==null?void 0:i.categories)==null||v.forEach(s=>{e[s.id]=s.name}),O=((C=(V=(p=I.value)==null?void 0:p.data)==null?void 0:V.products)==null?void 0:C.map(s=>{var n,u;const b=s.ref??(((n=s.skus)==null?void 0:n.length)===1&&(!Array.isArray(s.skus[0].option_list_ids)||s.skus[0].option_list_ids.length===0)?s.skus[0].ref:null),A=((u=s.skus)==null?void 0:u.length)===1&&(!Array.isArray(s.skus[0].option_list_ids)||s.skus[0].option_list_ids.length===0)?s.skus[0].price:$.Api.HubrisePriceUtil.multiply(s.skus[0].price,0);return{id:s.id,sku_ref:b,category:e[s.category_id],product_name:s.name,quantity:1,tax_rate:s.tax_rate,price:A,customer_notes:void 0}}).sort((s,b)=>{var A,n;return((A=s.category)==null?void 0:A.localeCompare(b.category??""))||((n=s.name)==null?void 0:n.localeCompare(b.name??""))}))??[],Ye=(O==null?void 0:O.filter(s=>s.sku_ref!==void 0&&s.sku_ref!==null))??[]},bl=()=>{var a,i,v,p,V,C;if(I.value===void 0||I.value===null)return;const e={};(v=(i=(a=I.value)==null?void 0:a.data)==null?void 0:i.option_lists)==null||v.forEach(s=>{e[s.id]=s}),S={},(C=(V=(p=I.value)==null?void 0:p.data)==null?void 0:V.products)==null||C.forEach(s=>{S[s.id]=[],!(!Array.isArray(s.skus)||s.skus.length===0||!Array.isArray(s.skus[0].option_list_ids)||s.skus[0].option_list_ids.length===0)&&(s.skus.forEach(b=>{if(Array.isArray(b.option_list_ids)&&b.option_list_ids.length>0)b.option_list_ids.forEach(A=>{const n=e[A];n!==void 0&&(!Array.isArray(n.options)||n.options.length===0||n.options.forEach(u=>{const E=$.Api.HubrisePriceUtil.sum([b.price??null,u.price??null]);S[s.id].push({id:`${b.id}-${n.id}-${u.id}`,ref:u.ref??null,option_list_name:n.name,name:u.name,quantity:1,price:E})}))});else{const A=b.price??null;S[s.id].push({id:b.id,ref:b.ref??null,name:b.name,quantity:1,price:A})}}),S[s.id].sort((b,A)=>{var n;return(n=b.name)==null?void 0:n.localeCompare(A.name??"")}))}),ce={},Object.keys(S).forEach(s=>{var b;ce[s]=((b=S[s])==null?void 0:b.filter(A=>A.ref!==void 0&&A.ref!==null))??[]})},Qe=()=>{L.value.push({})},$l=e=>{const a=L.value.findIndex(i=>i===e);a>=0&&L.value.splice(a,1)},xe=e=>{Array.isArray(e.options)||(e.options=[]),e.options.push({})},hl=(e,a)=>{const i=e.options.findIndex(v=>v===a);i>=0&&e.options.splice(i,1)},el=(e,a)=>{const i=O==null?void 0:O.find(v=>v.id===e);i!==void 0&&($.Util.ObjectUtil.update(a,i),Array.isArray(S[e])&&S[e].length>0&&xe(a))},ll=(e,a,i)=>{var p;const v=(p=S[e])==null?void 0:p.find(V=>V.id===a);v!==void 0&&$.Util.ObjectUtil.update(i,v)},al=e=>{const a=e.target;a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.isContentEditable||(e.key==="+"||e.key==="Add"||e.code==="NumpadAdd"||e.shiftKey&&(e.key==="="||e.code==="Equal"))&&Qe()},f=e=>{if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();const a=Array.from(document.querySelectorAll('input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex="-1"])')).filter(p=>p.offsetParent!==null),i=a.indexOf(e.target),v=a[i+1];v&&v.focus()}};let ne=Date.now(),de;const tl=()=>{var v;const e=Y.value;if(typeof e!="string"||e.length<3||/^[\d\s,]+$/.test(e))return;if(clearTimeout(de),Date.now()<ne+ml){de=setTimeout(()=>{de=void 0,tl()},Math.max(0,ml-(Date.now()-ne)));return}const a=(v=Sl("language",Ll.app.i18n.defaultLocale))==null?void 0:v.value,i=R.value??void 0;x.value=!0,ne=Date.now(),ue(`address/search?text=${encodeURIComponent(e)}&language=${a}${i!==void 0?`&country=${String(i)}`:""}`,{method:"GET",onResponseError({response:p}){x.value=!1,se(p)}}).then(p=>{clearTimeout(de),x.value=!1,he.value=p.addresses,Be.value=!0,ne=Date.now()}).catch(p=>{x.value=!1,ie(p)})},Vl=e=>{var a;return typeof e!="object"||e===null?e:[e.address_1,e.city,e.postal_code,(a=e.country)==null?void 0:a.toUpperCase()].filter(i=>i!==void 0).join(", ")},Cl=e=>{var i;if(typeof e=="string"||e===null)return;Y.value=e.address_1,ee.value=e.city,le.value=e.postal_code,Ve.value=e.latitude,Ce.value=e.longitude;const a=(i=e.country)==null?void 0:i.toUpperCase();a!==void 0&&a!==R.value&&qe.find(v=>v.code===a)&&(R.value=a)},Al=()=>{var e;he.value=[],Y.value=void 0,oe.value=void 0,ee.value=void 0,le.value=void 0,Ve.value=void 0,Ce.value=void 0,typeof((e=k.value)==null?void 0:e.country)=="string"?R.value=k.value.country:R.value=void 0},ol=e=>{var a;k.value=e,typeof((a=k.value)==null?void 0:a.country)=="string"&&(R.value=k.value.country)},nl=e=>{me.value=e},dl=e=>{I.value=e,yl(),bl()},Se=ql(),ae=Yl(),rl=jl();return El(()=>{Fl("page.order.add.title"),window.addEventListener("keydown",al),Se.onCurrentLocationChange(ol),ae.onCurrentCustomerListChange(nl),rl.onCurrentCatalogChange(dl)}),Ul(()=>{window.removeEventListener("keydown",al),Se.offCurrentLocationChange(ol),ae.offCurrentCustomerListChange(nl),rl.offCurrentCatalogChange(dl)}),(e,a)=>{const i=Ol,v=Hl,p=Rl,V=Kl,C=Dl,s=Nl,b=Il,A=wl("IconBtn");return U(),H(zl,{ref_key:"form",ref:je},{default:o(()=>[h("div",Ql,[h("div",xl,[h("h4",ea,c(("$t"in e?e.$t:t(d))("page.order.add.title")),1),h("div",la,c(("$t"in e?e.$t:t(d))("page.order.add.subtitle")),1)]),h("div",aa,[l(i,{"enable-catalogs":"","enable-customer-lists":"","enable-locations":""}),l(P,{color:"secondary",onclick:"window.location = '/'",variant:"tonal"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.button.discard")),1)]),_:1}),l(P,{disabled:We(),loading:j.value,onClick:Ze},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.button.create")),1)]),_:1},8,["disabled","loading"])])]),l(T,{dense:""},{default:o(()=>[l(r,{cols:"12",md:"4"},{default:o(()=>[l(De,{disabled:!k.value||!me.value,loading:!k.value||!me.value,class:"mb-6 fill-height"},{default:o(()=>[l(Ke,null,{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.customer.title")),1)]),_:1}),l(Re,{class:"pb-0"},{default:o(()=>[l(T,{dense:""},{default:o(()=>[l(r,{cols:"10"},{default:o(()=>[l(v,{modelValue:N.value,"onUpdate:modelValue":[a[0]||(a[0]=n=>N.value=n),Me],items:B.value,label:("$t"in e?e.$t:t(d))("page.order.add.section.customer.phone.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.customer.phone.placeholder"),rules:cl,clearable:"","item-title":"phone","item-value":"id","validate-on":"blur",onKeyup:g(f,["enter"]),"onClick:clear":Ge},null,8,["modelValue","items","label","placeholder"])]),_:1}),l(r,{class:"text-center",cols:"2"},{default:o(()=>[l(P,{disabled:!N.value||N.value.length<5,loading:J.value,icon:"bx-search",rounded:"",size:"small",onClick:vl},null,8,["disabled","loading"])]),_:1}),l(r,{cols:"10"},{default:o(()=>[l(v,{modelValue:D.value,"onUpdate:modelValue":[a[1]||(a[1]=n=>D.value=n),Me],items:B.value,label:("$t"in e?e.$t:t(d))("page.order.add.section.customer.email.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.customer.email.placeholder"),rules:pl,clearable:"","item-title":"email","item-value":"id","validate-on":"blur",onKeyup:g(f,["enter"]),"onClick:clear":Ge},null,8,["modelValue","items","label","placeholder"])]),_:1}),l(r,{class:"text-center",cols:"2"},{default:o(()=>[l(P,{disabled:!D.value||D.value.length<5,loading:Q.value,icon:"bx-search",rounded:"",size:"small",onClick:fl},null,8,["disabled","loading"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(ul,{modelValue:X.value,"onUpdate:modelValue":a[2]||(a[2]=n=>X.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.customer.smsMarketing.label"),onKeyup:g(f,["enter"])},null,8,["modelValue","label"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(ul,{modelValue:Z.value,"onUpdate:modelValue":a[3]||(a[3]=n=>Z.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.customer.emailMarketing.label"),onKeyup:g(f,["enter"])},null,8,["modelValue","label"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(p,{modelValue:M.value,"onUpdate:modelValue":a[4]||(a[4]=n=>M.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.customer.firstName.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.customer.firstName.placeholder"),class:"mb-3",onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(p,{modelValue:G.value,"onUpdate:modelValue":a[5]||(a[5]=n=>G.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.customer.lastName.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.customer.lastName.placeholder"),class:"mb-3",onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(r,{cols:"12"},{default:o(()=>[l(p,{modelValue:W.value,"onUpdate:modelValue":a[6]||(a[6]=n=>W.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.customer.company.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.customer.company.placeholder"),class:"mb-3",onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1}),l(r,{cols:"12",md:"8"},{default:o(()=>[l(De,{disabled:!k.value,loading:!k.value,class:"action-card mb-6 fill-height"},{default:o(()=>[l(Ke,null,{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.action.title")),1)]),_:1}),l(Re,{class:"pb-0"},{default:o(()=>[l(T,{dense:""},{default:o(()=>[l(r,{cols:"12",md:"3"},{default:o(()=>[h("div",ta,[l(Bl,{modelValue:K.value,"onUpdate:modelValue":a[7]||(a[7]=n=>K.value=n),class:"v-tabs-pill",color:"primary",direction:"vertical"},{default:o(()=>[(U(),H(He,{key:0,value:t($.Api).HubriseServiceType.DELIVERY},{default:o(()=>[l(z,{class:"me-2",icon:"mdi-moped"}),h("div",oa,c(("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.title")),1)]),_:1},8,["value"])),(U(),H(He,{key:1,value:t($.Api).HubriseServiceType.COLLECTION},{default:o(()=>[l(z,{class:"me-2",icon:"bx-walk"}),h("div",na,c(("$t"in e?e.$t:t(d))("page.order.add.section.action.pickup.title")),1)]),_:1},8,["value"])),(U(),H(He,{key:2,value:t($.Api).HubriseServiceType.EAT_IN},{default:o(()=>[l(z,{class:"me-2",icon:"ic-baseline-table-bar"}),h("div",da,c(("$t"in e?e.$t:t(d))("page.order.add.section.action.eatin.title")),1)]),_:1},8,["value"]))]),_:1},8,["modelValue"])])]),_:1}),l(r,{cols:"12",md:"9"},{default:o(()=>[l(Ml,{modelValue:K.value,"onUpdate:modelValue":a[21]||(a[21]=n=>K.value=n),touch:!1,class:"w-100"},{default:o(()=>[l(Oe,{value:t($.Api).HubriseServiceType.DELIVERY},{default:o(()=>[h("div",ra,[l(T,{class:"v-row-small"},{default:o(()=>[l(r,{cols:"12",md:"6"},{default:o(()=>[l(v,{modelValue:Y.value,"onUpdate:modelValue":[a[8]||(a[8]=n=>Y.value=n),Cl],"item-title":Vl,items:he.value,label:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.address1.label"),loading:x.value,menu:Be.value,placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.address1.placeholder"),clearable:"","item-value":"id",onInput:tl,onKeyup:g(f,["enter"]),"onClick:clear":Al},null,8,["modelValue","items","label","loading","menu","placeholder"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(p,{modelValue:oe.value,"onUpdate:modelValue":a[9]||(a[9]=n=>oe.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.address2.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.address2.placeholder"),onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(r,{cols:"12",md:"4"},{default:o(()=>[l(p,{modelValue:ee.value,"onUpdate:modelValue":a[10]||(a[10]=n=>ee.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.city.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.city.placeholder"),onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(r,{cols:"12",md:"4"},{default:o(()=>[l(p,{modelValue:le.value,"onUpdate:modelValue":a[11]||(a[11]=n=>le.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.zipcode.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.zipcode.placeholder"),onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(r,{cols:"12",md:"4"},{default:o(()=>[l(V,{modelValue:R.value,"onUpdate:modelValue":a[12]||(a[12]=n=>R.value=n),items:t(qe),label:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.country.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.country.placeholder"),"item-title":"label","item-value":"code",onKeyup:g(f,["enter"])},null,8,["modelValue","items","label","placeholder"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(C,{modelValue:be.value,"onUpdate:modelValue":a[13]||(a[13]=n=>be.value=n),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",minDate:t(F)},label:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.date.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.date.placeholder"),onKeyup:g(f,["enter"])},null,8,["modelValue","config","label","placeholder"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(C,{modelValue:$e.value,"onUpdate:modelValue":a[14]||(a[14]=n=>$e.value=n),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:10},label:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.time.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.time.placeholder"),format:"24h",onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(r,{class:"not-small",cols:"12"},{default:o(()=>[l(s,{modelValue:Ae.value,"onUpdate:modelValue":a[15]||(a[15]=n=>Ae.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.notes.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.delivery.notes.placeholder"),"auto-grow":"",counter:"",maxlength:"300",rows:"1",onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1})])]),_:1},8,["value"]),l(Oe,{value:t($.Api).HubriseServiceType.COLLECTION},{default:o(()=>[h("div",sa,[h("div",ia,[h("div",ua,[l(C,{modelValue:_e.value,"onUpdate:modelValue":a[16]||(a[16]=n=>_e.value=n),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",minDate:t(F)},label:("$t"in e?e.$t:t(d))("page.order.add.section.action.pickup.date.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.pickup.date.placeholder"),onKeyup:g(f,["enter"])},null,8,["modelValue","config","label","placeholder"])]),h("div",ma,[l(C,{modelValue:ke.value,"onUpdate:modelValue":a[17]||(a[17]=n=>ke.value=n),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:10},label:("$t"in e?e.$t:t(d))("page.order.add.section.action.pickup.time.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.pickup.time.placeholder"),onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])])])])]),_:1},8,["value"]),l(Oe,{value:t($.Api).HubriseServiceType.EAT_IN},{default:o(()=>[h("div",ca,[h("div",pa,[l(Gl,{modelValue:Ue.value,"onUpdate:modelValue":a[18]||(a[18]=n=>Ue.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.action.eatin.table.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.eatin.table.placeholder"),variant:"underlined",onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),h("div",va,[h("div",fa,[l(C,{modelValue:Te.value,"onUpdate:modelValue":a[19]||(a[19]=n=>Te.value=n),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",minDate:t(F)},label:("$t"in e?e.$t:t(d))("page.order.add.section.action.eatin.date.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.eatin.date.placeholder"),onKeyup:g(f,["enter"])},null,8,["modelValue","config","label","placeholder"])]),h("div",ga,[l(C,{modelValue:Ee.value,"onUpdate:modelValue":a[20]||(a[20]=n=>Ee.value=n),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:10},label:("$t"in e?e.$t:t(d))("page.order.add.section.action.eatin.time.label"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.action.eatin.time.placeholder"),onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])])])])]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1}),l(r,{class:"pt-0 mt-0",cols:"12",md:"12"},{default:o(()=>[l(De,{disabled:!k.value||!I.value,loading:!k.value||!I.value},{default:o(()=>[l(Ke,null,{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.title")),1)]),_:1}),l(Re,null,{default:o(()=>[l(T,{dense:""},{default:o(()=>[l(r,{cols:"2",md:"2"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.reference")),1)]),_:1}),l(r,{cols:"2",md:"4"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.name")),1)]),_:1}),l(r,{cols:"2",md:"1"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.quantity")),1)]),_:1}),l(r,{cols:"2",md:"1"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.vat")),1)]),_:1}),l(r,{cols:"1",md:"1"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.price")),1)]),_:1}),l(r,{class:"text-center",cols:"2",md:"2"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.subtotal")),1)]),_:1}),l(r,{cols:"1",md:"1"})]),_:1}),(U(!0),re(Le,null,il(L.value,n=>(U(),re(Le,{key:n.id},[l(T,{dense:""},{default:o(()=>[l(r,{cols:"4",md:"2"},{default:o(()=>[n.sku_ref!==null?(U(),H(b,{key:0,modelValue:n.sku_ref,"onUpdate:modelValue":[u=>n.sku_ref=u,u=>el(u,n)],items:t(Ye),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.item.reference"),"item-title":"sku_ref","item-value":"id","no-data-text":"common.component.noData",onKeyup:g(f,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])):te("",!0)]),_:2},1024),l(r,{cols:"6",md:"4"},{default:o(()=>[l(b,{modelValue:n.product_name,"onUpdate:modelValue":[u=>n.product_name=u,u=>el(u,n)],items:t(O),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.item.name"),"item-title":"product_name","item-value":"id","no-data-text":"common.component.noData",onKeyup:g(f,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])]),_:2},1024),l(r,{cols:"2",md:"1"},{default:o(()=>[l(p,{modelValue:n.quantity,"onUpdate:modelValue":u=>n.quantity=u,clearable:!1,min:"1",placeholder:"1",type:"number",onKeyup:g(f,["enter"])},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(r,{class:"align-self-end",cols:"3",md:"1"},{default:o(()=>[y(c(Je(n.tax_rate)),1)]),_:2},1024),l(r,{class:"align-self-end",cols:"3",md:"1"},{default:o(()=>[y(c(t(w)(n.price)),1)]),_:2},1024),l(r,{class:"align-self-end text-center",cols:"3",md:"2"},{default:o(()=>[y(c(t(w)(t($.Api).HubrisePriceUtil.multiply(n.price,n.quantity))),1)]),_:2},1024),l(r,{class:"px-0",cols:"3",md:"1"},{default:o(()=>[l(A,{"x-small":"",onClick:u=>n.customer_notes=n.customer_notes===void 0?null:void 0},{default:o(()=>[l(z,{icon:"bx-edit"})]),_:2},1032,["onClick"]),l(A,{onClick:u=>$l(n)},{default:o(()=>[l(z,{icon:"bx-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),(U(!0),re(Le,null,il(n.options,u=>(U(),re("div",{key:u.ref},[l(T,{dense:""},{default:o(()=>[l(r,{class:"d-flex align-self-end",cols:"4",md:"2"},{default:o(()=>[l(Fe),u.ref!==null?(U(),H(b,{key:0,modelValue:u.ref,"onUpdate:modelValue":[E=>u.ref=E,E=>ll(n.id,E,u)],items:t(ce)[n.id],placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.item.reference"),"item-title":"ref","item-value":"id","no-data-text":"common.component.noData",onKeyup:g(f,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])):te("",!0)]),_:2},1024),l(r,{class:"d-flex align-self-end",cols:"6",md:"4"},{default:o(()=>[l(Fe),l(b,{modelValue:u.name,"onUpdate:modelValue":[E=>u.name=E,E=>ll(n.id,E,u)],items:t(S)[n.id],placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.item.name"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData",onKeyup:g(f,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])]),_:2},1024),l(r,{class:"d-flex align-self-end",cols:"2",md:"1"},{default:o(()=>[l(p,{modelValue:u.quantity,"onUpdate:modelValue":E=>u.quantity=E,clearable:!1,min:"1",placeholder:"1",type:"number",onKeyup:g(f,["enter"])},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(r,{class:"align-self-end",cols:"3",md:"1"},{default:o(()=>[y(c(Je(n.tax_rate)),1)]),_:2},1024),l(r,{class:"align-self-end",cols:"3",md:"1"},{default:o(()=>[y(c(t(w)(u.price)),1)]),_:2},1024),l(r,{class:"align-self-end text-center",cols:"3",md:"2"},{default:o(()=>[y(c(t(w)(t($.Api).HubrisePriceUtil.multiply(u.price,u.quantity))),1)]),_:2},1024),l(r,{cols:"3",md:"1"},{default:o(()=>[l(A,{onClick:E=>hl(n,u)},{default:o(()=>[l(z,{icon:"bx-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),l(T,{dense:""},{default:o(()=>[l(r,{cols:"0",md:"2"}),l(r,{cols:"12",md:"5"},{default:o(()=>{var u;return[((u=t(S)[n.id])==null?void 0:u.length)>0?(U(),H(P,{key:0,class:"mt-6",color:"secondary","prepend-icon":"bx-plus",size:"x-small",onClick:E=>xe(n)},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.button.add.itemOption")),1)]),_:2},1032,["onClick"])):te("",!0)]}),_:2},1024),l(r,{cols:"12",md:"4"},{default:o(()=>[n.customer_notes!==void 0?(U(),H(s,{key:0,modelValue:n.customer_notes,"onUpdate:modelValue":u=>n.customer_notes=u,label:("$t"in e?e.$t:t(d))("page.order.add.section.item.itemNotes"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.item.itemNotes"),"auto-grow":"",counter:"",maxlength:"300",rows:"1",onKeyup:g(f,["enter"])},null,8,["modelValue","onUpdate:modelValue","label","placeholder"])):te("",!0)]),_:2},1024),l(r,{cols:"0",md:"1"})]),_:2},1024)],64))),128)),l(T,{dense:""},{default:o(()=>[l(r,{cols:"12"},{default:o(()=>[l(P,{class:"mt-6",color:"secondary","prepend-icon":"bx-plus",size:"small",onClick:Qe},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.button.add.item")),1)]),_:1})]),_:1}),l(r,{class:"px-4 py-8",cols:"6",md:"3"},{default:o(()=>[l(s,{modelValue:pe.value,"onUpdate:modelValue":a[22]||(a[22]=n=>pe.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.item.customerNotes"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.item.customerNotes"),"auto-grow":"",counter:"",maxlength:"500",rows:"4",onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(r,{class:"px-4 py-8",cols:"6",md:"3"},{default:o(()=>[l(Fe),l(s,{modelValue:ve.value,"onUpdate:modelValue":a[23]||(a[23]=n=>ve.value=n),label:("$t"in e?e.$t:t(d))("page.order.add.section.item.sellerNotes"),placeholder:("$t"in e?e.$t:t(d))("page.order.add.section.item.sellerNotes"),"auto-grow":"",counter:"",maxlength:"500",rows:"4",onKeyup:g(f,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(r,{cols:"0",md:"1"}),l(r,{cols:"12",md:"5"},{default:o(()=>[l(T,{dense:""},{default:o(()=>[l(r,{class:"align-self-end",cols:"6",md:"5"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.subtotal")),1)]),_:1}),l(r,{class:"text-center",cols:"6",md:"4"},{default:o(()=>[y(c(t(w)(t(we).subtotal)),1)]),_:1}),l(r,{cols:"0",md:"3"})]),_:1}),l(T,{dense:""},{default:o(()=>[l(r,{class:"align-self-end",cols:"6",md:"5"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.minimumOrderFee")),1)]),_:1}),l(r,{class:"text-center",cols:"6",md:"4"},{default:o(()=>[y(c(t(w)(t(we).minimumOrderFee)),1)]),_:1}),l(r,{cols:"0",md:"3"})]),_:1}),K.value===t($.Api).HubriseServiceType.DELIVERY?(U(),H(T,{key:0,dense:""},{default:o(()=>[l(r,{class:"align-self-end",cols:"6",md:"5"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.deliveryFee")),1)]),_:1}),l(r,{class:"text-center pa-0",cols:"6",md:"4"},{default:o(()=>[l(Wl,{modelValue:fe.value,"onUpdate:modelValue":a[24]||(a[24]=n=>fe.value=n),disabled:!0,items:ze.value,loading:ze.value.length===0,class:"d-inline-flex","item-title":"name","item-value":"value",variant:"plain"},null,8,["modelValue","items","loading"])]),_:1}),l(r,{cols:"0",md:"3"})]),_:1})):te("",!0),l(T,{dense:""},{default:o(()=>[l(r,{class:"align-self-end",cols:"6",md:"5"},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.section.item.total")),1)]),_:1}),l(r,{class:"text-center",cols:"6",md:"4"},{default:o(()=>[y(c(t(w)(t(we).total)),1)]),_:1}),l(r,{cols:"0",md:"3"})]),_:1}),l(T,{dense:""},{default:o(()=>[l(r,{cols:"12",md:"9"},{default:o(()=>[l(P,{disabled:We(),loading:j.value,class:"w-100",onClick:Ze},{default:o(()=>[y(c(("$t"in e?e.$t:t(d))("page.order.add.button.create")),1)]),_:1},8,["disabled","loading"])]),_:1}),l(r,{cols:"0",md:"3"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},512)}}}),vt=Xl(ya,[["__scopeId","data-v-d3f34006"]]);export{vt as default};
