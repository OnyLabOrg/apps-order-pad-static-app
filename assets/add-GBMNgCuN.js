import{D as ve,$ as Ge,c as O,h as L,a as j,b as fe,d as n,e as I}from"./Http-DV9Vuuyq.js";import{_ as Ke}from"./AppTextarea.vue_vue_type_script_setup_true_lang-BzLfqFeX.js";import{_ as We}from"./AppAutocomplete.vue_vue_type_script_setup_true_lang-E4kgWfcx.js";import{_ as Xe}from"./AppSelect.vue_vue_type_script_setup_true_lang-fyBZqOE3.js";import{_ as Ze}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-6E6xT8xX.js";import{_ as Je}from"./AppTextField.vue_vue_type_script_setup_true_lang-MGLnB3Cf.js";import{_ as Qe}from"./AppCombobox.vue_vue_type_script_setup_true_lang-Bqr-V4nV.js";import{$ as z}from"./api-C-BIAxWG.js";import{V as be}from"./VSelect-S0AwqT-x.js";import{d as xe,r as p,X as el,G as ll,ai as al,c as H,e as b,b as l,v as c,m as o,g as _,l as N,f as d,ah as Y,a as ol,o as y,t as v,x as Oe,$ as F,F as $e,i as Re}from"./index-DzetvRAp.js";import{V as C,a as i}from"./VRow-B0pjaGGy.js";import{V as ge}from"./VCard-DTB9bb7E.js";import{V as ye}from"./VCardText-DgpL-wu_.js";import{V as Fe}from"./VCheckbox-B01Ko-lp.js";import{a as tl,V as he}from"./VTabs-BXaRLwuj.js";import{V as dl,a as Ve}from"./VWindowItem-CrRvh83k.js";import{V as nl}from"./VTextField-CNL_d7Ts.js";import{V as qe}from"./VSpacer-ZOoMV8to.js";import{_ as il}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./form-BrBNxS1M.js";/* empty css                   */import"./VCounter-Dm8RTp2R.js";import"./VImg-CyOI31rt.js";import"./VField-CGm1Afei.js";import"./easing-Bybner-F.js";import"./VInput-BRztML1A.js";import"./forwardRefs-C-GTDzx5.js";import"./filter-BOaIN8vi.js";import"./VList-CLql2WTq.js";import"./ssrBoot-BB6G3_Jw.js";import"./VAvatar-BDVa-7jB.js";import"./VDivider-BHJwRuNU.js";import"./VMenu-BqsEwrZl.js";import"./VOverlay-YzIt6Eyo.js";import"./delay-6bI2gso5.js";import"./lazy-DFntx2DH.js";import"./scopeId-DyWJMX96.js";import"./dialog-transition-DzM18kFd.js";import"./VCheckboxBtn-HG_lM-Mm.js";import"./VSelectionControl-B9jpTO0y.js";import"./VChip-C_S5K5UH.js";import"./VSlideGroup-CrTZmZHD.js";import"./index-CvOPxmL5.js";/* empty css              */const sl={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},rl={class:"d-flex flex-column justify-center"},ul={class:"text-h4 mb-1"},ml={class:"text-body-1"},cl={class:"d-flex gap-4 align-center flex-wrap"},pl={class:"pe-3"},vl={class:"text-truncate font-weight-medium text-start"},fl={class:"text-truncate font-weight-medium text-start"},bl={class:"text-truncate font-weight-medium text-start"},$l={class:"ps-md-3"},gl={class:"text-h5 mb-3"},yl={class:"ps-md-3"},hl={class:"mb-2 text-h6"},Vl={class:"d-flex flex-sm-row flex-column flex-wrap justify-space-between gap-x-6 gap-y-4"},kl={class:"flex-grow-1"},Ul={class:"flex-grow-1"},Al={class:"ps-md-3"},wl={class:"text-h5 mb-3"},Tl={class:"d-flex flex-sm-row flex-column flex-wrap justify-space-between gap-x-6 gap-y-4"},Cl={class:"flex-grow-1"},El={class:"flex-grow-1"},Pl={class:"mt-3"},_l=xe({__name:"add",setup(Dl){const G=[{from:"1900-01-01",to:ve.local().minus({days:1}).toISODate()}],ke=Ge("common.country"),Le=Object.keys(ke).map(e=>{var a,m;return{code:e,label:(m=(a=ke[e])==null?void 0:a.body)==null?void 0:m.static}}).filter(e=>e.label!==void 0),h=p(),K=p(),V=p();let Ue=[],S=[],W={},U={};const A=p();A.value=null;const w=p();w.value=null;const E=p();E.value=null;const P=p([{}]),X=p(),Z=p(),J=p(),q=p(),Q=p(!0),x=p(),ee=p(!0),D=p("delivery"),le=ve.local().toISODate(),ae=ve.local().toISOTime({suppressSeconds:!0,suppressMilliseconds:!0,includeOffset:!1}),oe=p(le),te=p(ae),de=p(),ne=p(),ie=p(),se=p(),B=p(),re=p(le),ue=p(ae),me=p(le),ce=p(ae),pe=p(),R=p(!1),je=()=>{P.value===void 0||P.value===null||(P.value=P.value.filter(e=>{var a;return e.options=(a=e.options)==null?void 0:a.filter(m=>"id"in m&&m.id!==void 0&&m.id!==null),"id"in e&&e.id!==void 0&&e.id!==null}))},Ae=()=>{var m,u,f,T,k,r;let e;switch(D.value){case"delivery":e=fe(oe.value,te.value,(u=(m=h.value)==null?void 0:m.timezone)==null?void 0:u.name);break;case"collection":e=fe(re.value,ue.value,(T=(f=h.value)==null?void 0:f.timezone)==null?void 0:T.name);break;case"eat_in":e=fe(me.value,ce.value,(r=(k=h.value)==null?void 0:k.timezone)==null?void 0:r.name);break}const a={first_name:X.value,last_name:Z.value,company_name:J.value,email:x.value,email_marketing:ee.value,phone:q.value,sms_marketing:Q.value};return D.value==="delivery"&&(a.address_1=de.value,a.address_2=ne.value,a.postal_code=se.value,a.city=ie.value,a.country=B.value),{service_type:D.value,table_name:pe.value??void 0,expected_time:e??void 0,customer:a,items:P.value}},M=el(()=>new O.Api.TotalHubriseCalculator().calculateTotals(Ae(),O.Api.HubriseCurrencyCode.EUR)),we=()=>{var a;const e=(a=h.value)==null?void 0:a.id;e!=null&&(R.value=!0,je(),z("orderpad/order",{method:"POST",body:{locationId:e,...Ae()},onResponseError({response:m}){R.value=!1,L(m)}}).then(m=>{var u;R.value=!1,alert(`Order ${(u=m.order)==null?void 0:u.ref} created!`),window.location.reload()}).catch(m=>{R.value=!1,j(m)}))},Te=e=>{if(typeof e=="object"&&e!==null)switch(D.value){case"delivery":return`${e.delivery}%`;case"collection":return`${e.collection}%`;case"eat_in":return`${e.eat_in}%`}return""},ze=()=>{var a,m,u,f,T,k;if(V.value===void 0||V.value===null)return;const e={};(u=(m=(a=V.value)==null?void 0:a.data)==null?void 0:m.categories)==null||u.forEach(r=>{e[r.id]=r.name}),S=((k=(T=(f=V.value)==null?void 0:f.data)==null?void 0:T.products)==null?void 0:k.map(r=>{var s,g;const $=r.ref??(((s=r.skus)==null?void 0:s.length)===1&&(!Array.isArray(r.skus[0].option_list_ids)||r.skus[0].option_list_ids.length===0)?r.skus[0].ref:null),t=((g=r.skus)==null?void 0:g.length)===1&&(!Array.isArray(r.skus[0].option_list_ids)||r.skus[0].option_list_ids.length===0)?r.skus[0].price:null;return{id:r.id,sku_ref:$,category:e[r.category_id],product_name:r.name,quantity:1,tax_rate:r.tax_rate,price:t,customer_notes:void 0}}).sort((r,$)=>{var t,s;return((t=r.category)==null?void 0:t.localeCompare($.category??""))||((s=r.name)==null?void 0:s.localeCompare($.name??""))}))??[],Ue=(S==null?void 0:S.filter(r=>r.sku_ref!==void 0&&r.sku_ref!==null))??[]},He=()=>{var a,m,u,f,T,k;if(V.value===void 0||V.value===null)return;const e={};(u=(m=(a=V.value)==null?void 0:a.data)==null?void 0:m.option_lists)==null||u.forEach(r=>{e[r.id]=r}),U={},(k=(T=(f=V.value)==null?void 0:f.data)==null?void 0:T.products)==null||k.forEach(r=>{U[r.id]=[],!(!Array.isArray(r.skus)||r.skus.length===0||!Array.isArray(r.skus[0].option_list_ids)||r.skus[0].option_list_ids.length===0)&&(r.skus.forEach($=>{if(Array.isArray($.option_list_ids)&&$.option_list_ids.length>0)$.option_list_ids.forEach(t=>{const s=e[t];s!==void 0&&(!Array.isArray(s.options)||s.options.length===0||s.options.forEach(g=>{const Me=O.Api.HubrisePriceUtil.sum([$.price??null,g.price??null]);U[r.id].push({id:`${$.id}-${s.id}-${g.id}`,ref:g.ref??null,option_list_name:s.name,name:g.name,quantity:1,price:Me})}))});else{const t=$.price??null;U[r.id].push({id:$.id,ref:$.ref??null,name:$.name,quantity:1,price:t})}}),U[r.id].sort(($,t)=>{var s;return(s=$.name)==null?void 0:s.localeCompare(t.name??"")}))}),W={},Object.keys(U).forEach(r=>{var $;W[r]=(($=U[r])==null?void 0:$.filter(t=>t.ref!==void 0&&t.ref!==null))??[]})},Ce=()=>{P.value.push({})},Ye=e=>{const a=P.value.findIndex(m=>m===e);a>=0&&P.value.splice(a,1)},Ee=e=>{Array.isArray(e.options)||(e.options=[]),e.options.push({})},Be=(e,a)=>{const m=e.options.findIndex(u=>u===a);m>=0&&e.options.splice(m,1)},Pe=(e,a)=>{const m=S==null?void 0:S.find(u=>u.id===e);m!==void 0&&(O.Util.ObjectUtil.update(a,m),Array.isArray(U[e])&&U[e].length>0&&Ee(a))},_e=(e,a,m)=>{var f;const u=(f=U[e])==null?void 0:f.find(T=>T.id===a);u!==void 0&&O.Util.ObjectUtil.update(m,u)},De=e=>{var a;[void 0,null,""].includes(e)||(K.value=(a=w.value)==null?void 0:a.find(m=>m.id===e))},Se=e=>{[void 0,null,""].includes(e)||z(`orderpad/catalog?catalogId=${e}`,{method:"GET",onResponseError({response:a}){V.value=void 0,L(a)}}).then(a=>{V.value=a.catalog,ze(),He()}).catch(a=>{V.value=void 0,j(a)})},Ie=e=>{var a,m;[void 0,null,""].includes(e)||(h.value=(a=A.value)==null?void 0:a.find(u=>u.id===e),typeof((m=h.value)==null?void 0:m.country)=="string"&&(B.value=h.value.country),w.value=void 0,z(`orderpad/customers/list?locationId=${e}`,{method:"GET",onResponseError({response:u}){w.value=[],L(u)}}).then(u=>{var f;w.value=u.lists,((f=w.value)==null?void 0:f.length)===1&&De(w.value[0].id)}).catch(u=>{w.value=[],j(u)}),E.value=void 0,z(`orderpad/catalogs?locationId=${e}`,{method:"GET",onResponseError({response:u}){E.value=[],L(u)}}).then(u=>{var f;E.value=u.catalogs,((f=E.value)==null?void 0:f.length)===1&&Se(E.value[0].id)}).catch(u=>{E.value=[],j(u)}))},Ne=e=>{const a=e.target;a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.isContentEditable||(e.key==="+"||e.key==="Add"||e.code==="NumpadAdd"||e.shiftKey&&(e.key==="="||e.code==="Equal"))&&Ce()};return ll(()=>{window.addEventListener("keydown",Ne),A.value=void 0,z("orderpad/locations",{method:"GET",onResponseError({response:e}){A.value=[],L(e)}}).then(e=>{var a;A.value=e.locations,((a=A.value)==null?void 0:a.length)===1&&Ie(A.value[0].id)}).catch(e=>{A.value=[],j(e)})}),al(()=>{window.removeEventListener("keydown",Ne)}),(e,a)=>{const m=Qe,u=Je,f=Ze,T=Xe,k=We,r=ol("IconBtn"),$=Ke;return y(),H("div",null,[b("div",sl,[b("div",rl,[b("h4",ul,c(("$t"in e?e.$t:o(n))("page.order.add.title")),1),b("div",ml,c(("$t"in e?e.$t:o(n))("page.order.add.subtitle")),1)]),b("div",cl,[A.value!==null?(y(),_(be,{key:0,disabled:A.value===void 0,items:A.value,label:("$t"in e?e.$t:o(n))("page.order.add.button.location.label"),loading:A.value===void 0,placeholder:("$t"in e?e.$t:o(n))("page.order.add.button.location.placeholder"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData",style:{width:"200px"},variant:"underlined","onUpdate:modelValue":Ie},null,8,["disabled","items","label","loading","placeholder"])):N("",!0),w.value!==null?(y(),_(be,{key:1,disabled:w.value===void 0,items:w.value,label:("$t"in e?e.$t:o(n))("page.order.add.button.customerList.label"),loading:w.value===void 0,placeholder:("$t"in e?e.$t:o(n))("page.order.add.button.customerList.placeholder"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData",style:{width:"200px"},variant:"underlined","onUpdate:modelValue":De},null,8,["disabled","items","label","loading","placeholder"])):N("",!0),E.value!==null?(y(),_(be,{key:2,disabled:E.value===void 0,items:E.value,label:("$t"in e?e.$t:o(n))("page.order.add.button.catalog.label"),loading:E.value===void 0,placeholder:("$t"in e?e.$t:o(n))("page.order.add.button.catalog.placeholder"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData",style:{width:"200px"},variant:"underlined","onUpdate:modelValue":Se},null,8,["disabled","items","label","loading","placeholder"])):N("",!0),l(Y,{color:"secondary",onclick:"window.location.reload()",variant:"tonal"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.button.discard")),1)]),_:1}),l(Y,{disabled:!q.value||P.value.length===0,loading:R.value,onClick:we},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.button.create")),1)]),_:1},8,["disabled","loading"])])]),l(C,null,{default:d(()=>[l(i,{cols:"12",md:"4"},{default:d(()=>[l(ge,{disabled:!h.value||!K.value,loading:!h.value||!K.value,title:("$t"in e?e.$t:o(n))("page.order.add.section.customer.title"),class:"mb-6"},{default:d(()=>[l(ye,null,{default:d(()=>[l(m,{modelValue:q.value,"onUpdate:modelValue":a[0]||(a[0]=t=>q.value=t),items:["+33606060606"],label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.phone.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.customer.phone.placeholder")},null,8,["modelValue","label","placeholder"]),l(Fe,{modelValue:Q.value,"onUpdate:modelValue":a[1]||(a[1]=t=>Q.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.smsMarketing.label")},null,8,["modelValue","label"]),l(m,{modelValue:x.value,"onUpdate:modelValue":a[2]||(a[2]=t=>x.value=t),items:["test@onylab.com"],label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.email.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.customer.email.placeholder")},null,8,["modelValue","label","placeholder"]),l(Fe,{modelValue:ee.value,"onUpdate:modelValue":a[3]||(a[3]=t=>ee.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.emailMarketing.label")},null,8,["modelValue","label"]),l(u,{modelValue:X.value,"onUpdate:modelValue":a[4]||(a[4]=t=>X.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.firstName.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.customer.firstName.placeholder"),class:"mb-3"},null,8,["modelValue","label","placeholder"]),l(u,{modelValue:Z.value,"onUpdate:modelValue":a[5]||(a[5]=t=>Z.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.lastName.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.customer.lastName.placeholder"),class:"mb-3"},null,8,["modelValue","label","placeholder"]),l(u,{modelValue:J.value,"onUpdate:modelValue":a[6]||(a[6]=t=>J.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.customer.company.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.customer.company.placeholder"),class:"mb-3"},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1},8,["disabled","loading","title"])]),_:1}),l(i,{cols:"12",md:"8"},{default:d(()=>[l(ge,{disabled:!h.value,loading:!h.value,title:("$t"in e?e.$t:o(n))("page.order.add.section.action.title"),class:"action-card"},{default:d(()=>[l(ye,null,{default:d(()=>[l(C,null,{default:d(()=>[l(i,{class:Oe(e.$vuetify.display.mdAndUp?"border-e":"border-b pb-6"),cols:"12",md:"4"},{default:d(()=>[b("div",pl,[l(tl,{modelValue:D.value,"onUpdate:modelValue":a[7]||(a[7]=t=>D.value=t),class:"v-tabs-pill",color:"primary",direction:"vertical"},{default:d(()=>[(y(),_(he,{key:0,value:"delivery"},{default:d(()=>[l(F,{class:"me-2",icon:"mdi-moped"}),b("div",vl,c(("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.title")),1)]),_:1})),(y(),_(he,{key:1,value:"collection"},{default:d(()=>[l(F,{class:"me-2",icon:"bx-walk"}),b("div",fl,c(("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.title")),1)]),_:1})),(y(),_(he,{key:2,value:"eat_in"},{default:d(()=>[l(F,{class:"me-2",icon:"ic-baseline-table-bar"}),b("div",bl,c(("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.title")),1)]),_:1}))]),_:1},8,["modelValue"])])]),_:1},8,["class"]),l(i,{class:Oe(e.$vuetify.display.mdAndDown?"pt-6":""),cols:"12",md:"8"},{default:d(()=>[l(dl,{modelValue:D.value,"onUpdate:modelValue":a[20]||(a[20]=t=>D.value=t),touch:!1,class:"w-100"},{default:d(()=>[l(Ve,{value:"delivery"},{default:d(()=>[b("div",$l,[b("h5",gl,c(("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.title")),1),l(C,{class:"mt-2"},{default:d(()=>[l(i,{cols:"6"},{default:d(()=>[l(f,{modelValue:oe.value,"onUpdate:modelValue":a[8]||(a[8]=t=>oe.value=t),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",disable:G},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.date.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.date.placeholder")},null,8,["modelValue","config","label","placeholder"])]),_:1}),l(i,{cols:"6"},{default:d(()=>[l(f,{modelValue:te.value,"onUpdate:modelValue":a[9]||(a[9]=t=>te.value=t),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.time.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.time.placeholder")},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(u,{modelValue:de.value,"onUpdate:modelValue":a[10]||(a[10]=t=>de.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.address1.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.address1.placeholder")},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(u,{modelValue:ne.value,"onUpdate:modelValue":a[11]||(a[11]=t=>ne.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.address2.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.address2.placeholder")},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12",md:"6"},{default:d(()=>[l(u,{modelValue:ie.value,"onUpdate:modelValue":a[12]||(a[12]=t=>ie.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.city.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.city.placeholder")},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12",md:"6"},{default:d(()=>[l(u,{modelValue:se.value,"onUpdate:modelValue":a[13]||(a[13]=t=>se.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.zipcode.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.zipcode.placeholder"),type:"number"},null,8,["modelValue","label","placeholder"])]),_:1}),l(i,{cols:"12"},{default:d(()=>[l(T,{modelValue:B.value,"onUpdate:modelValue":a[14]||(a[14]=t=>B.value=t),items:o(Le),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.country.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.delivery.country.placeholder"),"item-title":"label","item-value":"code"},null,8,["modelValue","items","label","placeholder"])]),_:1})]),_:1})])]),_:1}),l(Ve,{value:"collection"},{default:d(()=>[b("div",yl,[b("div",hl,c(("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.title")),1),b("div",Vl,[b("div",kl,[l(f,{modelValue:re.value,"onUpdate:modelValue":a[15]||(a[15]=t=>re.value=t),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",disable:G},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.date.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.date.placeholder")},null,8,["modelValue","config","label","placeholder"])]),b("div",Ul,[l(f,{modelValue:ue.value,"onUpdate:modelValue":a[16]||(a[16]=t=>ue.value=t),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.time.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.pickup.time.placeholder")},null,8,["modelValue","label","placeholder"])])])])]),_:1}),l(Ve,{value:"eat_in"},{default:d(()=>[b("div",Al,[b("h5",wl,c(("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.title")),1),b("div",Tl,[b("div",Cl,[l(f,{modelValue:me.value,"onUpdate:modelValue":a[17]||(a[17]=t=>me.value=t),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",disable:G},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.date.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.date.placeholder")},null,8,["modelValue","config","label","placeholder"])]),b("div",El,[l(f,{modelValue:ce.value,"onUpdate:modelValue":a[18]||(a[18]=t=>ce.value=t),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"},label:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.time.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.time.placeholder")},null,8,["modelValue","label","placeholder"])])]),b("div",Pl,[l(nl,{modelValue:pe.value,"onUpdate:modelValue":a[19]||(a[19]=t=>pe.value=t),label:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.table.label"),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.action.eatin.table.placeholder"),variant:"underlined"},null,8,["modelValue","label","placeholder"])])])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])]),_:1})]),_:1})]),_:1},8,["disabled","loading","title"])]),_:1}),l(i,{class:"pt-0 mt-0",cols:"12",md:"12"},{default:d(()=>[l(ge,{disabled:!h.value||!V.value,loading:!h.value||!V.value,title:("$t"in e?e.$t:o(n))("page.order.add.section.item.title")},{default:d(()=>[l(ye,null,{default:d(()=>[l(C,null,{default:d(()=>[l(i,{cols:"2",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.reference")),1)]),_:1}),l(i,{cols:"2",md:"4"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.name")),1)]),_:1}),l(i,{cols:"2",md:"1"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.quantity")),1)]),_:1}),l(i,{cols:"2",md:"1"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.vat")),1)]),_:1}),l(i,{cols:"1",md:"1"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.price")),1)]),_:1}),l(i,{class:"text-center",cols:"2",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.subtotal")),1)]),_:1}),l(i,{cols:"1",md:"1"})]),_:1}),(y(!0),H($e,null,Re(P.value,t=>(y(),H($e,{key:t.id},[l(C,null,{default:d(()=>[l(i,{cols:"4",md:"2"},{default:d(()=>[t.sku_ref!==null?(y(),_(k,{key:0,modelValue:t.sku_ref,"onUpdate:modelValue":[s=>t.sku_ref=s,s=>Pe(s,t)],items:o(Ue),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.item.reference"),"item-title":"sku_ref","item-value":"id","no-data-text":"common.component.noData"},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])):N("",!0)]),_:2},1024),l(i,{cols:"6",md:"4"},{default:d(()=>[l(k,{modelValue:t.product_name,"onUpdate:modelValue":[s=>t.product_name=s,s=>Pe(s,t)],items:o(S),placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.item.name"),"item-title":"product_name","item-value":"id","no-data-text":"common.component.noData"},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])]),_:2},1024),l(i,{cols:"2",md:"1"},{default:d(()=>[l(u,{modelValue:t.quantity,"onUpdate:modelValue":s=>t.quantity=s,clearable:!1,min:"1",placeholder:"1",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(i,{class:"align-self-end",cols:"3",md:"1"},{default:d(()=>[v(c(Te(t.tax_rate)),1)]),_:2},1024),l(i,{class:"align-self-end",cols:"3",md:"1"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(t.price)),1)]),_:2},1024),l(i,{class:"align-self-end text-center",cols:"3",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(O.Api).HubrisePriceUtil.multiply(t.price,t.quantity))),1)]),_:2},1024),l(i,{class:"pl-0 pr-0",cols:"3",md:"1"},{default:d(()=>[l(r,{"x-small":"",onClick:s=>t.customer_notes=t.customer_notes===void 0?null:void 0},{default:d(()=>[l(F,{icon:"bx-edit"})]),_:2},1032,["onClick"]),l(r,{onClick:s=>Ye(t)},{default:d(()=>[l(F,{icon:"bx-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),(y(!0),H($e,null,Re(t.options,s=>(y(),H("div",{key:s.ref},[l(C,null,{default:d(()=>[l(i,{class:"d-flex align-self-end",cols:"4",md:"2"},{default:d(()=>[l(qe),s.ref!==null?(y(),_(k,{key:0,modelValue:s.ref,"onUpdate:modelValue":[g=>s.ref=g,g=>_e(t.id,g,s)],items:o(W)[t.id],placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.item.reference"),"item-title":"ref","item-value":"id","no-data-text":"common.component.noData"},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])):N("",!0)]),_:2},1024),l(i,{class:"d-flex align-self-end",cols:"6",md:"4"},{default:d(()=>[l(qe),l(k,{modelValue:s.name,"onUpdate:modelValue":[g=>s.name=g,g=>_e(t.id,g,s)],items:o(U)[t.id],placeholder:("$t"in e?e.$t:o(n))("page.order.add.section.item.name"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData"},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])]),_:2},1024),l(i,{class:"d-flex align-self-end",cols:"2",md:"1"},{default:d(()=>[l(u,{modelValue:s.quantity,"onUpdate:modelValue":g=>s.quantity=g,clearable:!1,min:"1",placeholder:"1",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(i,{class:"align-self-end",cols:"3",md:"1"},{default:d(()=>[v(c(Te(t.tax_rate)),1)]),_:2},1024),l(i,{class:"align-self-end",cols:"3",md:"1"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(s.price)),1)]),_:2},1024),l(i,{class:"align-self-end text-center",cols:"3",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(O.Api).HubrisePriceUtil.multiply(s.price,s.quantity))),1)]),_:2},1024),l(i,{cols:"3",md:"1"},{default:d(()=>[l(r,{onClick:g=>Be(t,s)},{default:d(()=>[l(F,{icon:"bx-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),l(C,null,{default:d(()=>[l(i,{cols:"0",md:"2"}),l(i,{cols:"12",md:"5"},{default:d(()=>{var s;return[((s=o(U)[t.id])==null?void 0:s.length)>0?(y(),_(Y,{key:0,class:"mt-6",color:"secondary","prepend-icon":"bx-plus",size:"x-small",onClick:g=>Ee(t)},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.button.add.itemOption")),1)]),_:2},1032,["onClick"])):N("",!0)]}),_:2},1024),l(i,{cols:"12",md:"4"},{default:d(()=>[t.customer_notes!==void 0?(y(),_($,{key:0,modelValue:t.customer_notes,"onUpdate:modelValue":s=>t.customer_notes=s,"auto-grow":"",placeholder:"Customer notes",rows:"1"},null,8,["modelValue","onUpdate:modelValue"])):N("",!0)]),_:2},1024),l(i,{cols:"0",md:"1"})]),_:2},1024)],64))),128)),l(Y,{class:"mt-6",color:"secondary","prepend-icon":"bx-plus",size:"small",onClick:Ce},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.button.add.item")),1)]),_:1}),l(C,null,{default:d(()=>[l(i,{cols:"0",md:"7"}),l(i,{cols:"6",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.subtotal")),1)]),_:1}),l(i,{class:"text-center",cols:"6",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(M).subtotal)),1)]),_:1}),l(i,{cols:"0",md:"1"})]),_:1}),D.value==="delivery"?(y(),_(C,{key:0},{default:d(()=>[l(i,{cols:"0",md:"7"}),l(i,{cols:"6",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.deliveryFee")),1)]),_:1}),l(i,{class:"text-center",cols:"6",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(M).deliveryFee)),1)]),_:1}),l(i,{cols:"0",md:"1"})]),_:1})):N("",!0),l(C,null,{default:d(()=>[l(i,{cols:"0",md:"7"}),l(i,{cols:"6",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.minimumOrderFee")),1)]),_:1}),l(i,{class:"text-center",cols:"6",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(M).minimumOrderFee)),1)]),_:1}),l(i,{cols:"0",md:"1"})]),_:1}),l(C,null,{default:d(()=>[l(i,{cols:"0",md:"7"}),l(i,{cols:"6",md:"2"},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.section.item.total")),1)]),_:1}),l(i,{class:"text-center",cols:"6",md:"2"},{default:d(()=>[v(c(("displayPrice"in e?e.displayPrice:o(I))(o(M).total)),1)]),_:1}),l(i,{cols:"0",md:"1"})]),_:1}),l(C,null,{default:d(()=>[l(i,{cols:"0",md:"7"}),l(i,{cols:"12",md:"4"},{default:d(()=>[l(Y,{disabled:!q.value||P.value.length===0,loading:R.value,class:"w-100",onClick:we},{default:d(()=>[v(c(("$t"in e?e.$t:o(n))("page.order.add.button.create")),1)]),_:1},8,["disabled","loading"])]),_:1}),l(i,{cols:"0",md:"1"})]),_:1})]),_:1})]),_:1},8,["disabled","loading","title"])]),_:1})]),_:1})])}}}),Ua=il(_l,[["__scopeId","data-v-2c89db0e"]]);export{Ua as default};
