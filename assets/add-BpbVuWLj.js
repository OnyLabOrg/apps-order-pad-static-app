import{D as ce,$ as Me,c as $,u as We,a as Xe,b as Ge,d as Ze,_ as Je,e as fe,f as n,g as L,h as Qe,i as xe}from"./usePageTitle-BABs9bYY.js";import{d as el,r as v,X as ll,G as al,ai as ol,c as H,e as V,b as l,v as m,m as a,f as o,ah as R,a as tl,o as E,t as c,di as f,g as K,$ as D,F as ve,i as He,l as F}from"./index-BcEMPdSp.js";import{_ as dl}from"./AppTextarea.vue_vue_type_script_setup_true_lang-DsIyrnmC.js";import{_ as nl}from"./AppAutocomplete.vue_vue_type_script_setup_true_lang-zOl_aWkF.js";import{_ as sl}from"./AppSelect.vue_vue_type_script_setup_true_lang-Bo6PyOrw.js";import{_ as il}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-Et7hMGj6.js";import{_ as rl}from"./AppTextField.vue_vue_type_script_setup_true_lang-B4v1drtE.js";import{_ as ul}from"./AppCombobox.vue_vue_type_script_setup_true_lang-FyGqJhsC.js";import{$ as ml}from"./api-DKyHEox5.js";import{V as A,a as s}from"./VRow-aHaBUZU3.js";import{V as ye,c as be}from"./VCard-DxIRRQpM.js";import{V as ge}from"./VCardText-Dqc5Nm2A.js";import{V as Re}from"./VCheckbox-BNmnmXhl.js";import{a as pl,V as $e}from"./VTabs-jOn0ZvWz.js";import{V as cl,a as Ve}from"./VWindowItem-Beh3KmCe.js";import{V as fl}from"./VTextField-CUq6ZQhf.js";import{V as he}from"./VSpacer-DYiAcd23.js";import{_ as vl}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VSelect-C23gkXxL.js";import"./form-BDBXNIcj.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-CLZjbUuU.js";import"./ssrBoot-CPV6N7pz.js";import"./VImg-u3CcimYa.js";import"./VAvatar-Dx5IUqkG.js";import"./VDivider-D9spFI3F.js";import"./dialog-transition-BUXK-yGO.js";import"./easing-Bybner-F.js";import"./VMenu-C_Y5hS2J.js";import"./VOverlay-ookb7s39.js";import"./delay-Bh-Vp7ck.js";import"./lazy-B64Kxku9.js";import"./scopeId-CH_fOOox.js";import"./VCheckboxBtn-CHrpKjct.js";import"./VSelectionControl-Cwfgm8RD.js";import"./VChip-Be7YHY5f.js";import"./VSlideGroup-B_j0elAi.js";/* empty css                   */import"./VCounter-D7hHxhlU.js";import"./VField-D-5LsUWc.js";import"./VInput-Bh3sW0xF.js";import"./filter-CDV-sICr.js";import"./index-CvOPxmL5.js";/* empty css              */const yl={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},bl={class:"d-flex flex-column justify-center"},gl={class:"text-h4 mb-1"},$l={class:"text-body-1"},Vl={class:"d-flex gap-4 align-center flex-wrap"},hl={class:"pe-3"},Cl={class:"text-truncate font-weight-medium text-start"},Al={class:"text-truncate font-weight-medium text-start"},Tl={class:"text-truncate font-weight-medium text-start"},kl={class:"ps-md-3"},El={class:"ps-md-3"},Ul={class:"d-flex flex-sm-row flex-column flex-wrap justify-space-between gap-x-6 gap-y-4"},_l={class:"flex-grow-1"},wl={class:"flex-grow-1"},Sl={class:"ps-md-3"},Il={class:"d-flex flex-sm-row flex-column flex-wrap justify-space-between gap-x-6 gap-y-4"},Nl={class:"flex-grow-1"},Ll={class:"flex-grow-1"},Kl={class:"mt-5"},Pl=el({__name:"add",setup(Dl){const j=[{from:"1900-01-01",to:ce.local().minus({days:1}).toISODate()}],Ce=Me("common.country"),Fe=Object.keys(Ce).map(e=>{var d,u;return{code:e,label:(u=(d=Ce[e])==null?void 0:d.body)==null?void 0:u.static}}).filter(e=>e.label!==void 0),T=v(),z=v(),_=v();let Ae=[],N=[],B={},U={};const w=v([{}]),M=v(),W=v(),X=v(),G=v(),Z=v(),O=v(),J=v(!0),Q=v(),x=v(!0),I=v($.Api.HubriseServiceType.DELIVERY),ee=ce.local().toISODate(),le=ce.local().toISOTime({suppressSeconds:!0,suppressMilliseconds:!0,includeOffset:!1}),ae=v(ee),oe=v(le),te=v(),de=v(),ne=v(),se=v(),Y=v(),ie=v(ee),re=v(le),ue=v(ee),me=v(le),pe=v(),P=v(!1),Ye=()=>{w.value===void 0||w.value===null||(w.value=w.value.filter(e=>{var d;return e.options=(d=e.options)==null?void 0:d.filter(u=>"id"in u&&u.id!==void 0&&u.id!==null),"id"in e&&e.id!==void 0&&e.id!==null}))},Te=()=>{var u,y,b,h,S,i;let e;switch(I.value){case $.Api.HubriseServiceType.DELIVERY:e=fe(ae.value,oe.value,(y=(u=T.value)==null?void 0:u.timezone)==null?void 0:y.name);break;case $.Api.HubriseServiceType.COLLECTION:e=fe(ie.value,re.value,(h=(b=T.value)==null?void 0:b.timezone)==null?void 0:h.name);break;case $.Api.HubriseServiceType.EAT_IN:e=fe(ue.value,me.value,(i=(S=T.value)==null?void 0:S.timezone)==null?void 0:i.name);break}const d={first_name:X.value,last_name:G.value,company_name:Z.value,email:Q.value,email_marketing:x.value,phone:O.value,sms_marketing:J.value};return I.value===$.Api.HubriseServiceType.DELIVERY&&(d.address_1=te.value,d.address_2=de.value,d.postal_code=se.value,d.city=ne.value,d.country=Y.value),{service_type:I.value,table_name:pe.value??void 0,expected_time:e??void 0,customer:d,items:w.value,customer_notes:M.value,seller_notes:W.value}},q=ll(()=>new $.Api.TotalHubriseCalculator().calculateTotals(Te(),$.Api.HubriseCurrencyCode.EUR)),ke=()=>{var d;const e=(d=T.value)==null?void 0:d.id;e!=null&&(P.value=!0,Ye(),ml("orderpad/order",{method:"POST",body:{locationId:e,...Te()},onResponseError({response:u}){P.value=!1,Qe(u)}}).then(u=>{var y;P.value=!1,alert(`Order ${(y=u.order)==null?void 0:y.ref} created!`),window.location.reload()}).catch(u=>{P.value=!1,xe(u)}))},Ee=e=>{if(typeof e=="object"&&e!==null)switch(I.value){case $.Api.HubriseServiceType.DELIVERY:return`${e.delivery}%`;case $.Api.HubriseServiceType.COLLECTION:return`${e.collection}%`;case $.Api.HubriseServiceType.EAT_IN:return`${e.eat_in}%`}return""},qe=()=>{var d,u,y,b,h,S;if(_.value===void 0||_.value===null)return;const e={};(y=(u=(d=_.value)==null?void 0:d.data)==null?void 0:u.categories)==null||y.forEach(i=>{e[i.id]=i.name}),N=((S=(h=(b=_.value)==null?void 0:b.data)==null?void 0:h.products)==null?void 0:S.map(i=>{var t,r;const g=i.ref??(((t=i.skus)==null?void 0:t.length)===1&&(!Array.isArray(i.skus[0].option_list_ids)||i.skus[0].option_list_ids.length===0)?i.skus[0].ref:null),C=((r=i.skus)==null?void 0:r.length)===1&&(!Array.isArray(i.skus[0].option_list_ids)||i.skus[0].option_list_ids.length===0)?i.skus[0].price:$.Api.HubrisePriceUtil.multiply(i.skus[0].price,0);return{id:i.id,sku_ref:g,category:e[i.category_id],product_name:i.name,quantity:1,tax_rate:i.tax_rate,price:C,customer_notes:void 0}}).sort((i,g)=>{var C,t;return((C=i.category)==null?void 0:C.localeCompare(g.category??""))||((t=i.name)==null?void 0:t.localeCompare(g.name??""))}))??[],Ae=(N==null?void 0:N.filter(i=>i.sku_ref!==void 0&&i.sku_ref!==null))??[]},je=()=>{var d,u,y,b,h,S;if(_.value===void 0||_.value===null)return;const e={};(y=(u=(d=_.value)==null?void 0:d.data)==null?void 0:u.option_lists)==null||y.forEach(i=>{e[i.id]=i}),U={},(S=(h=(b=_.value)==null?void 0:b.data)==null?void 0:h.products)==null||S.forEach(i=>{U[i.id]=[],!(!Array.isArray(i.skus)||i.skus.length===0||!Array.isArray(i.skus[0].option_list_ids)||i.skus[0].option_list_ids.length===0)&&(i.skus.forEach(g=>{if(Array.isArray(g.option_list_ids)&&g.option_list_ids.length>0)g.option_list_ids.forEach(C=>{const t=e[C];t!==void 0&&(!Array.isArray(t.options)||t.options.length===0||t.options.forEach(r=>{const k=$.Api.HubrisePriceUtil.sum([g.price??null,r.price??null]);U[i.id].push({id:`${g.id}-${t.id}-${r.id}`,ref:r.ref??null,option_list_name:t.name,name:r.name,quantity:1,price:k})}))});else{const C=g.price??null;U[i.id].push({id:g.id,ref:g.ref??null,name:g.name,quantity:1,price:C})}}),U[i.id].sort((g,C)=>{var t;return(t=g.name)==null?void 0:t.localeCompare(C.name??"")}))}),B={},Object.keys(U).forEach(i=>{var g;B[i]=((g=U[i])==null?void 0:g.filter(C=>C.ref!==void 0&&C.ref!==null))??[]})},Ue=()=>{w.value.push({})},ze=e=>{const d=w.value.findIndex(u=>u===e);d>=0&&w.value.splice(d,1)},_e=e=>{Array.isArray(e.options)||(e.options=[]),e.options.push({})},Be=(e,d)=>{const u=e.options.findIndex(y=>y===d);u>=0&&e.options.splice(u,1)},we=(e,d)=>{const u=N==null?void 0:N.find(y=>y.id===e);u!==void 0&&($.Util.ObjectUtil.update(d,u),Array.isArray(U[e])&&U[e].length>0&&_e(d))},Se=(e,d,u)=>{var b;const y=(b=U[e])==null?void 0:b.find(h=>h.id===d);y!==void 0&&$.Util.ObjectUtil.update(u,y)},Ie=e=>{const d=e.target;d.tagName==="INPUT"||d.tagName==="TEXTAREA"||d.isContentEditable||(e.key==="+"||e.key==="Add"||e.code==="NumpadAdd"||e.shiftKey&&(e.key==="="||e.code==="Equal"))&&Ue()},p=e=>{if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();const d=Array.from(document.querySelectorAll('input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex="-1"])')).filter(b=>b.offsetParent!==null),u=d.indexOf(e.target),y=d[u+1];y&&y.focus()}},Ne=e=>{var d;T.value=e,typeof((d=T.value)==null?void 0:d.country)=="string"&&(Y.value=T.value.country)},Le=e=>{z.value=e},Ke=e=>{_.value=e,qe(),je()},Pe=We(),De=Xe(),Oe=Ge();return al(()=>{Ze("page.order.add.title"),window.addEventListener("keydown",Ie),Pe.onCurrentLocationChange(Ne),De.onCurrentCustomerListChange(Le),Oe.onCurrentCatalogChange(Ke)}),ol(()=>{window.removeEventListener("keydown",Ie),Pe.offCurrentLocationChange(Ne),De.offCurrentCustomerListChange(Le),Oe.offCurrentCatalogChange(Ke)}),(e,d)=>{const u=Je,y=ul,b=rl,h=il,S=sl,i=nl,g=tl("IconBtn"),C=dl;return E(),H("div",null,[V("div",yl,[V("div",bl,[V("h4",gl,m(("$t"in e?e.$t:a(n))("page.order.add.title")),1),V("div",$l,m(("$t"in e?e.$t:a(n))("page.order.add.subtitle")),1)]),V("div",Vl,[l(u,{"enable-catalogs":"","enable-customer-lists":"","enable-locations":""}),l(R,{color:"secondary",onclick:"window.location.reload()",variant:"tonal"},{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.button.discard")),1)]),_:1}),l(R,{disabled:!O.value||w.value.length===0,loading:P.value,onClick:ke},{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.button.create")),1)]),_:1},8,["disabled","loading"])])]),l(A,{dense:""},{default:o(()=>[l(s,{cols:"12",md:"4"},{default:o(()=>[l(ye,{disabled:!T.value||!z.value,loading:!T.value||!z.value,class:"mb-6 fill-height"},{default:o(()=>[l(be,null,{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.section.customer.title")),1)]),_:1}),l(ge,{class:"pb-0"},{default:o(()=>[l(A,{dense:""},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[l(y,{modelValue:O.value,"onUpdate:modelValue":d[0]||(d[0]=t=>O.value=t),items:[],label:("$t"in e?e.$t:a(n))("page.order.add.section.customer.phone.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.customer.phone.placeholder"),onKeyup:f(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12"},{default:o(()=>[l(Re,{modelValue:J.value,"onUpdate:modelValue":d[1]||(d[1]=t=>J.value=t),label:("$t"in e?e.$t:a(n))("page.order.add.section.customer.smsMarketing.label"),onKeyup:f(p,["enter"])},null,8,["modelValue","label"])]),_:1}),l(s,{cols:"12"},{default:o(()=>[l(y,{modelValue:Q.value,"onUpdate:modelValue":d[2]||(d[2]=t=>Q.value=t),items:[],label:("$t"in e?e.$t:a(n))("page.order.add.section.customer.email.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.customer.email.placeholder"),onKeyup:f(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12"},{default:o(()=>[l(Re,{modelValue:x.value,"onUpdate:modelValue":d[3]||(d[3]=t=>x.value=t),label:("$t"in e?e.$t:a(n))("page.order.add.section.customer.emailMarketing.label"),onKeyup:f(p,["enter"])},null,8,["modelValue","label"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(b,{modelValue:X.value,"onUpdate:modelValue":d[4]||(d[4]=t=>X.value=t),label:("$t"in e?e.$t:a(n))("page.order.add.section.customer.firstName.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.customer.firstName.placeholder"),class:"mb-3",onKeyup:f(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(b,{modelValue:G.value,"onUpdate:modelValue":d[5]||(d[5]=t=>G.value=t),label:("$t"in e?e.$t:a(n))("page.order.add.section.customer.lastName.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.customer.lastName.placeholder"),class:"mb-3",onKeyup:f(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12"},{default:o(()=>[l(b,{modelValue:Z.value,"onUpdate:modelValue":d[6]||(d[6]=t=>Z.value=t),label:("$t"in e?e.$t:a(n))("page.order.add.section.customer.company.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.customer.company.placeholder"),class:"mb-3",onKeyup:f(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1}),l(s,{cols:"12",md:"8"},{default:o(()=>[l(ye,{disabled:!T.value,loading:!T.value,class:"action-card mb-6 fill-height"},{default:o(()=>[l(be,null,{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.section.action.title")),1)]),_:1}),l(ge,{class:"pb-0"},{default:o(()=>[l(A,{dense:""},{default:o(()=>[l(s,{cols:"12",md:"4"},{default:o(()=>[V("div",hl,[l(pl,{modelValue:I.value,"onUpdate:modelValue":d[7]||(d[7]=t=>I.value=t),class:"v-tabs-pill",color:"primary",direction:"vertical"},{default:o(()=>[(E(),K($e,{key:0,value:a($.Api).HubriseServiceType.DELIVERY},{default:o(()=>[l(D,{class:"me-2",icon:"mdi-moped"}),V("div",Cl,m(("$t"in e?e.$t:a(n))("page.order.add.section.action.delivery.title")),1)]),_:1},8,["value"])),(E(),K($e,{key:1,value:a($.Api).HubriseServiceType.COLLECTION},{default:o(()=>[l(D,{class:"me-2",icon:"bx-walk"}),V("div",Al,m(("$t"in e?e.$t:a(n))("page.order.add.section.action.pickup.title")),1)]),_:1},8,["value"])),(E(),K($e,{key:2,value:a($.Api).HubriseServiceType.EAT_IN},{default:o(()=>[l(D,{class:"me-2",icon:"ic-baseline-table-bar"}),V("div",Tl,m(("$t"in e?e.$t:a(n))("page.order.add.section.action.eatin.title")),1)]),_:1},8,["value"]))]),_:1},8,["modelValue"])])]),_:1}),l(s,{cols:"12",md:"8"},{default:o(()=>[l(cl,{modelValue:I.value,"onUpdate:modelValue":d[20]||(d[20]=t=>I.value=t),touch:!1,class:"w-100"},{default:o(()=>[l(Ve,{value:a($.Api).HubriseServiceType.DELIVERY},{default:o(()=>[V("div",kl,[l(A,null,{default:o(()=>[l(s,{cols:"6"},{default:o(()=>[l(h,{modelValue:ae.value,"onUpdate:modelValue":d[8]||(d[8]=t=>ae.value=t),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",disable:j},label:("$t"in e?e.$t:a(n))("page.order.add.section.action.delivery.date.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.action.delivery.date.placeholder"),onKeyup:f(p,["enter"])},null,8,["modelValue","config","label","placeholder"])]),_:1}),l(s,{cols:"6"},{default:o(()=>[l(h,{modelValue:oe.value,"onUpdate:modelValue":d[9]||(d[9]=t=>oe.value=t),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"},label:("$t"in e?e.$t:a(n))("page.order.add.section.action.delivery.time.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.action.delivery.time.placeholder"),onKeyup:f(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12"},{default:o(()=>[l(b,{modelValue:te.value,"onUpdate:modelValue":d[10]||(d[10]=t=>te.value=t),label:("$t"in e?e.$t:a(n))("page.order.add.section.action.delivery.address1.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.action.delivery.address1.placeholder"),onKeyup:f(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12"},{default:o(()=>[l(b,{modelValue:de.value,"onUpdate:modelValue":d[11]||(d[11]=t=>de.value=t),label:("$t"in e?e.$t:a(n))("page.order.add.section.action.delivery.address2.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.action.delivery.address2.placeholder"),onKeyup:f(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(b,{modelValue:ne.value,"onUpdate:modelValue":d[12]||(d[12]=t=>ne.value=t),label:("$t"in e?e.$t:a(n))("page.order.add.section.action.delivery.city.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.action.delivery.city.placeholder"),onKeyup:f(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(b,{modelValue:se.value,"onUpdate:modelValue":d[13]||(d[13]=t=>se.value=t),label:("$t"in e?e.$t:a(n))("page.order.add.section.action.delivery.zipcode.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.action.delivery.zipcode.placeholder"),type:"number",onKeyup:f(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"12"},{default:o(()=>[l(S,{modelValue:Y.value,"onUpdate:modelValue":d[14]||(d[14]=t=>Y.value=t),items:a(Fe),label:("$t"in e?e.$t:a(n))("page.order.add.section.action.delivery.country.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.action.delivery.country.placeholder"),"item-title":"label","item-value":"code",onKeyup:f(p,["enter"])},null,8,["modelValue","items","label","placeholder"])]),_:1})]),_:1})])]),_:1},8,["value"]),l(Ve,{value:a($.Api).HubriseServiceType.COLLECTION},{default:o(()=>[V("div",El,[V("div",Ul,[V("div",_l,[l(h,{modelValue:ie.value,"onUpdate:modelValue":d[15]||(d[15]=t=>ie.value=t),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",disable:j},label:("$t"in e?e.$t:a(n))("page.order.add.section.action.pickup.date.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.action.pickup.date.placeholder"),onKeyup:f(p,["enter"])},null,8,["modelValue","config","label","placeholder"])]),V("div",wl,[l(h,{modelValue:re.value,"onUpdate:modelValue":d[16]||(d[16]=t=>re.value=t),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"},label:("$t"in e?e.$t:a(n))("page.order.add.section.action.pickup.time.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.action.pickup.time.placeholder"),onKeyup:f(p,["enter"])},null,8,["modelValue","label","placeholder"])])])])]),_:1},8,["value"]),l(Ve,{value:a($.Api).HubriseServiceType.EAT_IN},{default:o(()=>[V("div",Sl,[V("div",Il,[V("div",Nl,[l(h,{modelValue:ue.value,"onUpdate:modelValue":d[17]||(d[17]=t=>ue.value=t),config:{enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",disable:j},label:("$t"in e?e.$t:a(n))("page.order.add.section.action.eatin.date.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.action.eatin.date.placeholder"),onKeyup:f(p,["enter"])},null,8,["modelValue","config","label","placeholder"])]),V("div",Ll,[l(h,{modelValue:me.value,"onUpdate:modelValue":d[18]||(d[18]=t=>me.value=t),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"},label:("$t"in e?e.$t:a(n))("page.order.add.section.action.eatin.time.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.action.eatin.time.placeholder"),onKeyup:f(p,["enter"])},null,8,["modelValue","label","placeholder"])])]),V("div",Kl,[l(fl,{modelValue:pe.value,"onUpdate:modelValue":d[19]||(d[19]=t=>pe.value=t),label:("$t"in e?e.$t:a(n))("page.order.add.section.action.eatin.table.label"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.action.eatin.table.placeholder"),variant:"underlined",onKeyup:f(p,["enter"])},null,8,["modelValue","label","placeholder"])])])]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1}),l(s,{class:"pt-0 mt-0",cols:"12",md:"12"},{default:o(()=>[l(ye,{disabled:!T.value||!_.value,loading:!T.value||!_.value},{default:o(()=>[l(be,null,{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.section.item.title")),1)]),_:1}),l(ge,null,{default:o(()=>[l(A,{dense:""},{default:o(()=>[l(s,{cols:"2",md:"2"},{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.section.item.reference")),1)]),_:1}),l(s,{cols:"2",md:"4"},{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.section.item.name")),1)]),_:1}),l(s,{cols:"2",md:"1"},{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.section.item.quantity")),1)]),_:1}),l(s,{cols:"2",md:"1"},{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.section.item.vat")),1)]),_:1}),l(s,{cols:"1",md:"1"},{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.section.item.price")),1)]),_:1}),l(s,{class:"text-center",cols:"2",md:"2"},{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.section.item.subtotal")),1)]),_:1}),l(s,{cols:"1",md:"1"})]),_:1}),(E(!0),H(ve,null,He(w.value,t=>(E(),H(ve,{key:t.id},[l(A,{dense:""},{default:o(()=>[l(s,{cols:"4",md:"2"},{default:o(()=>[t.sku_ref!==null?(E(),K(i,{key:0,modelValue:t.sku_ref,"onUpdate:modelValue":[r=>t.sku_ref=r,r=>we(r,t)],items:a(Ae),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.item.reference"),"item-title":"sku_ref","item-value":"id","no-data-text":"common.component.noData",onKeyup:f(p,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])):F("",!0)]),_:2},1024),l(s,{cols:"6",md:"4"},{default:o(()=>[l(i,{modelValue:t.product_name,"onUpdate:modelValue":[r=>t.product_name=r,r=>we(r,t)],items:a(N),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.item.name"),"item-title":"product_name","item-value":"id","no-data-text":"common.component.noData",onKeyup:f(p,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])]),_:2},1024),l(s,{cols:"2",md:"1"},{default:o(()=>[l(b,{modelValue:t.quantity,"onUpdate:modelValue":r=>t.quantity=r,clearable:!1,min:"1",placeholder:"1",type:"number",onKeyup:f(p,["enter"])},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(s,{class:"align-self-end",cols:"3",md:"1"},{default:o(()=>[c(m(Ee(t.tax_rate)),1)]),_:2},1024),l(s,{class:"align-self-end",cols:"3",md:"1"},{default:o(()=>[c(m(("displayPrice"in e?e.displayPrice:a(L))(t.price)),1)]),_:2},1024),l(s,{class:"align-self-end text-center",cols:"3",md:"2"},{default:o(()=>[c(m(("displayPrice"in e?e.displayPrice:a(L))(a($.Api).HubrisePriceUtil.multiply(t.price,t.quantity))),1)]),_:2},1024),l(s,{class:"px-0",cols:"3",md:"1"},{default:o(()=>[l(g,{"x-small":"",onClick:r=>t.customer_notes=t.customer_notes===void 0?null:void 0},{default:o(()=>[l(D,{icon:"bx-edit"})]),_:2},1032,["onClick"]),l(g,{onClick:r=>ze(t)},{default:o(()=>[l(D,{icon:"bx-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),(E(!0),H(ve,null,He(t.options,r=>(E(),H("div",{key:r.ref},[l(A,{dense:""},{default:o(()=>[l(s,{class:"d-flex align-self-end",cols:"4",md:"2"},{default:o(()=>[l(he),r.ref!==null?(E(),K(i,{key:0,modelValue:r.ref,"onUpdate:modelValue":[k=>r.ref=k,k=>Se(t.id,k,r)],items:a(B)[t.id],placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.item.reference"),"item-title":"ref","item-value":"id","no-data-text":"common.component.noData",onKeyup:f(p,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])):F("",!0)]),_:2},1024),l(s,{class:"d-flex align-self-end",cols:"6",md:"4"},{default:o(()=>[l(he),l(i,{modelValue:r.name,"onUpdate:modelValue":[k=>r.name=k,k=>Se(t.id,k,r)],items:a(U)[t.id],placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.item.name"),"item-title":"name","item-value":"id","no-data-text":"common.component.noData",onKeyup:f(p,["enter"])},null,8,["modelValue","onUpdate:modelValue","items","placeholder"])]),_:2},1024),l(s,{class:"d-flex align-self-end",cols:"2",md:"1"},{default:o(()=>[l(b,{modelValue:r.quantity,"onUpdate:modelValue":k=>r.quantity=k,clearable:!1,min:"1",placeholder:"1",type:"number",onKeyup:f(p,["enter"])},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(s,{class:"align-self-end",cols:"3",md:"1"},{default:o(()=>[c(m(Ee(t.tax_rate)),1)]),_:2},1024),l(s,{class:"align-self-end",cols:"3",md:"1"},{default:o(()=>[c(m(("displayPrice"in e?e.displayPrice:a(L))(r.price)),1)]),_:2},1024),l(s,{class:"align-self-end text-center",cols:"3",md:"2"},{default:o(()=>[c(m(("displayPrice"in e?e.displayPrice:a(L))(a($.Api).HubrisePriceUtil.multiply(r.price,r.quantity))),1)]),_:2},1024),l(s,{cols:"3",md:"1"},{default:o(()=>[l(g,{onClick:k=>Be(t,r)},{default:o(()=>[l(D,{icon:"bx-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),l(A,{dense:""},{default:o(()=>[l(s,{cols:"0",md:"2"}),l(s,{cols:"12",md:"5"},{default:o(()=>{var r;return[((r=a(U)[t.id])==null?void 0:r.length)>0?(E(),K(R,{key:0,class:"mt-6",color:"secondary","prepend-icon":"bx-plus",size:"x-small",onClick:k=>_e(t)},{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.section.item.button.add.itemOption")),1)]),_:2},1032,["onClick"])):F("",!0)]}),_:2},1024),l(s,{cols:"12",md:"4"},{default:o(()=>[t.customer_notes!==void 0?(E(),K(C,{key:0,modelValue:t.customer_notes,"onUpdate:modelValue":r=>t.customer_notes=r,label:("$t"in e?e.$t:a(n))("page.order.add.section.item.itemNotes"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.item.itemNotes"),"auto-grow":"",counter:"",maxlength:"300",rows:"1",onKeyup:f(p,["enter"])},null,8,["modelValue","onUpdate:modelValue","label","placeholder"])):F("",!0)]),_:2},1024),l(s,{cols:"0",md:"1"})]),_:2},1024)],64))),128)),l(A,{dense:""},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[l(R,{class:"mt-6",color:"secondary","prepend-icon":"bx-plus",size:"small",onClick:Ue},{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.section.item.button.add.item")),1)]),_:1})]),_:1}),l(s,{class:"px-4 py-8",cols:"6",md:"3"},{default:o(()=>[l(C,{modelValue:M.value,"onUpdate:modelValue":d[21]||(d[21]=t=>M.value=t),label:("$t"in e?e.$t:a(n))("page.order.add.section.item.customerNotes"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.item.customerNotes"),"auto-grow":"",counter:"",maxlength:"500",rows:"4",onKeyup:f(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{class:"px-4 py-8",cols:"6",md:"3"},{default:o(()=>[l(he),l(C,{modelValue:W.value,"onUpdate:modelValue":d[22]||(d[22]=t=>W.value=t),label:("$t"in e?e.$t:a(n))("page.order.add.section.item.sellerNotes"),placeholder:("$t"in e?e.$t:a(n))("page.order.add.section.item.sellerNotes"),"auto-grow":"",counter:"",maxlength:"500",rows:"4",onKeyup:f(p,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),l(s,{cols:"0",md:"1"}),l(s,{cols:"12",md:"5"},{default:o(()=>[l(A,{dense:""},{default:o(()=>[l(s,{cols:"6",md:"5"},{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.section.item.subtotal")),1)]),_:1}),l(s,{class:"text-center",cols:"6",md:"4"},{default:o(()=>[c(m(("displayPrice"in e?e.displayPrice:a(L))(a(q).subtotal)),1)]),_:1}),l(s,{cols:"0",md:"3"})]),_:1}),I.value===a($.Api).HubriseServiceType.DELIVERY?(E(),K(A,{key:0,dense:""},{default:o(()=>[l(s,{cols:"6",md:"5"},{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.section.item.deliveryFee")),1)]),_:1}),l(s,{class:"text-center",cols:"6",md:"4"},{default:o(()=>[c(m(("displayPrice"in e?e.displayPrice:a(L))(a(q).deliveryFee)),1)]),_:1}),l(s,{cols:"0",md:"3"})]),_:1})):F("",!0),l(A,{dense:""},{default:o(()=>[l(s,{cols:"6",md:"5"},{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.section.item.minimumOrderFee")),1)]),_:1}),l(s,{class:"text-center",cols:"6",md:"4"},{default:o(()=>[c(m(("displayPrice"in e?e.displayPrice:a(L))(a(q).minimumOrderFee)),1)]),_:1}),l(s,{cols:"0",md:"3"})]),_:1}),l(A,{dense:""},{default:o(()=>[l(s,{cols:"6",md:"5"},{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.section.item.total")),1)]),_:1}),l(s,{class:"text-center",cols:"6",md:"4"},{default:o(()=>[c(m(("displayPrice"in e?e.displayPrice:a(L))(a(q).total)),1)]),_:1}),l(s,{cols:"0",md:"3"})]),_:1}),l(A,{dense:""},{default:o(()=>[l(s,{cols:"12",md:"9"},{default:o(()=>[l(R,{disabled:!O.value||w.value.length===0,loading:P.value,class:"w-100",onClick:ke},{default:o(()=>[c(m(("$t"in e?e.$t:a(n))("page.order.add.button.create")),1)]),_:1},8,["disabled","loading"])]),_:1}),l(s,{cols:"0",md:"3"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","loading"])]),_:1})]),_:1})])}}}),_a=vl(Pl,[["__scopeId","data-v-9eae9b1f"]]);export{_a as default};
